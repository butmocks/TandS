{"ast":null,"code":"import _regeneratorRuntime from \"/home/butmocks/Projects/TandS/react-kikko-example-forked/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/butmocks/Projects/TandS/react-kikko-example-forked/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineEnumerableProperties from \"/home/butmocks/Projects/TandS/react-kikko-example-forked/node_modules/@babel/runtime/helpers/esm/defineEnumerableProperties.js\";\nimport _defineProperty from \"/home/butmocks/Projects/TandS/react-kikko-example-forked/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"/home/butmocks/Projects/TandS/react-kikko-example-forked/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nfunction isWorker() {\n  return typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\n}\nfunction makeStartWorkerFromMain(getModule) {\n  return function (argBuffer, resultBuffer, parentWorker) {\n    if (isWorker()) {\n      throw new Error(\"`startWorkerFromMain` should only be called from the main thread\");\n    }\n    if (typeof Worker === \"undefined\") {\n      throw new Error(\"Web workers not available. sqlite3 requires web workers to work.\");\n    }\n    getModule().then(function (_ref) {\n      var BackendWorker = _ref.default;\n      var worker = new BackendWorker();\n      worker.postMessage({\n        type: \"init\",\n        buffers: [argBuffer, resultBuffer]\n      });\n      worker.addEventListener(\"message\", function (msg) {\n        parentWorker.postMessage(msg.data);\n      });\n    });\n  };\n}\nfunction makeInitBackend(spawnEventName, getModule) {\n  var startWorkerFromMain = makeStartWorkerFromMain(getModule);\n  return function (worker) {\n    worker.addEventListener(\"message\", function (e) {\n      switch (e.data.type) {\n        case spawnEventName:\n          startWorkerFromMain(e.data.argBuffer, e.data.resultBuffer, worker);\n          break;\n      }\n    });\n  };\n}\nvar initBackend = makeInitBackend(\"__absurd:spawn-idb-worker\", function () {\n  return Promise.resolve().then(function () {\n    return indexeddbMainThreadWorkerD62f296a;\n  });\n});\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d2, b2) {\n    d2.__proto__ = b2;\n  } || function (d2, b2) {\n    for (var p in b2) {\n      if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];\n    }\n  };\n  return _extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  _extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n          case 7:\n            op = _.ops.pop();\n            _.trys.pop();\n            continue;\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n              _.ops.push(op);\n              break;\n            }\n            if (t[2]) _.ops.pop();\n            _.trys.pop();\n            continue;\n        }\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from2, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from2.length, ar; i < l; i++) {\n    if (ar || !(i in from2)) {\n      if (!ar) ar = Array.prototype.slice.call(from2, 0, i);\n      ar[i] = from2[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from2));\n}\nfunction __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n    i,\n    q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nfunction __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n    i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v2) {\n      resolve({\n        value: v2,\n        done: d\n      });\n    }, reject);\n  }\n}\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction createErrorClass(createImpl) {\n  var _super = function _super(instance) {\n    Error.call(instance);\n    instance.stack = new Error().stack;\n  };\n  var ctorFunc = createImpl(_super);\n  ctorFunc.prototype = Object.create(Error.prototype);\n  ctorFunc.prototype.constructor = ctorFunc;\n  return ctorFunc;\n}\nvar UnsubscriptionError = createErrorClass(function (_super) {\n  return function UnsubscriptionErrorImpl(errors) {\n    _super(this);\n    this.message = errors ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) {\n      return i + 1 + \") \" + err.toString();\n    }).join(\"\\n  \") : \"\";\n    this.name = \"UnsubscriptionError\";\n    this.errors = errors;\n  };\n});\nfunction arrRemove(arr, item) {\n  if (arr) {\n    var index = arr.indexOf(item);\n    0 <= index && arr.splice(index, 1);\n  }\n}\nvar Subscription = function () {\n  function Subscription2(initialTeardown) {\n    this.initialTeardown = initialTeardown;\n    this.closed = false;\n    this._parentage = null;\n    this._finalizers = null;\n  }\n  Subscription2.prototype.unsubscribe = function () {\n    var e_1, _a, e_2, _b;\n    var errors;\n    if (!this.closed) {\n      this.closed = true;\n      var _parentage = this._parentage;\n      if (_parentage) {\n        this._parentage = null;\n        if (Array.isArray(_parentage)) {\n          try {\n            for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n              var parent_1 = _parentage_1_1.value;\n              parent_1.remove(this);\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n        } else {\n          _parentage.remove(this);\n        }\n      }\n      var initialFinalizer = this.initialTeardown;\n      if (isFunction(initialFinalizer)) {\n        try {\n          initialFinalizer();\n        } catch (e) {\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\n        }\n      }\n      var _finalizers = this._finalizers;\n      if (_finalizers) {\n        this._finalizers = null;\n        try {\n          for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n            var finalizer = _finalizers_1_1.value;\n            try {\n              execFinalizer(finalizer);\n            } catch (err) {\n              errors = errors !== null && errors !== void 0 ? errors : [];\n              if (err instanceof UnsubscriptionError) {\n                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n              } else {\n                errors.push(err);\n              }\n            }\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      }\n      if (errors) {\n        throw new UnsubscriptionError(errors);\n      }\n    }\n  };\n  Subscription2.prototype.add = function (teardown) {\n    var _a;\n    if (teardown && teardown !== this) {\n      if (this.closed) {\n        execFinalizer(teardown);\n      } else {\n        if (teardown instanceof Subscription2) {\n          if (teardown.closed || teardown._hasParent(this)) {\n            return;\n          }\n          teardown._addParent(this);\n        }\n        (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n      }\n    }\n  };\n  Subscription2.prototype._hasParent = function (parent) {\n    var _parentage = this._parentage;\n    return _parentage === parent || Array.isArray(_parentage) && _parentage.includes(parent);\n  };\n  Subscription2.prototype._addParent = function (parent) {\n    var _parentage = this._parentage;\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n  };\n  Subscription2.prototype._removeParent = function (parent) {\n    var _parentage = this._parentage;\n    if (_parentage === parent) {\n      this._parentage = null;\n    } else if (Array.isArray(_parentage)) {\n      arrRemove(_parentage, parent);\n    }\n  };\n  Subscription2.prototype.remove = function (teardown) {\n    var _finalizers = this._finalizers;\n    _finalizers && arrRemove(_finalizers, teardown);\n    if (teardown instanceof Subscription2) {\n      teardown._removeParent(this);\n    }\n  };\n  Subscription2.EMPTY = function () {\n    var empty = new Subscription2();\n    empty.closed = true;\n    return empty;\n  }();\n  return Subscription2;\n}();\nvar EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nfunction isSubscription(value) {\n  return value instanceof Subscription || value && \"closed\" in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe);\n}\nfunction execFinalizer(finalizer) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\nvar config = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: void 0,\n  useDeprecatedSynchronousErrorHandling: false,\n  useDeprecatedNextContext: false\n};\nvar timeoutProvider = {\n  setTimeout: function (_setTimeout) {\n    function setTimeout(_x, _x2) {\n      return _setTimeout.apply(this, arguments);\n    }\n    setTimeout.toString = function () {\n      return _setTimeout.toString();\n    };\n    return setTimeout;\n  }(function (handler, timeout2) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n    var delegate = timeoutProvider.delegate;\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n      return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout2], __read(args)));\n    }\n    return setTimeout.apply(void 0, __spreadArray([handler, timeout2], __read(args)));\n  }),\n  clearTimeout: function (_clearTimeout) {\n    function clearTimeout(_x3) {\n      return _clearTimeout.apply(this, arguments);\n    }\n    clearTimeout.toString = function () {\n      return _clearTimeout.toString();\n    };\n    return clearTimeout;\n  }(function (handle) {\n    var delegate = timeoutProvider.delegate;\n    return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n  }),\n  delegate: void 0\n};\nfunction reportUnhandledError(err) {\n  timeoutProvider.setTimeout(function () {\n    {\n      throw err;\n    }\n  });\n}\nfunction noop() {}\nvar context = null;\nfunction errorContext(cb) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    var isRoot = !context;\n    if (isRoot) {\n      context = {\n        errorThrown: false,\n        error: null\n      };\n    }\n    cb();\n    if (isRoot) {\n      var _a = context,\n        errorThrown = _a.errorThrown,\n        error = _a.error;\n      context = null;\n      if (errorThrown) {\n        throw error;\n      }\n    }\n  } else {\n    cb();\n  }\n}\nvar Subscriber = function (_super) {\n  __extends(Subscriber2, _super);\n  function Subscriber2(destination) {\n    var _this = _super.call(this) || this;\n    _this.isStopped = false;\n    if (destination) {\n      _this.destination = destination;\n      if (isSubscription(destination)) {\n        destination.add(_this);\n      }\n    } else {\n      _this.destination = EMPTY_OBSERVER;\n    }\n    return _this;\n  }\n  Subscriber2.create = function (next, error, complete) {\n    return new SafeSubscriber(next, error, complete);\n  };\n  Subscriber2.prototype.next = function (value) {\n    if (this.isStopped) ;else {\n      this._next(value);\n    }\n  };\n  Subscriber2.prototype.error = function (err) {\n    if (this.isStopped) ;else {\n      this.isStopped = true;\n      this._error(err);\n    }\n  };\n  Subscriber2.prototype.complete = function () {\n    if (this.isStopped) ;else {\n      this.isStopped = true;\n      this._complete();\n    }\n  };\n  Subscriber2.prototype.unsubscribe = function () {\n    if (!this.closed) {\n      this.isStopped = true;\n      _super.prototype.unsubscribe.call(this);\n      this.destination = null;\n    }\n  };\n  Subscriber2.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n  Subscriber2.prototype._error = function (err) {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  };\n  Subscriber2.prototype._complete = function () {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  };\n  return Subscriber2;\n}(Subscription);\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n  return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = function () {\n  function ConsumerObserver2(partialObserver) {\n    this.partialObserver = partialObserver;\n  }\n  ConsumerObserver2.prototype.next = function (value) {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.next) {\n      try {\n        partialObserver.next(value);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  };\n  ConsumerObserver2.prototype.error = function (err) {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.error) {\n      try {\n        partialObserver.error(err);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    } else {\n      handleUnhandledError(err);\n    }\n  };\n  ConsumerObserver2.prototype.complete = function () {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.complete) {\n      try {\n        partialObserver.complete();\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  };\n  return ConsumerObserver2;\n}();\nvar SafeSubscriber = function (_super) {\n  __extends(SafeSubscriber2, _super);\n  function SafeSubscriber2(observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    var partialObserver;\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      partialObserver = {\n        next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : void 0,\n        error: error !== null && error !== void 0 ? error : void 0,\n        complete: complete !== null && complete !== void 0 ? complete : void 0\n      };\n    } else {\n      var context_1;\n      if (_this && config.useDeprecatedNextContext) {\n        context_1 = Object.create(observerOrNext);\n        context_1.unsubscribe = function () {\n          return _this.unsubscribe();\n        };\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context_1),\n          error: observerOrNext.error && bind(observerOrNext.error, context_1),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context_1)\n        };\n      } else {\n        partialObserver = observerOrNext;\n      }\n    }\n    _this.destination = new ConsumerObserver(partialObserver);\n    return _this;\n  }\n  return SafeSubscriber2;\n}(Subscriber);\nfunction handleUnhandledError(error) {\n  {\n    reportUnhandledError(error);\n  }\n}\nfunction defaultErrorHandler(err) {\n  throw err;\n}\nvar EMPTY_OBSERVER = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop\n};\nvar observable = function () {\n  return typeof Symbol === \"function\" && Symbol.observable || \"@@observable\";\n}();\nfunction identity(x) {\n  return x;\n}\nfunction pipeFromArray(fns) {\n  if (fns.length === 0) {\n    return identity;\n  }\n  if (fns.length === 1) {\n    return fns[0];\n  }\n  return function piped(input) {\n    return fns.reduce(function (prev, fn) {\n      return fn(prev);\n    }, input);\n  };\n}\nvar Observable = function () {\n  function Observable2(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable2.prototype.lift = function (operator) {\n    var observable2 = new Observable2();\n    observable2.source = this;\n    observable2.operator = operator;\n    return observable2;\n  };\n  Observable2.prototype.subscribe = function (observerOrNext, error, complete) {\n    var _this = this;\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function () {\n      var _a = _this,\n        operator = _a.operator,\n        source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n  Observable2.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n  Observable2.prototype.forEach = function (_next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscriber = new SafeSubscriber({\n        next: function next(value) {\n          try {\n            _next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n      _this.subscribe(subscriber);\n    });\n  };\n  Observable2.prototype._subscribe = function (subscriber) {\n    var _a;\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n  Observable2.prototype[observable] = function () {\n    return this;\n  };\n  Observable2.prototype.pipe = function () {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable2.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n  Observable2.create = function (subscribe) {\n    return new Observable2(subscribe);\n  };\n  return Observable2;\n}();\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}\nfunction hasLift(source) {\n  return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nfunction operate(init) {\n  return function (source) {\n    if (hasLift(source)) {\n      return source.lift(function (liftedSource) {\n        try {\n          return init(liftedSource, this);\n        } catch (err) {\n          this.error(err);\n        }\n      });\n    }\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\nfunction createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = function (_super) {\n  __extends(OperatorSubscriber2, _super);\n  function OperatorSubscriber2(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n    var _this = _super.call(this, destination) || this;\n    _this.onFinalize = onFinalize;\n    _this.shouldUnsubscribe = shouldUnsubscribe;\n    _this._next = onNext ? function (value) {\n      try {\n        onNext(value);\n      } catch (err) {\n        destination.error(err);\n      }\n    } : _super.prototype._next;\n    _this._error = onError ? function (err) {\n      try {\n        onError(err);\n      } catch (err2) {\n        destination.error(err2);\n      } finally {\n        this.unsubscribe();\n      }\n    } : _super.prototype._error;\n    _this._complete = onComplete ? function () {\n      try {\n        onComplete();\n      } catch (err) {\n        destination.error(err);\n      } finally {\n        this.unsubscribe();\n      }\n    } : _super.prototype._complete;\n    return _this;\n  }\n  OperatorSubscriber2.prototype.unsubscribe = function () {\n    var _a;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var closed_1 = this.closed;\n      _super.prototype.unsubscribe.call(this);\n      !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n    }\n  };\n  return OperatorSubscriber2;\n}(Subscriber);\nvar ObjectUnsubscribedError = createErrorClass(function (_super) {\n  return function ObjectUnsubscribedErrorImpl() {\n    _super(this);\n    this.name = \"ObjectUnsubscribedError\";\n    this.message = \"object unsubscribed\";\n  };\n});\nvar Subject = function (_super) {\n  __extends(Subject2, _super);\n  function Subject2() {\n    var _this = _super.call(this) || this;\n    _this.closed = false;\n    _this.currentObservers = null;\n    _this.observers = [];\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject2.prototype.lift = function (operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject2.prototype._throwIfClosed = function () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  };\n  Subject2.prototype.next = function (value) {\n    var _this = this;\n    errorContext(function () {\n      var e_1, _a;\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        if (!_this.currentObservers) {\n          _this.currentObservers = Array.from(_this.observers);\n        }\n        try {\n          for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var observer = _c.value;\n            observer.next(value);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    });\n  };\n  Subject2.prototype.error = function (err) {\n    var _this = this;\n    errorContext(function () {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.hasError = _this.isStopped = true;\n        _this.thrownError = err;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().error(err);\n        }\n      }\n    });\n  };\n  Subject2.prototype.complete = function () {\n    var _this = this;\n    errorContext(function () {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.isStopped = true;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().complete();\n        }\n      }\n    });\n  };\n  Subject2.prototype.unsubscribe = function () {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null;\n  };\n  Object.defineProperty(Subject2.prototype, \"observed\", {\n    get: function get() {\n      var _a;\n      return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Subject2.prototype._trySubscribe = function (subscriber) {\n    this._throwIfClosed();\n    return _super.prototype._trySubscribe.call(this, subscriber);\n  };\n  Subject2.prototype._subscribe = function (subscriber) {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  };\n  Subject2.prototype._innerSubscribe = function (subscriber) {\n    var _this = this;\n    var _a = this,\n      hasError = _a.hasError,\n      isStopped = _a.isStopped,\n      observers = _a.observers;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(function () {\n      _this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  };\n  Subject2.prototype._checkFinalizedStatuses = function (subscriber) {\n    var _a = this,\n      hasError = _a.hasError,\n      thrownError = _a.thrownError,\n      isStopped = _a.isStopped;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  };\n  Subject2.prototype.asObservable = function () {\n    var observable2 = new Observable();\n    observable2.source = this;\n    return observable2;\n  };\n  Subject2.create = function (destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject2;\n}(Observable);\nvar AnonymousSubject = function (_super) {\n  __extends(AnonymousSubject2, _super);\n  function AnonymousSubject2(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject2.prototype.next = function (value) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n  };\n  AnonymousSubject2.prototype.error = function (err) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n  };\n  AnonymousSubject2.prototype.complete = function () {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  AnonymousSubject2.prototype._subscribe = function (subscriber) {\n    var _a, _b;\n    return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n  };\n  return AnonymousSubject2;\n}(Subject);\nvar dateTimestampProvider = {\n  now: function now() {\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: void 0\n};\nvar ReplaySubject = function (_super) {\n  __extends(ReplaySubject2, _super);\n  function ReplaySubject2(_bufferSize, _windowTime, _timestampProvider) {\n    if (_bufferSize === void 0) {\n      _bufferSize = Infinity;\n    }\n    if (_windowTime === void 0) {\n      _windowTime = Infinity;\n    }\n    if (_timestampProvider === void 0) {\n      _timestampProvider = dateTimestampProvider;\n    }\n    var _this = _super.call(this) || this;\n    _this._bufferSize = _bufferSize;\n    _this._windowTime = _windowTime;\n    _this._timestampProvider = _timestampProvider;\n    _this._buffer = [];\n    _this._infiniteTimeWindow = true;\n    _this._infiniteTimeWindow = _windowTime === Infinity;\n    _this._bufferSize = Math.max(1, _bufferSize);\n    _this._windowTime = Math.max(1, _windowTime);\n    return _this;\n  }\n  ReplaySubject2.prototype.next = function (value) {\n    var _a = this,\n      isStopped = _a.isStopped,\n      _buffer = _a._buffer,\n      _infiniteTimeWindow = _a._infiniteTimeWindow,\n      _timestampProvider = _a._timestampProvider,\n      _windowTime = _a._windowTime;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    _super.prototype.next.call(this, value);\n  };\n  ReplaySubject2.prototype._subscribe = function (subscriber) {\n    this._throwIfClosed();\n    this._trimBuffer();\n    var subscription = this._innerSubscribe(subscriber);\n    var _a = this,\n      _infiniteTimeWindow = _a._infiniteTimeWindow,\n      _buffer = _a._buffer;\n    var copy = _buffer.slice();\n    for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i]);\n    }\n    this._checkFinalizedStatuses(subscriber);\n    return subscription;\n  };\n  ReplaySubject2.prototype._trimBuffer = function () {\n    var _a = this,\n      _bufferSize = _a._bufferSize,\n      _timestampProvider = _a._timestampProvider,\n      _buffer = _a._buffer,\n      _infiniteTimeWindow = _a._infiniteTimeWindow;\n    var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n    if (!_infiniteTimeWindow) {\n      var now = _timestampProvider.now();\n      var last2 = 0;\n      for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n        last2 = i;\n      }\n      last2 && _buffer.splice(0, last2 + 1);\n    }\n  };\n  return ReplaySubject2;\n}(Subject);\nvar Action = function (_super) {\n  __extends(Action2, _super);\n  function Action2(scheduler, work) {\n    return _super.call(this) || this;\n  }\n  Action2.prototype.schedule = function (state, delay) {\n    return this;\n  };\n  return Action2;\n}(Subscription);\nvar intervalProvider = {\n  setInterval: function (_setInterval) {\n    function setInterval(_x4, _x5) {\n      return _setInterval.apply(this, arguments);\n    }\n    setInterval.toString = function () {\n      return _setInterval.toString();\n    };\n    return setInterval;\n  }(function (handler, timeout2) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n    var delegate = intervalProvider.delegate;\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n      return delegate.setInterval.apply(delegate, __spreadArray([handler, timeout2], __read(args)));\n    }\n    return setInterval.apply(void 0, __spreadArray([handler, timeout2], __read(args)));\n  }),\n  clearInterval: function (_clearInterval) {\n    function clearInterval(_x6) {\n      return _clearInterval.apply(this, arguments);\n    }\n    clearInterval.toString = function () {\n      return _clearInterval.toString();\n    };\n    return clearInterval;\n  }(function (handle) {\n    var delegate = intervalProvider.delegate;\n    return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n  }),\n  delegate: void 0\n};\nvar AsyncAction = function (_super) {\n  __extends(AsyncAction2, _super);\n  function AsyncAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n  AsyncAction2.prototype.schedule = function (state, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n    if (this.closed) {\n      return this;\n    }\n    this.state = state;\n    var id = this.id;\n    var scheduler = this.scheduler;\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay);\n    }\n    this.pending = true;\n    this.delay = delay;\n    this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n    return this;\n  };\n  AsyncAction2.prototype.requestAsyncId = function (scheduler, _id, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n    return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n  };\n  AsyncAction2.prototype.recycleAsyncId = function (_scheduler, id, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n    if (delay != null && this.delay === delay && this.pending === false) {\n      return id;\n    }\n    intervalProvider.clearInterval(id);\n    return void 0;\n  };\n  AsyncAction2.prototype.execute = function (state, delay) {\n    if (this.closed) {\n      return new Error(\"executing a cancelled action\");\n    }\n    this.pending = false;\n    var error = this._execute(state, delay);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  };\n  AsyncAction2.prototype._execute = function (state, _delay) {\n    var errored = false;\n    var errorValue;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      errorValue = e ? e : new Error(\"Scheduled action threw falsy error\");\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  };\n  AsyncAction2.prototype.unsubscribe = function () {\n    if (!this.closed) {\n      var _a = this,\n        id = _a.id,\n        scheduler = _a.scheduler;\n      var actions = scheduler.actions;\n      this.work = this.state = this.scheduler = null;\n      this.pending = false;\n      arrRemove(actions, this);\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n      this.delay = null;\n      _super.prototype.unsubscribe.call(this);\n    }\n  };\n  return AsyncAction2;\n}(Action);\nvar Scheduler = function () {\n  function Scheduler2(schedulerActionCtor, now) {\n    if (now === void 0) {\n      now = Scheduler2.now;\n    }\n    this.schedulerActionCtor = schedulerActionCtor;\n    this.now = now;\n  }\n  Scheduler2.prototype.schedule = function (work, delay, state) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n    return new this.schedulerActionCtor(this, work).schedule(state, delay);\n  };\n  Scheduler2.now = dateTimestampProvider.now;\n  return Scheduler2;\n}();\nvar AsyncScheduler = function (_super) {\n  __extends(AsyncScheduler2, _super);\n  function AsyncScheduler2(SchedulerAction, now) {\n    if (now === void 0) {\n      now = Scheduler.now;\n    }\n    var _this = _super.call(this, SchedulerAction, now) || this;\n    _this.actions = [];\n    _this._active = false;\n    _this._scheduled = void 0;\n    return _this;\n  }\n  AsyncScheduler2.prototype.flush = function (action) {\n    var actions = this.actions;\n    if (this._active) {\n      actions.push(action);\n      return;\n    }\n    var error;\n    this._active = true;\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (action = actions.shift());\n    this._active = false;\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  return AsyncScheduler2;\n}(Scheduler);\nvar asyncScheduler = new AsyncScheduler(AsyncAction);\nvar EMPTY = new Observable(function (subscriber) {\n  return subscriber.complete();\n});\nfunction isScheduler(value) {\n  return value && isFunction(value.schedule);\n}\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\nfunction popScheduler(args) {\n  return isScheduler(last(args)) ? args.pop() : void 0;\n}\nvar isArrayLike = function isArrayLike(x) {\n  return x && typeof x.length === \"number\" && typeof x !== \"function\";\n};\nfunction isPromise(value) {\n  return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\nfunction isInteropObservable(input) {\n  return isFunction(input[observable]);\n}\nfunction isAsyncIterable(obj) {\n  return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\nfunction createInvalidObservableTypeError(input) {\n  return new TypeError(\"You provided \" + (input !== null && typeof input === \"object\" ? \"an invalid object\" : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\nfunction getSymbolIterator() {\n  if (typeof Symbol !== \"function\" || !Symbol.iterator) {\n    return \"@@iterator\";\n  }\n  return Symbol.iterator;\n}\nvar iterator = getSymbolIterator();\nfunction isIterable(input) {\n  return isFunction(input === null || input === void 0 ? void 0 : input[iterator]);\n}\nfunction readableStreamLikeToAsyncGenerator(readableStream) {\n  return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n    var reader, _a, value, done;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          reader = readableStream.getReader();\n          _b.label = 1;\n        case 1:\n          _b.trys.push([1,, 9, 10]);\n          _b.label = 2;\n        case 2:\n          return [4, __await(reader.read())];\n        case 3:\n          _a = _b.sent(), value = _a.value, done = _a.done;\n          if (!done) return [3, 5];\n          return [4, __await(void 0)];\n        case 4:\n          return [2, _b.sent()];\n        case 5:\n          return [4, __await(value)];\n        case 6:\n          return [4, _b.sent()];\n        case 7:\n          _b.sent();\n          return [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          reader.releaseLock();\n          return [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction isReadableStreamLike(obj) {\n  return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\nfunction innerFrom(input) {\n  if (input instanceof Observable) {\n    return input;\n  }\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return fromInteropObservable(input);\n    }\n    if (isArrayLike(input)) {\n      return fromArrayLike(input);\n    }\n    if (isPromise(input)) {\n      return fromPromise(input);\n    }\n    if (isAsyncIterable(input)) {\n      return fromAsyncIterable(input);\n    }\n    if (isIterable(input)) {\n      return fromIterable(input);\n    }\n    if (isReadableStreamLike(input)) {\n      return fromReadableStreamLike(input);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\nfunction fromInteropObservable(obj) {\n  return new Observable(function (subscriber) {\n    var obs = obj[observable]();\n    if (isFunction(obs.subscribe)) {\n      return obs.subscribe(subscriber);\n    }\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction fromArrayLike(array) {\n  return new Observable(function (subscriber) {\n    for (var i = 0; i < array.length && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  });\n}\nfunction fromPromise(promise) {\n  return new Observable(function (subscriber) {\n    promise.then(function (value) {\n      if (!subscriber.closed) {\n        subscriber.next(value);\n        subscriber.complete();\n      }\n    }, function (err) {\n      return subscriber.error(err);\n    }).then(null, reportUnhandledError);\n  });\n}\nfunction fromIterable(iterable) {\n  return new Observable(function (subscriber) {\n    var e_1, _a;\n    try {\n      for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n        var value = iterable_1_1.value;\n        subscriber.next(value);\n        if (subscriber.closed) {\n          return;\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    subscriber.complete();\n  });\n}\nfunction fromAsyncIterable(asyncIterable) {\n  return new Observable(function (subscriber) {\n    process(asyncIterable, subscriber).catch(function (err) {\n      return subscriber.error(err);\n    });\n  });\n}\nfunction fromReadableStreamLike(readableStream) {\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n  var asyncIterable_1, asyncIterable_1_1;\n  var e_2, _a;\n  return __awaiter(this, void 0, void 0, function () {\n    var value, e_2_1;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          _b.trys.push([0, 5, 6, 11]);\n          asyncIterable_1 = __asyncValues(asyncIterable);\n          _b.label = 1;\n        case 1:\n          return [4, asyncIterable_1.next()];\n        case 2:\n          if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n          value = asyncIterable_1_1.value;\n          subscriber.next(value);\n          if (subscriber.closed) {\n            return [2];\n          }\n          _b.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          e_2_1 = _b.sent();\n          e_2 = {\n            error: e_2_1\n          };\n          return [3, 11];\n        case 6:\n          _b.trys.push([6,, 9, 10]);\n          if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n          return [4, _a.call(asyncIterable_1)];\n        case 7:\n          _b.sent();\n          _b.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (e_2) throw e_2.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          subscriber.complete();\n          return [2];\n      }\n    });\n  });\n}\nfunction executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n  if (repeat === void 0) {\n    repeat = false;\n  }\n  var scheduleSubscription = scheduler.schedule(function () {\n    work();\n    if (repeat) {\n      parentSubscription.add(this.schedule(null, delay));\n    } else {\n      this.unsubscribe();\n    }\n  }, delay);\n  parentSubscription.add(scheduleSubscription);\n  if (!repeat) {\n    return scheduleSubscription;\n  }\n}\nfunction observeOn(scheduler, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n  return operate(function (source, subscriber) {\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      return executeSchedule(subscriber, scheduler, function () {\n        return subscriber.next(value);\n      }, delay);\n    }, function () {\n      return executeSchedule(subscriber, scheduler, function () {\n        return subscriber.complete();\n      }, delay);\n    }, function (err) {\n      return executeSchedule(subscriber, scheduler, function () {\n        return subscriber.error(err);\n      }, delay);\n    }));\n  });\n}\nfunction subscribeOn(scheduler, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n  return operate(function (source, subscriber) {\n    subscriber.add(scheduler.schedule(function () {\n      return source.subscribe(subscriber);\n    }, delay));\n  });\n}\nfunction scheduleObservable(input, scheduler) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\nfunction schedulePromise(input, scheduler) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\nfunction scheduleArray(input, scheduler) {\n  return new Observable(function (subscriber) {\n    var i = 0;\n    return scheduler.schedule(function () {\n      if (i === input.length) {\n        subscriber.complete();\n      } else {\n        subscriber.next(input[i++]);\n        if (!subscriber.closed) {\n          this.schedule();\n        }\n      }\n    });\n  });\n}\nfunction scheduleIterable(input, scheduler) {\n  return new Observable(function (subscriber) {\n    var iterator$1;\n    executeSchedule(subscriber, scheduler, function () {\n      iterator$1 = input[iterator]();\n      executeSchedule(subscriber, scheduler, function () {\n        var _a;\n        var value;\n        var done;\n        try {\n          _a = iterator$1.next(), value = _a.value, done = _a.done;\n        } catch (err) {\n          subscriber.error(err);\n          return;\n        }\n        if (done) {\n          subscriber.complete();\n        } else {\n          subscriber.next(value);\n        }\n      }, 0, true);\n    });\n    return function () {\n      return isFunction(iterator$1 === null || iterator$1 === void 0 ? void 0 : iterator$1.return) && iterator$1.return();\n    };\n  });\n}\nfunction scheduleAsyncIterable(input, scheduler) {\n  if (!input) {\n    throw new Error(\"Iterable cannot be null\");\n  }\n  return new Observable(function (subscriber) {\n    executeSchedule(subscriber, scheduler, function () {\n      var iterator2 = input[Symbol.asyncIterator]();\n      executeSchedule(subscriber, scheduler, function () {\n        iterator2.next().then(function (result) {\n          if (result.done) {\n            subscriber.complete();\n          } else {\n            subscriber.next(result.value);\n          }\n        });\n      }, 0, true);\n    });\n  });\n}\nfunction scheduleReadableStreamLike(input, scheduler) {\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\nfunction scheduled(input, scheduler) {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    }\n    if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }\n    if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    }\n    if (isAsyncIterable(input)) {\n      return scheduleAsyncIterable(input, scheduler);\n    }\n    if (isIterable(input)) {\n      return scheduleIterable(input, scheduler);\n    }\n    if (isReadableStreamLike(input)) {\n      return scheduleReadableStreamLike(input, scheduler);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\nfunction from(input, scheduler) {\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\nfunction of() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var scheduler = popScheduler(args);\n  return from(args, scheduler);\n}\nfunction throwError(errorOrErrorFactory, scheduler) {\n  var errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : function () {\n    return errorOrErrorFactory;\n  };\n  var init = function init(subscriber) {\n    return subscriber.error(errorFactory());\n  };\n  return new Observable(scheduler ? function (subscriber) {\n    return scheduler.schedule(init, 0, subscriber);\n  } : init);\n}\nvar EmptyError = createErrorClass(function (_super) {\n  return function EmptyErrorImpl() {\n    _super(this);\n    this.name = \"EmptyError\";\n    this.message = \"no elements in sequence\";\n  };\n});\nfunction firstValueFrom(source, config2) {\n  var hasConfig = typeof config2 === \"object\";\n  return new Promise(function (resolve, reject) {\n    var subscriber = new SafeSubscriber({\n      next: function next(value) {\n        resolve(value);\n        subscriber.unsubscribe();\n      },\n      error: reject,\n      complete: function complete() {\n        if (hasConfig) {\n          resolve(config2.defaultValue);\n        } else {\n          reject(new EmptyError());\n        }\n      }\n    });\n    source.subscribe(subscriber);\n  });\n}\nfunction isValidDate(value) {\n  return value instanceof Date && !isNaN(value);\n}\nvar TimeoutError = createErrorClass(function (_super) {\n  return function TimeoutErrorImpl(info) {\n    if (info === void 0) {\n      info = null;\n    }\n    _super(this);\n    this.message = \"Timeout has occurred\";\n    this.name = \"TimeoutError\";\n    this.info = info;\n  };\n});\nfunction timeout(config2, schedulerArg) {\n  var _a = isValidDate(config2) ? {\n      first: config2\n    } : typeof config2 === \"number\" ? {\n      each: config2\n    } : config2,\n    first2 = _a.first,\n    each = _a.each,\n    _b = _a.with,\n    _with = _b === void 0 ? timeoutErrorFactory : _b,\n    _c = _a.scheduler,\n    scheduler = _c === void 0 ? schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler : _c,\n    _d = _a.meta,\n    meta = _d === void 0 ? null : _d;\n  if (first2 == null && each == null) {\n    throw new TypeError(\"No timeout provided.\");\n  }\n  return operate(function (source, subscriber) {\n    var originalSourceSubscription;\n    var timerSubscription;\n    var lastValue = null;\n    var seen = 0;\n    var startTimer = function startTimer(delay) {\n      timerSubscription = executeSchedule(subscriber, scheduler, function () {\n        try {\n          originalSourceSubscription.unsubscribe();\n          innerFrom(_with({\n            meta: meta,\n            lastValue: lastValue,\n            seen: seen\n          })).subscribe(subscriber);\n        } catch (err) {\n          subscriber.error(err);\n        }\n      }, delay);\n    };\n    originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      seen++;\n      subscriber.next(lastValue = value);\n      each > 0 && startTimer(each);\n    }, void 0, void 0, function () {\n      if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n        timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      }\n      lastValue = null;\n    }));\n    !seen && startTimer(first2 != null ? typeof first2 === \"number\" ? first2 : +first2 - scheduler.now() : each);\n  });\n}\nfunction timeoutErrorFactory(info) {\n  throw new TimeoutError(info);\n}\nfunction map(project, thisArg) {\n  return operate(function (source, subscriber) {\n    var index = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      subscriber.next(project.call(thisArg, value, index++));\n    }));\n  });\n}\nfunction filter(predicate, thisArg) {\n  return operate(function (source, subscriber) {\n    var index = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      return predicate.call(thisArg, value, index++) && subscriber.next(value);\n    }));\n  });\n}\nfunction defaultIfEmpty(defaultValue) {\n  return operate(function (source, subscriber) {\n    var hasValue = false;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      hasValue = true;\n      subscriber.next(value);\n    }, function () {\n      if (!hasValue) {\n        subscriber.next(defaultValue);\n      }\n      subscriber.complete();\n    }));\n  });\n}\nfunction take(count) {\n  return count <= 0 ? function () {\n    return EMPTY;\n  } : operate(function (source, subscriber) {\n    var seen = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      if (++seen <= count) {\n        subscriber.next(value);\n        if (count <= seen) {\n          subscriber.complete();\n        }\n      }\n    }));\n  });\n}\nfunction throwIfEmpty(errorFactory) {\n  if (errorFactory === void 0) {\n    errorFactory = defaultErrorFactory;\n  }\n  return operate(function (source, subscriber) {\n    var hasValue = false;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      hasValue = true;\n      subscriber.next(value);\n    }, function () {\n      return hasValue ? subscriber.complete() : subscriber.error(errorFactory());\n    }));\n  });\n}\nfunction defaultErrorFactory() {\n  return new EmptyError();\n}\nfunction first(predicate, defaultValue) {\n  var hasDefaultValue = arguments.length >= 2;\n  return function (source) {\n    return source.pipe(predicate ? filter(function (v, i) {\n      return predicate(v, i, source);\n    }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () {\n      return new EmptyError();\n    }));\n  };\n}\nfunction share(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var _a = options.connector,\n    connector = _a === void 0 ? function () {\n      return new Subject();\n    } : _a,\n    _b = options.resetOnError,\n    resetOnError = _b === void 0 ? true : _b,\n    _c = options.resetOnComplete,\n    resetOnComplete = _c === void 0 ? true : _c,\n    _d = options.resetOnRefCountZero,\n    resetOnRefCountZero = _d === void 0 ? true : _d;\n  return function (wrapperSource) {\n    var connection = null;\n    var resetConnection = null;\n    var subject = null;\n    var refCount = 0;\n    var hasCompleted = false;\n    var hasErrored = false;\n    var cancelReset = function cancelReset() {\n      resetConnection === null || resetConnection === void 0 ? void 0 : resetConnection.unsubscribe();\n      resetConnection = null;\n    };\n    var reset = function reset() {\n      cancelReset();\n      connection = subject = null;\n      hasCompleted = hasErrored = false;\n    };\n    var resetAndUnsubscribe = function resetAndUnsubscribe() {\n      var conn = connection;\n      reset();\n      conn === null || conn === void 0 ? void 0 : conn.unsubscribe();\n    };\n    return operate(function (source, subscriber) {\n      refCount++;\n      if (!hasErrored && !hasCompleted) {\n        cancelReset();\n      }\n      var dest = subject = subject !== null && subject !== void 0 ? subject : connector();\n      subscriber.add(function () {\n        refCount--;\n        if (refCount === 0 && !hasErrored && !hasCompleted) {\n          resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);\n        }\n      });\n      dest.subscribe(subscriber);\n      if (!connection) {\n        connection = new SafeSubscriber({\n          next: function next(value) {\n            return dest.next(value);\n          },\n          error: function error(err) {\n            hasErrored = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnError, err);\n            dest.error(err);\n          },\n          complete: function complete() {\n            hasCompleted = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnComplete);\n            dest.complete();\n          }\n        });\n        from(source).subscribe(connection);\n      }\n    })(wrapperSource);\n  };\n}\nfunction handleReset(reset, on) {\n  var args = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n  if (on === true) {\n    reset();\n    return null;\n  }\n  if (on === false) {\n    return null;\n  }\n  return on.apply(void 0, __spreadArray([], __read(args))).pipe(take(1)).subscribe(function () {\n    return reset();\n  });\n}\nfunction switchMap(project, resultSelector) {\n  return operate(function (source, subscriber) {\n    var innerSubscriber = null;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function checkComplete() {\n      return isComplete && !innerSubscriber && subscriber.complete();\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n      var innerIndex = 0;\n      var outerIndex = index++;\n      innerFrom(project(value, outerIndex)).subscribe(innerSubscriber = createOperatorSubscriber(subscriber, function (innerValue) {\n        return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue);\n      }, function () {\n        innerSubscriber = null;\n        checkComplete();\n      }));\n    }, function () {\n      isComplete = true;\n      checkComplete();\n    }));\n  });\n}\nfunction takeUntil(notifier) {\n  return operate(function (source, subscriber) {\n    innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber, function () {\n      return subscriber.complete();\n    }, noop));\n    !subscriber.closed && source.subscribe(subscriber);\n  });\n}\nfunction makeId() {\n  var result = \"\";\n  var characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  var charactersLength = characters.length;\n  for (var i = 0; i < 32; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nvar tableSymbol = Symbol(\"table\");\nvar table = function table(name, dependsOnTables) {\n  var _ref2, _mutatorMap;\n  return _ref2 = {\n    name: name,\n    dependsOnTables: dependsOnTables || [],\n    get allDependingTables() {\n      var tableDefs = [];\n      this.dependsOnTables.forEach(function (def) {\n        tableDefs.push.apply(tableDefs, _toConsumableArray(def.allDependingTables));\n      });\n      return tableDefs;\n    }\n  }, _mutatorMap = {}, _mutatorMap[tableSymbol] = _mutatorMap[tableSymbol] || {}, _mutatorMap[tableSymbol].get = function () {\n    return this;\n  }, _defineProperty(_ref2, \"__discriminator\", \"ITableDef\"), _defineEnumerableProperties(_ref2, _mutatorMap), _ref2;\n};\nfunction isTable(x) {\n  if (x === null) return false;\n  if (typeof x !== \"object\") return false;\n  return Boolean(x[tableSymbol]);\n}\nvar insertRegex = /insert\\s+(or\\s+\\w+\\s+)?into\\s+/gim;\nvar deleteRegex = /delete\\s+from\\s+/gim;\nvar updateRegex = /update\\s+(or\\s+\\w+\\s+)?/gim;\nvar strip = function strip(str) {\n  return str.replace(/\"/g, \"\").split(\".\").map(function (v) {\n    return '\"' + v + '\"';\n  }).join(\".\");\n};\nfunction isSql(x) {\n  if (x === null) return false;\n  if (typeof x !== \"object\") return false;\n  return \"toSql\" in x;\n}\nfunction internalSql(_rawStrings, _rawValues) {\n  if (_rawStrings.length - 1 !== _rawValues.length) {\n    if (_rawStrings.length === 0) {\n      throw new TypeError(\"Expected at least 1 string\");\n    }\n    throw new TypeError(\"Expected \".concat(_rawStrings.length, \" strings to have \").concat(_rawStrings.length - 1, \" values\"));\n  }\n  var valuesLength = _rawValues.reduce(function (len, value) {\n    return len + (isSql(value) ? value.toSql()._values.length : isTable(value) ? 0 : 1);\n  }, 0);\n  var tablesLength = _rawValues.reduce(function (len, value) {\n    return len + (isSql(value) ? value.toSql().tables.length : isTable(value) ? 1 : 0);\n  }, 0);\n  var values = new Array(valuesLength);\n  var strings = new Array(valuesLength + 1);\n  var tables = new Array(tablesLength);\n  strings[0] = _rawStrings[0];\n  var pos = 0,\n    tableI = 0;\n  _rawValues.forEach(function (val, i) {\n    var child = _rawValues[i];\n    var rawString = _rawStrings[i + 1];\n    if (isSql(child)) {\n      var sql2 = child.toSql();\n      strings[pos] += sql2._strings[0];\n      sql2._values.forEach(function (childVal, childI) {\n        values[pos++] = sql2._values[childI];\n        strings[pos] = sql2._strings[childI + 1];\n      });\n      sql2.tables.forEach(function (t, childTableI) {\n        tables[tableI++] = sql2.tables[childTableI++];\n      });\n      strings[pos] += rawString;\n    } else if (isTable(child)) {\n      strings[pos] += strip(child[tableSymbol].name) + rawString;\n      tables[tableI++] = child[tableSymbol];\n    } else {\n      values[pos++] = child;\n      strings[pos] = rawString;\n    }\n  });\n  return {\n    _values: values,\n    _strings: strings,\n    tables: tables,\n    get isModifyQuery() {\n      var query = this.preparedQuery.text;\n      return query.match(insertRegex) !== null || query.match(deleteRegex) !== null || query.match(updateRegex) !== null;\n    },\n    get isReadQuery() {\n      return !this.isModifyQuery;\n    },\n    get isEmpty() {\n      return this.preparedQuery.text.trim().length === 0;\n    },\n    get hash() {\n      if (!this._hash) {\n        this._hash = this._strings.join() + this._values.join();\n      }\n      return this._hash;\n    },\n    get raw() {\n      var _this2 = this;\n      return this._strings[0] + this._strings.slice(1).map(function (val, i) {\n        return (typeof _this2._values[i] === \"string\" ? \"'\" + _this2._values[i] + \"'\" : _this2._values[i]) + val;\n      }).join(\"\");\n    },\n    get preparedQuery() {\n      if (!this._cachedText) {\n        this._cachedText = (this._strings[0] + this._strings.slice(1).map(function (val, i) {\n          return \"?\".concat(val);\n        }).join(\"\")).trim();\n      }\n      return {\n        values: this._values,\n        text: this._cachedText\n      };\n    },\n    inspect: function inspect() {\n      return {\n        preparedQuery: this.preparedQuery,\n        tables: this.tables\n      };\n    },\n    toSql: function toSql() {\n      return this;\n    },\n    toString: function toString() {\n      var _this$preparedQuery = this.preparedQuery,\n        values2 = _this$preparedQuery.values,\n        text = _this$preparedQuery.text;\n      return \"\".concat(text, \" - [\").concat(values2.join(\", \"), \"]\");\n    }\n  };\n}\nfunction sql(rawStrings) {\n  for (var _len = arguments.length, rawValues = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rawValues[_key - 1] = arguments[_key];\n  }\n  return internalSql(rawStrings, rawValues);\n}\nsql.raw = function (value) {\n  return sql([value]);\n};\nsql.liter = function (str) {\n  return sql.raw(strip(str));\n};\nsql.table = table;\nsql.isTable = isTable;\nsql.isSql = isSql;\nsql.empty = sql.raw(\"\");\nsql.join = function (values) {\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \", \";\n  var prefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n  values = values.filter(function (v) {\n    return isSql(v) ? !v.toSql().isEmpty : true;\n  });\n  if (values.length === 0) {\n    throw new TypeError(\"Expected `join([])` to be called with an array of multiple elements, but got an empty array\");\n  }\n  return internalSql([prefix].concat(_toConsumableArray(Array(values.length - 1).fill(separator)), [suffix]), values);\n};\nvar buildRunQueriesCommand = function buildRunQueriesCommand(queries, opts) {\n  return {\n    commandId: makeId(),\n    type: \"runQueries\",\n    queries: queries,\n    logOpts: opts.log\n  };\n};\nvar runWorkerCommand = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(backendState, command) {\n    var messagesFromWorker$, messagesToWorker$, stop$, waitResponse;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            messagesFromWorker$ = backendState.messagesFromWorker$, messagesToWorker$ = backendState.messagesToWorker$, stop$ = backendState.stop$;\n            waitResponse = firstValueFrom(messagesFromWorker$.pipe(filter(function (ev) {\n              return ev.type === \"response\" && ev.data.commandId === command.commandId;\n            }), take(1), switchMap(function (ev) {\n              if (ev.type === \"response\" && ev.data.status === \"error\") {\n                throw new Error(ev.data.message);\n              } else {\n                return of(ev);\n              }\n            }), map(function (ev) {\n              if (ev.type === \"response\" && ev.data.status === \"success\") {\n                return ev.data.result;\n              } else {\n                throw new Error(\"Unknown data format\");\n              }\n            }), timeout({\n              each: backendState.queryTimeout,\n              with: function _with() {\n                return throwError(function () {\n                  return new Error(\"Failed to execute \".concat(JSON.stringify(command), \" - timeout\"));\n                });\n              }\n            }), takeUntil(stop$)));\n            messagesToWorker$.next({\n              type: \"command\",\n              data: command\n            });\n            _context.prev = 3;\n            _context.next = 6;\n            return waitResponse;\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](3);\n            if (!(_context.t0 instanceof EmptyError)) {\n              _context.next = 13;\n              break;\n            }\n            throw new Error(\"Failed to run command, usually it means DB is already stopped. Command:\\n\".concat(JSON.stringify(command, void 0, 2)));\n          case 13:\n            throw _context.t0;\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 9]]);\n  }));\n  return function runWorkerCommand(_x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar encodedJs = \"KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IGZ0PXtFUEVSTTo2MyxFTk9FTlQ6NDR9O2NsYXNzIE90e2NvbnN0cnVjdG9yKGEsZil7dGhpcy5GUz1hLHRoaXMuYmFja2VuZD1mLHRoaXMubm9kZV9vcHM9e2dldGF0dHI6dT0+e2xldCBjPWEuaXNGaWxlKHUubW9kZSk/dS5jb250ZW50cy5nZXRhdHRyKCk6bnVsbCxwPXt9O3JldHVybiBwLmRldj0xLHAuaW5vPXUuaWQscC5tb2RlPWM/Yy5tb2RlOnUubW9kZSxwLm5saW5rPTEscC51aWQ9MCxwLmdpZD0wLHAucmRldj11LnJkZXYscC5zaXplPWM/Yy5zaXplOmEuaXNEaXIodS5tb2RlKT80MDk2OjAscC5hdGltZT1uZXcgRGF0ZSgwKSxwLm10aW1lPW5ldyBEYXRlKDApLHAuY3RpbWU9bmV3IERhdGUoMCkscC5ibGtzaXplPWM/Yy5ibG9ja1NpemU6NDA5NixwLmJsb2Nrcz1NYXRoLmNlaWwocC5zaXplL3AuYmxrc2l6ZSkscH0sc2V0YXR0cjoodSxjKT0+e3RoaXMuRlMuaXNGaWxlKHUubW9kZSk/dS5jb250ZW50cy5zZXRhdHRyKGMpOihjLm1vZGUhPW51bGwmJih1Lm1vZGU9Yy5tb2RlKSxjLnNpemUhPW51bGwmJih1LnNpemU9Yy5zaXplKSl9LGxvb2t1cDoodSxjKT0+e3Rocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IoZnQuRU5PRU5UKX0sbWtub2Q6KHUsYyxwLHkpPT57aWYoYy5lbmRzV2l0aCgiLmxvY2siKSl0aHJvdyBuZXcgRXJyb3IoIkxvY2tpbmcgdmlhIGxvY2tmaWxlcyBpcyBub3Qgc3VwcG9ydGVkIik7cmV0dXJuIHRoaXMuY3JlYXRlTm9kZSh1LGMscCx5KX0scmVuYW1lOih1LGMscCk9Pnt0aHJvdyBuZXcgRXJyb3IoInJlbmFtZSBub3QgaW1wbGVtZW50ZWQiKX0sdW5saW5rOih1LGMpPT57dGhpcy5GUy5sb29rdXBOb2RlKHUsYykuY29udGVudHMuZGVsZXRlKGMpfSxyZWFkZGlyOnU9Pnt0aHJvdyBuZXcgRXJyb3IoInJlYWRkaXIgbm90IGltcGxlbWVudGVkIil9LHN5bWxpbms6KHUsYyxwKT0+e3Rocm93IG5ldyBFcnJvcigic3ltbGluayBub3QgaW1wbGVtZW50ZWQiKX0scmVhZGxpbms6dT0+e3Rocm93IG5ldyBFcnJvcigic3ltbGluayBub3QgaW1wbGVtZW50ZWQiKX19LHRoaXMuc3RyZWFtX29wcz17b3Blbjp1PT57dGhpcy5GUy5pc0ZpbGUodS5ub2RlLm1vZGUpJiZ1Lm5vZGUuY29udGVudHMub3BlbigpfSxjbG9zZTp1PT57dGhpcy5GUy5pc0ZpbGUodS5ub2RlLm1vZGUpJiZ1Lm5vZGUuY29udGVudHMuY2xvc2UoKX0scmVhZDoodSxjLHAseSxrKT0+dS5ub2RlLmNvbnRlbnRzLnJlYWQoYyxwLHksayksd3JpdGU6KHUsYyxwLHksayk9PnUubm9kZS5jb250ZW50cy53cml0ZShjLHAseSxrKSxsbHNlZWs6KHUsYyxwKT0+e3ZhciB5PWM7aWYocD09PTE/eSs9dS5wb3NpdGlvbjpwPT09MiYmYS5pc0ZpbGUodS5ub2RlLm1vZGUpJiYoeSs9dS5ub2RlLmNvbnRlbnRzLmdldGF0dHIoKS5zaXplKSx5PDApdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcigyOCk7cmV0dXJuIHl9LGFsbG9jYXRlOih1LGMscCk9Pnt1Lm5vZGUuY29udGVudHMuc2V0YXR0cih7c2l6ZTpjK3B9KX0sbW1hcDoodSxjLHAseSxrLHMpPT57dGhyb3cgbmV3IEVycm9yKCJtbWFwIG5vdCBpbXBsZW1lbnRlZCIpfSxtc3luYzoodSxjLHAseSxrKT0+e3Rocm93IG5ldyBFcnJvcigibXN5bmMgbm90IGltcGxlbWVudGVkIil9LGZzeW5jOih1LGMscCx5LGspPT57dS5ub2RlLmNvbnRlbnRzLmZzeW5jKCl9fX1tb3VudCgpe3JldHVybiB0aGlzLmNyZWF0ZU5vZGUobnVsbCwiLyIsMTY4OTUsMCl9bG9jayhhLGYpe2xldHtub2RlOnV9PXRoaXMuRlMubG9va3VwUGF0aChhKTtyZXR1cm4gdS5jb250ZW50cy5sb2NrKGYpfXVubG9jayhhLGYpe2xldHtub2RlOnV9PXRoaXMuRlMubG9va3VwUGF0aChhKTtyZXR1cm4gdS5jb250ZW50cy51bmxvY2soZil9Y3JlYXRlTm9kZShhLGYsdSxjKXtpZighKHRoaXMuRlMuaXNEaXIodSl8fHRoaXMuRlMuaXNGaWxlKHUpKSl0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKGZ0LkVQRVJNKTt2YXIgcD10aGlzLkZTLmNyZWF0ZU5vZGUoYSxmLHUsYyk7cmV0dXJuIHRoaXMuRlMuaXNEaXIocC5tb2RlKT8ocC5ub2RlX29wcz17bWtub2Q6dGhpcy5ub2RlX29wcy5ta25vZCxsb29rdXA6dGhpcy5ub2RlX29wcy5sb29rdXAsdW5saW5rOnRoaXMubm9kZV9vcHMudW5saW5rLHNldGF0dHI6dGhpcy5ub2RlX29wcy5zZXRhdHRyfSxwLnN0cmVhbV9vcHM9e30scC5jb250ZW50cz17fSk6dGhpcy5GUy5pc0ZpbGUocC5tb2RlKSYmKHAubm9kZV9vcHM9dGhpcy5ub2RlX29wcyxwLnN0cmVhbV9vcHM9dGhpcy5zdHJlYW1fb3BzLHAuY29udGVudHM9dGhpcy5iYWNrZW5kLmNyZWF0ZUZpbGUoZikpLGEmJihhLmNvbnRlbnRzW2ZdPXAsYS50aW1lc3RhbXA9cC50aW1lc3RhbXApLHB9fWNvbnN0IGp0PU90O2xldCBfZT17Tk9ORTowLFNIQVJFRDoxLFJFU0VSVkVEOjIsUEVORElORzozLEVYQ0xVU0lWRTo0fTtmdW5jdGlvbiAkZShFKXtsZXQgYT1FWzE2XSxmPUVbMTddO3JldHVybihhPDw4KStmfWZ1bmN0aW9uIFZ0KEUsYSl7aWYoRSE9bnVsbCYmYSE9bnVsbCl7bGV0IGY9bmV3IFVpbnQ4QXJyYXkoRSksdT1uZXcgVWludDhBcnJheShhKTtmb3IobGV0IGM9MjQ7Yzw0MDtjKyspaWYoZltjXSE9PXVbY10pcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIEU9PW51bGwmJmE9PW51bGx9ZnVuY3Rpb24gQ3QoRSxhLGYpe2xldCB1PVtdO2ZvcihsZXQgYz1FO2M8PWE7Yys9Zil1LnB1c2goYyk7cmV0dXJuIHV9ZnVuY3Rpb24gY3QoRSxhLGYpe2xldCB1PWEtYSVFLGM9Zi0xLShmLTEpJUU7cmV0dXJuIEN0KHUsYyxFKX1mdW5jdGlvbiBIdChFLGEsZil7bGV0IHU9bmV3IEFycmF5QnVmZmVyKGYtYSksYz1uZXcgVWludDhBcnJheSh1KTtmb3IobGV0IHA9MDtwPEUubGVuZ3RoO3ArKyl7bGV0IHk9RVtwXTtpZih5LmRhdGEuY29uc3RydWN0b3IubmFtZSE9PSJBcnJheUJ1ZmZlciIpdGhyb3cgbmV3IEVycm9yKCJDaHVuayBkYXRhIGlzIG5vdCBhbiBBcnJheUJ1ZmZlciIpO2xldCBrPTAscz15LmRhdGEuYnl0ZUxlbmd0aDtpZihhPnkucG9zJiYoaz1hLXkucG9zKSxmPHkucG9zK3kuZGF0YS5ieXRlTGVuZ3RoJiYocz1mLXkucG9zKSxrPnkuZGF0YS5ieXRlTGVuZ3RofHxzPDApY29udGludWU7bGV0IE09cy1rO2Muc2V0KG5ldyBVaW50OEFycmF5KHkuZGF0YSxrLE0pLHkucG9zLWErayl9cmV0dXJuIHV9ZnVuY3Rpb24gaHQoRSxhLGYsdSl7bGV0IGM9Y3QoYSxmLHUpLHA9MDtyZXR1cm4gYy5tYXAoeT0+e2xldCBrPTAscz1hO2Y+eSYmZjx5K2EmJihrPWYteSksdT55JiZ1PHkrYSYmKHM9dS15KTtsZXQgTT1zLWssVz1uZXcgQXJyYXlCdWZmZXIoYSk7aWYoZj55K2F8fHU8PXkpcmV0dXJuIG51bGw7bGV0IEk9RS5ieXRlT2Zmc2V0K3AsUj1FLmJ1ZmZlci5ieXRlTGVuZ3RoLUk7aWYoUjw9MClyZXR1cm4gbnVsbDtsZXQgeD1NYXRoLm1pbihNLFIpO3JldHVybiBuZXcgVWludDhBcnJheShXKS5zZXQobmV3IFVpbnQ4QXJyYXkoRS5idWZmZXIsSSx4KSxrKSxwKz14LHtwb3M6eSxkYXRhOlcsb2Zmc2V0OmssbGVuZ3RoOnh9fSkuZmlsdGVyKEJvb2xlYW4pfWNsYXNzICR0e2NvbnN0cnVjdG9yKGEsZix1PW51bGwpe3RoaXMuZmlsZW5hbWU9YSx0aGlzLmJ1ZmZlcj1uZXcgTWFwLHRoaXMub3BzPWYsdGhpcy5tZXRhPXUsdGhpcy5fbWV0YURpcnR5PSExLHRoaXMud3JpdGVMb2NrPSExLHRoaXMub3BlbkhhbmRsZXM9MH1idWZmZXJDaHVua3MoYSl7Zm9yKGxldCBmPTA7ZjxhLmxlbmd0aDtmKyspe2xldCB1PWFbZl07dGhpcy5idWZmZXIuc2V0KHUucG9zLHUpfX1vcGVuKCl7aWYodGhpcy5vcGVuSGFuZGxlcysrLHRoaXMub3BlbkhhbmRsZXM9PT0xKXt0aGlzLm9wcy5vcGVuKCk7bGV0IGE9dGhpcy5vcHMucmVhZE1ldGEoKTt0aGlzLm1ldGE9PW51bGwmJihhPT1udWxsJiYoYT17c2l6ZTowfSksdGhpcy5tZXRhPWEpfXJldHVybiB0aGlzLm1ldGF9Y2xvc2UoKXt0aGlzLmZzeW5jKCksdGhpcy5vcGVuSGFuZGxlcz1NYXRoLm1heCh0aGlzLm9wZW5IYW5kbGVzLTEsMCksdGhpcy5vcGVuSGFuZGxlcz09PTAmJnRoaXMub3BzLmNsb3NlKCl9ZGVsZXRlKCl7dGhpcy5vcHMuZGVsZXRlKCl9bG9hZChhKXtsZXQgZj1hLnJlZHVjZSgoYyxwKT0+e2xldCB5PXRoaXMuYnVmZmVyLmdldChwKTtyZXR1cm4geT9jLmNodW5rcy5wdXNoKHkpOmMubWlzc2luZy5wdXNoKHApLGN9LHtjaHVua3M6W10sbWlzc2luZzpbXX0pLHU9W107cmV0dXJuIGYubWlzc2luZy5sZW5ndGg+MCYmKHU9dGhpcy5vcHMucmVhZEJsb2NrcyhmLm1pc3NpbmcsdGhpcy5tZXRhLmJsb2NrU2l6ZSkpLGYuY2h1bmtzLmNvbmNhdCh1KX1yZWFkKGEsZix1LGMpe2xldCBwPWEuYnVmZmVyO2lmKHU8PTB8fGM8MClyZXR1cm4gMDtpZihjPj10aGlzLm1ldGEuc2l6ZSl7bGV0IHg9bmV3IFVpbnQ4QXJyYXkocCxmKTtmb3IobGV0IE89MDtPPHU7TysrKXhbT109MDtyZXR1cm4gdX1jPU1hdGgubWF4KGMsMCk7bGV0IHk9TWF0aC5taW4odSx0aGlzLm1ldGEuc2l6ZS1jKSxrPWMscz1jK3ksTT1jdCh0aGlzLm1ldGEuYmxvY2tTaXplLGsscyksVz10aGlzLmxvYWQoTSksST1IdChXLGsscyk7aWYocC5ieXRlTGVuZ3RoLWY8SS5ieXRlTGVuZ3RoKXRocm93IG5ldyBFcnJvcigiQnVmZmVyIGdpdmVuIHRvIGByZWFkYCBpcyB0b28gc21hbGwiKTtsZXQgUj1uZXcgVWludDhBcnJheShwKTtSLnNldChuZXcgVWludDhBcnJheShJKSxmKTtmb3IobGV0IHg9eTt4PHU7eCsrKVJbZit4XT0wO3JldHVybiB1fXdyaXRlKGEsZix1LGMpe2lmKHRoaXMubWV0YS5ibG9ja1NpemU9PW51bGwpe2xldCBJPSRlKG5ldyBVaW50OEFycmF5KGEuYnVmZmVyLGEuYnl0ZU9mZnNldCtmKSk7aWYoIVs1MTIsMTAyNCwyMDQ4LDQwOTYsODE5MiwxNjM4NCwzMjc2OCw2NTUzNl0uaW5jbHVkZXMoSSkpdGhyb3cgbmV3IEVycm9yKCJGaWxlIGhhcyBpbnZhbGlkIHBhZ2Ugc2l6ZS4gKHRoZSBmaXJzdCBibG9jayBvZiBhIG5ldyBmaWxlIG11c3QgYmUgd3JpdHRlbiBmaXJzdCkiKTt0aGlzLnNldGF0dHIoe2Jsb2NrU2l6ZTpJfSl9bGV0IHA9YS5idWZmZXI7aWYodTw9MHx8YzwwfHxwLmJ5dGVMZW5ndGg9PT0wKXJldHVybiAwO3U9TWF0aC5taW4odSxwLmJ5dGVMZW5ndGgtZik7bGV0IHk9aHQobmV3IFVpbnQ4QXJyYXkocCxmLHUpLHRoaXMubWV0YS5ibG9ja1NpemUsYyxjK3UpLHtwYXJ0aWFsV3JpdGVzOmssZnVsbFdyaXRlczpzfT15LnJlZHVjZSgoSSxSKT0+KFIubGVuZ3RoIT09dGhpcy5tZXRhLmJsb2NrU2l6ZT9JLnBhcnRpYWxXcml0ZXMucHVzaChSKTpJLmZ1bGxXcml0ZXMucHVzaCh7cG9zOlIucG9zLGRhdGE6Ui5kYXRhfSksSSkse2Z1bGxXcml0ZXM6W10scGFydGlhbFdyaXRlczpbXX0pLE09W107ay5sZW5ndGg+MCYmKE09dGhpcy5sb2FkKGsubWFwKEk9PkkucG9zKSkpO2xldCBXPXMuY29uY2F0KE0ubWFwKEk9PntsZXQgUj1rLmZpbmQoeD0+eC5wb3M9PT1JLnBvcyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KEkuZGF0YSkuc2V0KG5ldyBVaW50OEFycmF5KFIuZGF0YSxSLm9mZnNldCxSLmxlbmd0aCksUi5vZmZzZXQsUi5sZW5ndGgpLEl9KSk7cmV0dXJuIHRoaXMuYnVmZmVyQ2h1bmtzKFcpLGMrdT50aGlzLm1ldGEuc2l6ZSYmdGhpcy5zZXRhdHRyKHtzaXplOmMrdX0pLHV9YXN5bmMgcmVhZElmRmFsbGJhY2soKXtpZih0aGlzLm9wcy5yZWFkSWZGYWxsYmFjayl7bGV0IGE9YXdhaXQgdGhpcy5vcHMucmVhZElmRmFsbGJhY2soKTt0aGlzLm1ldGE9YXx8e3NpemU6MH19fWxvY2soYSl7cmV0dXJuIHRoaXMuX3JlY29yZGluZ0xvY2t8fCh0aGlzLl9yZWNvcmRpbmdMb2NrPSEwKSx0aGlzLm9wcy5sb2NrKGEpPyhhPj1fZS5SRVNFUlZFRCYmKHRoaXMud3JpdGVMb2NrPSEwKSwhMCk6ITF9dW5sb2NrKGEpe3JldHVybiBhPT09MCYmKHRoaXMuX3JlY29yZGluZ0xvY2s9ITEpLHRoaXMud3JpdGVMb2NrJiYodGhpcy5mc3luYygpLHRoaXMud3JpdGVMb2NrPSExKSx0aGlzLm9wcy51bmxvY2soYSl9ZnN5bmMoKXtpZih0aGlzLmJ1ZmZlci5zaXplPjApe2xldCBhPXRoaXMuYnVmZmVyLmdldCgwKTtpZihhKXtsZXQgZj0kZShuZXcgVWludDhBcnJheShhLmRhdGEpKTtpZihmIT09dGhpcy5tZXRhLmJsb2NrU2l6ZSl7bGV0IHU9dGhpcy5idWZmZXI7dGhpcy5idWZmZXI9bmV3IE1hcDtsZXQgYz1bLi4udS52YWx1ZXMoKV0scD1jLmxlbmd0aCp0aGlzLm1ldGEuYmxvY2tTaXplLHk9bmV3IEFycmF5QnVmZmVyKHApLGs9bmV3IFVpbnQ4QXJyYXkoeSk7Zm9yKGxldCBzIG9mIGMpay5zZXQobmV3IFVpbnQ4QXJyYXkocy5kYXRhKSxzLnBvcyk7dGhpcy5idWZmZXJDaHVua3MoaHQoayxmLDAscCkpLHRoaXMuc2V0YXR0cih7YmxvY2tTaXplOmZ9KX19dGhpcy5vcHMud3JpdGVCbG9ja3MoWy4uLnRoaXMuYnVmZmVyLnZhbHVlcygpXSx0aGlzLm1ldGEuYmxvY2tTaXplKX10aGlzLl9tZXRhRGlydHkmJih0aGlzLm9wcy53cml0ZU1ldGEoe3NpemU6dGhpcy5tZXRhLnNpemV9KSx0aGlzLl9tZXRhRGlydHk9ITEpLHRoaXMuYnVmZmVyPW5ldyBNYXB9c2V0YXR0cihhKXt0aGlzLm1ldGE9PW51bGwmJih0aGlzLm1ldGE9e30pLGEubW9kZSE9PXZvaWQgMCYmKHRoaXMubWV0YS5tb2RlPWEubW9kZSksYS5ibG9ja1NpemUhPT12b2lkIDAmJih0aGlzLm1ldGEuYmxvY2tTaXplPWEuYmxvY2tTaXplKSxhLnNpemUhPT12b2lkIDAmJih0aGlzLm1ldGEuc2l6ZT1hLnNpemUsdGhpcy5fbWV0YURpcnR5PSEwKX1nZXRhdHRyKCl7cmV0dXJuIHRoaXMubWV0YX19bGV0IGR0PTM3MzU5Mjg1NTksUT0wLHVlPTE7Y2xhc3MgSnR7Y29uc3RydWN0b3IoYSx7aW5pdGlhbE9mZnNldDpmPTQsdXNlQXRvbWljczp1PSEwLHN0cmVhbTpjPSEwLGRlYnVnOnAsbmFtZTp5fT17fSl7dGhpcy5idWZmZXI9YSx0aGlzLmF0b21pY1ZpZXc9bmV3IEludDMyQXJyYXkoYSksdGhpcy5vZmZzZXQ9Zix0aGlzLnVzZUF0b21pY3M9dSx0aGlzLnN0cmVhbT1jLHRoaXMuZGVidWc9cCx0aGlzLm5hbWU9eX1sb2coLi4uYSl7dGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coYFtyZWFkZXI6ICR7dGhpcy5uYW1lfV1gLC4uLmEpfXdhaXRXcml0ZShhLGY9bnVsbCl7aWYodGhpcy51c2VBdG9taWNzKXtmb3IodGhpcy5sb2coYHdhaXRpbmcgZm9yICR7YX1gKTtBdG9taWNzLmxvYWQodGhpcy5hdG9taWNWaWV3LDApPT09UTspe2lmKGYhPW51bGwmJkF0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCxRLGYpPT09InRpbWVkLW91dCIpdGhyb3cgbmV3IEVycm9yKCJ0aW1lb3V0Iik7QXRvbWljcy53YWl0KHRoaXMuYXRvbWljVmlldywwLFEsNTAwKX10aGlzLmxvZyhgcmVzdW1lZCBmb3IgJHthfWApfWVsc2UgaWYodGhpcy5hdG9taWNWaWV3WzBdIT09dWUpdGhyb3cgbmV3IEVycm9yKCJgd2FpdFdyaXRlYCBleHBlY3RlZCBhcnJheSB0byBiZSByZWFkYWJsZSIpfWZsaXAoKXtpZih0aGlzLmxvZygiZmxpcCIpLHRoaXMudXNlQXRvbWljcyl7aWYoQXRvbWljcy5jb21wYXJlRXhjaGFuZ2UodGhpcy5hdG9taWNWaWV3LDAsdWUsUSkhPT11ZSl0aHJvdyBuZXcgRXJyb3IoIlJlYWQgZGF0YSBvdXQgb2Ygc3luYyEgVGhpcyBpcyBkaXNhc3Ryb3VzIik7QXRvbWljcy5ub3RpZnkodGhpcy5hdG9taWNWaWV3LDApfWVsc2UgdGhpcy5hdG9taWNWaWV3WzBdPVE7dGhpcy5vZmZzZXQ9NH1kb25lKCl7dGhpcy53YWl0V3JpdGUoImRvbmUiKTtsZXQgZj1uZXcgRGF0YVZpZXcodGhpcy5idWZmZXIsdGhpcy5vZmZzZXQpLmdldFVpbnQzMigwKT09PWR0O3JldHVybiBmJiYodGhpcy5sb2coImRvbmUiKSx0aGlzLmZsaXAoKSksZn1wZWVrKGEpe3RoaXMucGVla09mZnNldD10aGlzLm9mZnNldDtsZXQgZj1hKCk7cmV0dXJuIHRoaXMub2Zmc2V0PXRoaXMucGVla09mZnNldCx0aGlzLnBlZWtPZmZzZXQ9bnVsbCxmfXN0cmluZyhhKXt0aGlzLndhaXRXcml0ZSgic3RyaW5nIixhKTtsZXQgZj10aGlzLl9pbnQzMigpLHU9Zi8yLGM9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0LGYpLHA9W107Zm9yKGxldCBrPTA7azx1O2srKylwLnB1c2goYy5nZXRVaW50MTYoayoyKSk7bGV0IHk9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHApO3JldHVybiB0aGlzLmxvZygic3RyaW5nIix5KSx0aGlzLm9mZnNldCs9Zix0aGlzLnBlZWtPZmZzZXQ9PW51bGwmJnRoaXMuZmxpcCgpLHl9X2ludDMyKCl7bGV0IGE9NCx1PW5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCkuZ2V0SW50MzIoKTtyZXR1cm4gdGhpcy5sb2coIl9pbnQzMiIsdSksdGhpcy5vZmZzZXQrPWEsdX1pbnQzMigpe3RoaXMud2FpdFdyaXRlKCJpbnQzMiIpO2xldCBhPXRoaXMuX2ludDMyKCk7cmV0dXJuIHRoaXMubG9nKCJpbnQzMiIsYSksdGhpcy5wZWVrT2Zmc2V0PT1udWxsJiZ0aGlzLmZsaXAoKSxhfWJ5dGVzKCl7dGhpcy53YWl0V3JpdGUoImJ5dGVzIik7bGV0IGE9dGhpcy5faW50MzIoKSxmPW5ldyBBcnJheUJ1ZmZlcihhKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZikuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0LGEpKSx0aGlzLmxvZygiYnl0ZXMiLGYpLHRoaXMub2Zmc2V0Kz1hLHRoaXMucGVla09mZnNldD09bnVsbCYmdGhpcy5mbGlwKCksZn19Y2xhc3MgS3R7Y29uc3RydWN0b3IoYSx7aW5pdGlhbE9mZnNldDpmPTQsdXNlQXRvbWljczp1PSEwLHN0cmVhbTpjPSEwLGRlYnVnOnAsbmFtZTp5fT17fSl7dGhpcy5idWZmZXI9YSx0aGlzLmF0b21pY1ZpZXc9bmV3IEludDMyQXJyYXkoYSksdGhpcy5vZmZzZXQ9Zix0aGlzLnVzZUF0b21pY3M9dSx0aGlzLnN0cmVhbT1jLHRoaXMuZGVidWc9cCx0aGlzLm5hbWU9eSx0aGlzLnVzZUF0b21pY3M/QXRvbWljcy5zdG9yZSh0aGlzLmF0b21pY1ZpZXcsMCxRKTp0aGlzLmF0b21pY1ZpZXdbMF09UX1sb2coLi4uYSl7dGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coYFt3cml0ZXI6ICR7dGhpcy5uYW1lfV1gLC4uLmEpfXdhaXRSZWFkKGEpe2lmKHRoaXMudXNlQXRvbWljcyl7aWYodGhpcy5sb2coYHdhaXRpbmcgZm9yICR7YX1gKSxBdG9taWNzLmNvbXBhcmVFeGNoYW5nZSh0aGlzLmF0b21pY1ZpZXcsMCxRLHVlKSE9PVEpdGhyb3cgbmV3IEVycm9yKCJXcm90ZSBzb21ldGhpbmcgaW50byB1bndyaXRhYmxlIGJ1ZmZlciEgVGhpcyBpcyBkaXNhc3Ryb3VzIik7Zm9yKEF0b21pY3Mubm90aWZ5KHRoaXMuYXRvbWljVmlldywwKTtBdG9taWNzLmxvYWQodGhpcy5hdG9taWNWaWV3LDApPT09dWU7KUF0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCx1ZSw1MDApO3RoaXMubG9nKGByZXN1bWVkIGZvciAke2F9YCl9ZWxzZSB0aGlzLmF0b21pY1ZpZXdbMF09dWU7dGhpcy5vZmZzZXQ9NH1maW5hbGl6ZSgpe3RoaXMubG9nKCJmaW5hbGl6aW5nIiksbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRVaW50MzIoMCxkdCksdGhpcy53YWl0UmVhZCgiZmluYWxpemUiKX1zdHJpbmcoYSl7dGhpcy5sb2coInN0cmluZyIsYSk7bGV0IGY9YS5sZW5ndGgqMjt0aGlzLl9pbnQzMihmKTtsZXQgdT1uZXcgRGF0YVZpZXcodGhpcy5idWZmZXIsdGhpcy5vZmZzZXQsZik7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspdS5zZXRVaW50MTYoYyoyLGEuY2hhckNvZGVBdChjKSk7dGhpcy5vZmZzZXQrPWYsdGhpcy53YWl0UmVhZCgic3RyaW5nIil9X2ludDMyKGEpe2xldCBmPTQ7bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRJbnQzMigwLGEpLHRoaXMub2Zmc2V0Kz1mfWludDMyKGEpe3RoaXMubG9nKCJpbnQzMiIsYSksdGhpcy5faW50MzIoYSksdGhpcy53YWl0UmVhZCgiaW50MzIiKX1ieXRlcyhhKXt0aGlzLmxvZygiYnl0ZXMiLGEpO2xldCBmPWEuYnl0ZUxlbmd0aDt0aGlzLl9pbnQzMihmKSxuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCkuc2V0KG5ldyBVaW50OEFycmF5KGEpKSx0aGlzLm9mZnNldCs9Zix0aGlzLndhaXRSZWFkKCJieXRlcyIpfX1mdW5jdGlvbiBwdChFLGEpe3JldHVybiBNYXRoLnJvdW5kKEUvYSl9ZnVuY3Rpb24gWHQoRSxhKXtzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJfX2Fic3VyZDpzcGF3bi1pZGItd29ya2VyIixhcmdCdWZmZXI6YS5idWZmZXIscmVzdWx0QnVmZmVyOkUuYnVmZmVyfSksc2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixmPT57c3dpdGNoKGYuZGF0YS50eXBlKXtjYXNlIl9fcGVyZi1kZWV0czpzdGFydC1wcm9maWxlIjphLnN0cmluZygicHJvZmlsZS1zdGFydCIpLGEuZmluYWxpemUoKSxFLmludDMyKCksRS5kb25lKCk7YnJlYWs7Y2FzZSJfX3BlcmYtZGVldHM6c3RvcC1wcm9maWxlIjphLnN0cmluZygicHJvZmlsZS1zdG9wIiksYS5maW5hbGl6ZSgpLEUuaW50MzIoKSxFLmRvbmUoKTticmVha319KX1jbGFzcyBRdHtjb25zdHJ1Y3RvcihhKXt0aGlzLmZpbGVuYW1lPWF9Z2V0U3RvcmVOYW1lKCl7cmV0dXJuIHRoaXMuZmlsZW5hbWUucmVwbGFjZSgvXC8vZywiLSIpfWludm9rZVdvcmtlcihhLGYpe2lmKHRoaXMucmVhZGVyPT1udWxsfHx0aGlzLndyaXRlcj09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCAke2F9IG9uICR7dGhpcy5maWxlbmFtZX0gYnV0IGZpbGUgbm90IG9wZW5gKTtsZXQgdT10aGlzLnJlYWRlcixjPXRoaXMud3JpdGVyO3N3aXRjaChhKXtjYXNlInJlYWRCbG9ja3MiOntsZXR7bmFtZTpwLHBvc2l0aW9uczp5LGJsb2NrU2l6ZTprfT1mLHM9W107Zm9yKGxldCBNIG9mIHkpe2Muc3RyaW5nKCJyZWFkQmxvY2siKSxjLnN0cmluZyhwKSxjLmludDMyKHB0KE0saykpLGMuZmluYWxpemUoKTtsZXQgVz11LmJ5dGVzKCk7dS5kb25lKCkscy5wdXNoKHtwb3M6TSxkYXRhOlcuYnl0ZUxlbmd0aD09PTA/bmV3IEFycmF5QnVmZmVyKGspOld9KX1yZXR1cm4gc31jYXNlIndyaXRlQmxvY2tzIjp7bGV0e25hbWU6cCx3cml0ZXM6eSxibG9ja1NpemU6a309ZjtjLnN0cmluZygid3JpdGVCbG9ja3MiKSxjLnN0cmluZyhwKTtmb3IobGV0IE0gb2YgeSljLmludDMyKHB0KE0ucG9zLGspKSxjLmJ5dGVzKE0uZGF0YSk7Yy5maW5hbGl6ZSgpO2xldCBzPXUuaW50MzIoKTtyZXR1cm4gdS5kb25lKCksc31jYXNlInJlYWRNZXRhIjp7Yy5zdHJpbmcoInJlYWRNZXRhIiksYy5zdHJpbmcoZi5uYW1lKSxjLmZpbmFsaXplKCk7bGV0IHA9dS5pbnQzMigpLHk9dS5pbnQzMigpO3JldHVybiB1LmRvbmUoKSxwPT09LTE/bnVsbDp7c2l6ZTpwLGJsb2NrU2l6ZTp5fX1jYXNlIndyaXRlTWV0YSI6e2xldHtuYW1lOnAsbWV0YTp5fT1mO2Muc3RyaW5nKCJ3cml0ZU1ldGEiKSxjLnN0cmluZyhwKSxjLmludDMyKHkuc2l6ZSksYy5maW5hbGl6ZSgpO2xldCBrPXUuaW50MzIoKTtyZXR1cm4gdS5kb25lKCksa31jYXNlImNsb3NlRmlsZSI6e2Muc3RyaW5nKCJjbG9zZUZpbGUiKSxjLnN0cmluZyhmLm5hbWUpLGMuZmluYWxpemUoKTtsZXQgcD11LmludDMyKCk7cmV0dXJuIHUuZG9uZSgpLHB9Y2FzZSJsb2NrRmlsZSI6e2Muc3RyaW5nKCJsb2NrRmlsZSIpLGMuc3RyaW5nKGYubmFtZSksYy5pbnQzMihmLmxvY2tUeXBlKSxjLmZpbmFsaXplKCk7bGV0IHA9dS5pbnQzMigpO3JldHVybiB1LmRvbmUoKSxwPT09MH1jYXNlInVubG9ja0ZpbGUiOntjLnN0cmluZygidW5sb2NrRmlsZSIpLGMuc3RyaW5nKGYubmFtZSksYy5pbnQzMihmLmxvY2tUeXBlKSxjLmZpbmFsaXplKCk7bGV0IHA9dS5pbnQzMigpO3JldHVybiB1LmRvbmUoKSxwPT09MH19fWxvY2soYSl7cmV0dXJuIHRoaXMuaW52b2tlV29ya2VyKCJsb2NrRmlsZSIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKSxsb2NrVHlwZTphfSl9dW5sb2NrKGEpe3JldHVybiB0aGlzLmludm9rZVdvcmtlcigidW5sb2NrRmlsZSIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKSxsb2NrVHlwZTphfSl9ZGVsZXRlKCl7KHRoaXMucmVhZGVyfHx0aGlzLndyaXRlcikmJnRoaXMuY2xvc2UoKTtsZXQgYT1nbG9iYWxUaGlzLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZSh0aGlzLmdldFN0b3JlTmFtZSgpKTthLm9uZXJyb3I9KCk9Pntjb25zb2xlLndhcm4oYERlbGV0aW5nICR7dGhpcy5maWxlbmFtZX0gZGF0YWJhc2UgZmFpbGVkYCl9LGEub25zdWNjZXNzPSgpPT57fX1vcGVuKCl7bGV0IGE9bmV3IFNoYXJlZEFycmF5QnVmZmVyKDM2ODY0KTt0aGlzLndyaXRlcj1uZXcgS3QoYSx7bmFtZToiYXJncyAoYmFja2VuZCkiLGRlYnVnOiExfSk7bGV0IGY9bmV3IFNoYXJlZEFycmF5QnVmZmVyKDQwOTYqOSk7dGhpcy5yZWFkZXI9bmV3IEp0KGYse25hbWU6InJlc3VsdHMiLGRlYnVnOiExfSksWHQodGhpcy5yZWFkZXIsdGhpcy53cml0ZXIpfWNsb3NlKCl7dGhpcy5pbnZva2VXb3JrZXIoImNsb3NlRmlsZSIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKX0pLHRoaXMucmVhZGVyPW51bGwsdGhpcy53cml0ZXI9bnVsbCx0aGlzLndvcmtlcj1udWxsfXJlYWRNZXRhKCl7cmV0dXJuIHRoaXMuaW52b2tlV29ya2VyKCJyZWFkTWV0YSIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKX0pfXdyaXRlTWV0YShhKXtyZXR1cm4gdGhpcy5pbnZva2VXb3JrZXIoIndyaXRlTWV0YSIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKSxtZXRhOmF9KX1yZWFkQmxvY2tzKGEsZil7cmV0dXJuIHRoaXMuc3RhdHMmJih0aGlzLnN0YXRzLnJlYWQrPWEubGVuZ3RoKSx0aGlzLmludm9rZVdvcmtlcigicmVhZEJsb2NrcyIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKSxwb3NpdGlvbnM6YSxibG9ja1NpemU6Zn0pfXdyaXRlQmxvY2tzKGEsZil7cmV0dXJuIHRoaXMuc3RhdHMmJih0aGlzLnN0YXRzLndyaXRlcys9YS5sZW5ndGgpLHRoaXMuaW52b2tlV29ya2VyKCJ3cml0ZUJsb2NrcyIse25hbWU6dGhpcy5nZXRTdG9yZU5hbWUoKSx3cml0ZXM6YSxibG9ja1NpemU6Zn0pfX1mdW5jdGlvbiBZdCgpe2lmKCEoIW5hdmlnYXRvci51c2VyQWdlbnREYXRhJiYvU2FmYXJpXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiEvQ2hyb20oZXxpdW0pXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHwhaW5kZXhlZERCLmRhdGFiYXNlcylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7bGV0IGE7cmV0dXJuIG5ldyBQcm9taXNlKGY9Pntjb25zdCB1PSgpPT5pbmRleGVkREIuZGF0YWJhc2VzKCkuZmluYWxseShmKTthPXNldEludGVydmFsKHUsMTAwKSx1KCl9KS5maW5hbGx5KCgpPT5jbGVhckludGVydmFsKGEpKX1mdW5jdGlvbiBtdChFLGEpe3JldHVybiBNYXRoLnJvdW5kKEUvYSl9YXN5bmMgZnVuY3Rpb24gWnQoRSl7cmV0dXJuIGF3YWl0IFl0KCksbmV3IFByb21pc2UoKGEsZik9PntsZXQgdT1nbG9iYWxUaGlzLmluZGV4ZWREQi5vcGVuKEUsMik7dS5vbnN1Y2Nlc3M9Yz0+e2xldCBwPWMudGFyZ2V0LnJlc3VsdDtwLm9udmVyc2lvbmNoYW5nZT0oKT0+e2NvbnNvbGUubG9nKCJjbG9zaW5nIGJlY2F1c2UgdmVyc2lvbiBjaGFuZ2VkIikscC5jbG9zZSgpfSxwLm9uY2xvc2U9KCk9Pnt9LGEocCl9LHUub251cGdyYWRlbmVlZGVkPWM9PntsZXQgcD1jLnRhcmdldC5yZXN1bHQ7cC5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCJkYXRhIil8fHAuY3JlYXRlT2JqZWN0U3RvcmUoImRhdGEiKX0sdS5vbmJsb2NrZWQ9Yz0+Y29uc29sZS5sb2coImJsb2NrZWQiLGMpLHUub25lcnJvcj11Lm9uYWJvcnQ9Yz0+ZihjLnRhcmdldC5lcnJvcil9KX1jbGFzcyBHdHtjb25zdHJ1Y3RvcihhLGYpe3RoaXMuZGJOYW1lPWEsdGhpcy5fb3BlbkRiUHJvbWlzZT1udWxsLHRoaXMuaGFzQWxlcnRlZEZhaWx1cmU9ITEsdGhpcy5vbkZhbGxiYWNrRmFpbHVyZT1mfWdldERiKCl7cmV0dXJuIHRoaXMuX29wZW5EYlByb21pc2U/dGhpcy5fb3BlbkRiUHJvbWlzZToodGhpcy5fb3BlbkRiUHJvbWlzZT1adCh0aGlzLmRiTmFtZSksdGhpcy5fb3BlbkRiUHJvbWlzZSl9Y2xvc2VEYigpe3RoaXMuX29wZW5EYlByb21pc2UmJih0aGlzLl9vcGVuRGJQcm9taXNlLnRoZW4oYT0+YS5jbG9zZSgpKSx0aGlzLl9vcGVuRGJQcm9taXNlPW51bGwpfWFzeW5jIHJlYWRBbGwoKXtsZXQgYT1hd2FpdCB0aGlzLmdldERiKHRoaXMuZGJOYW1lKSxmPW5ldyBNYXAsYz1hLnRyYW5zYWN0aW9uKFsiZGF0YSJdLCJyZWFkb25seSIpLm9iamVjdFN0b3JlKCJkYXRhIik7cmV0dXJuIG5ldyBQcm9taXNlKChwLHkpPT57bGV0IGs9Yy5vcGVuQ3Vyc29yKElEQktleVJhbmdlLmxvd2VyQm91bmQoLTEpKTtrLm9uZXJyb3I9eSxrLm9uc3VjY2Vzcz1zPT57bGV0IE09cy50YXJnZXQucmVzdWx0O00/KGYuc2V0KE0ua2V5LE0udmFsdWUpLE0uY29udGludWUoKSk6cChmKX19KX1hc3luYyB3cml0ZShhLGYsdSl7bGV0IHA9KGF3YWl0IHRoaXMuZ2V0RGIodGhpcy5kYk5hbWUpKS50cmFuc2FjdGlvbihbImRhdGEiXSwicmVhZHdyaXRlIikseT1wLm9iamVjdFN0b3JlKCJkYXRhIik7YXdhaXQgbmV3IFByb21pc2UoKGsscyk9PntsZXQgTT15LmdldCgwKTtNLm9uc3VjY2Vzcz1XPT57aWYodSYmIVZ0KE0ucmVzdWx0LGYpKXt0aGlzLm9uRmFsbGJhY2tGYWlsdXJlJiYhdGhpcy5oYXNBbGVydGVkRmFpbHVyZSYmKHRoaXMuaGFzQWxlcnRlZEZhaWx1cmU9ITAsdGhpcy5vbkZhbGxiYWNrRmFpbHVyZSgpKSxzKG5ldyBFcnJvcigiRmFsbGJhY2sgbW9kZSB1bmFibGUgdG8gd3JpdGUgZmlsZSBjaGFuZ2VzIikpO3JldHVybn1mb3IobGV0IEkgb2YgYSl5LnB1dChJLnZhbHVlLEkua2V5KTtwLm9uc3VjY2Vzcz0oKT0+aygpLHAub25lcnJvcj0oKT0+cygpfSxNLm9uZXJyb3I9c30pfX1jbGFzcyBlcntjb25zdHJ1Y3RvcihhLGYpe3RoaXMuZmlsZW5hbWU9YSx0aGlzLmRiTmFtZT10aGlzLmZpbGVuYW1lLnJlcGxhY2UoL1wvL2csIi0iKSx0aGlzLmNhY2hlZEZpcnN0QmxvY2s9bnVsbCx0aGlzLndyaXRlUXVldWU9bnVsbCx0aGlzLmJsb2Nrcz1uZXcgTWFwLHRoaXMubG9ja1R5cGU9MCx0aGlzLnRyYW5zZmVyQmxvY2tPd25lcnNoaXA9ITEsdGhpcy5wZXJzaXN0YW5jZT1uZXcgR3QodGhpcy5kYk5hbWUsZil9YXN5bmMgcmVhZElmRmFsbGJhY2soKXtyZXR1cm4gdGhpcy50cmFuc2ZlckJsb2NrT3duZXJzaGlwPSEwLHRoaXMuYmxvY2tzPWF3YWl0IHRoaXMucGVyc2lzdGFuY2UucmVhZEFsbCgpLHRoaXMucmVhZE1ldGEoKX1sb2NrKGEpe3JldHVybiB0aGlzLmNhY2hlZEZpcnN0QmxvY2s9dGhpcy5ibG9ja3MuZ2V0KDApLHRoaXMubG9ja1R5cGU9YSwhMH11bmxvY2soYSl7cmV0dXJuIHRoaXMubG9ja1R5cGU+X2UuU0hBUkVEJiZhPT09X2UuU0hBUkVEJiZ0aGlzLmZsdXNoKCksdGhpcy5sb2NrVHlwZT1hLCEwfWRlbGV0ZSgpe2xldCBhPWdsb2JhbFRoaXMuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHRoaXMuZGJOYW1lKTthLm9uZXJyb3I9KCk9Pntjb25zb2xlLndhcm4oYERlbGV0aW5nICR7dGhpcy5maWxlbmFtZX0gZGF0YWJhc2UgZmFpbGVkYCl9LGEub25zdWNjZXNzPSgpPT57fX1vcGVuKCl7dGhpcy53cml0ZVF1ZXVlPVtdLHRoaXMubG9ja1R5cGU9MH1jbG9zZSgpe3RoaXMuZmx1c2goKSx0aGlzLnRyYW5zZmVyQmxvY2tPd25lcnNoaXA/dGhpcy50cmFuc2ZlckJsb2NrT3duZXJzaGlwPSExOnRoaXMuYmxvY2tzPW5ldyBNYXAsdGhpcy5wZXJzaXN0YW5jZS5jbG9zZURiKCl9cmVhZE1ldGEoKXtsZXQgYT10aGlzLmJsb2Nrcy5nZXQoLTEpO2lmKGEpe2xldCBmPXRoaXMuYmxvY2tzLmdldCgwKTtyZXR1cm57c2l6ZTphLnNpemUsYmxvY2tTaXplOiRlKG5ldyBVaW50OEFycmF5KGYpKX19cmV0dXJuIG51bGx9d3JpdGVNZXRhKGEpe3RoaXMuYmxvY2tzLnNldCgtMSxhKSx0aGlzLnF1ZXVlV3JpdGUoLTEsYSl9cmVhZEJsb2NrcyhhLGYpe2xldCB1PVtdO2ZvcihsZXQgYyBvZiBhKXUucHVzaCh7cG9zOmMsZGF0YTp0aGlzLmJsb2Nrcy5nZXQobXQoYyxmKSl9KTtyZXR1cm4gdX13cml0ZUJsb2NrcyhhLGYpe2ZvcihsZXQgdSBvZiBhKXtsZXQgYz1tdCh1LnBvcyxmKTt0aGlzLmJsb2Nrcy5zZXQoYyx1LmRhdGEpLHRoaXMucXVldWVXcml0ZShjLHUuZGF0YSl9dGhpcy5sb2NrVHlwZTw9X2UuU0hBUkVEJiZ0aGlzLmZsdXNoKCl9cXVldWVXcml0ZShhLGYpe3RoaXMud3JpdGVRdWV1ZS5wdXNoKHtrZXk6YSx2YWx1ZTpmfSl9Zmx1c2goKXt0aGlzLndyaXRlUXVldWUubGVuZ3RoPjAmJih0aGlzLnBlcnNpc3RhbmNlLndyaXRlKHRoaXMud3JpdGVRdWV1ZSx0aGlzLmNhY2hlZEZpcnN0QmxvY2ssdGhpcy5sb2NrVHlwZT5fZS5TSEFSRUQpLHRoaXMud3JpdGVRdWV1ZT1bXSksdGhpcy5jYWNoZWRGaXJzdEJsb2NrPW51bGx9fWNsYXNzIHRye2NvbnN0cnVjdG9yKGEpe3RoaXMub25GYWxsYmFja0ZhaWx1cmU9YX1jcmVhdGVGaWxlKGEpe2xldCBmO3R5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciE9InVuZGVmaW5lZCI/Zj1uZXcgUXQoYSk6Zj1uZXcgZXIoYSx0aGlzLm9uRmFsbGJhY2tGYWlsdXJlKTtsZXQgdT1uZXcgJHQoYSxmKTtyZXR1cm57fS5QRVJGX0JVSUxEJiYodGhpcy5fZmlsZXM9PW51bGwmJih0aGlzLl9maWxlcz1uZXcgU2V0KSx0aGlzLl9maWxlcy5hZGQodSkpLHV9c3RhcnRQcm9maWxlKCl7Zm9yKGxldCBhIG9mIHRoaXMuX2ZpbGVzKWlmKGEub3BzLndyaXRlcil7bGV0IGY9YS5vcHMud3JpdGVyLHU9YS5vcHMucmVhZGVyO2Yuc3RyaW5nKCJwcm9maWxlLXN0YXJ0IiksZi5maW5hbGl6ZSgpLHUuaW50MzIoKSx1LmRvbmUoKX19c3RvcFByb2ZpbGUoKXtmb3IobGV0IGEgb2YgdGhpcy5fZmlsZXMpaWYoYS5vcHMud3JpdGVyKXtsZXQgZj1hLm9wcy53cml0ZXIsdT1hLm9wcy5yZWFkZXI7Zi5zdHJpbmcoInByb2ZpbGUtc3RvcCIpLGYuZmluYWxpemUoKSx1LmludDMyKCksdS5kb25lKCl9fX1mdW5jdGlvbiBycihFKXtpZihFLl9fZXNNb2R1bGUpcmV0dXJuIEU7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtyZXR1cm4gT2JqZWN0LmtleXMoRSkuZm9yRWFjaChmdW5jdGlvbihmKXt2YXIgdT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEUsZik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZix1LmdldD91OntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBFW2ZdfX0pfSksYX12YXIgd3Q9e2V4cG9ydHM6e319LG5yPXt9LGlyPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlZmF1bHQ6bnJ9KSxKZT1ycihpcik7KGZ1bmN0aW9uKEUsYSl7dmFyIGY9dm9pZCAwLHU9ZnVuY3Rpb24oYyl7cmV0dXJuIGZ8fChmPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHAseSl7dmFyIHM9dHlwZW9mIGMhPSJ1bmRlZmluZWQiP2M6e30saz1zLm9uQWJvcnQ7cy5vbkFib3J0PWZ1bmN0aW9uKGUpe3kobmV3IEVycm9yKGUpKSxrJiZrKGUpfSxzLnBvc3RSdW49cy5wb3N0UnVufHxbXSxzLnBvc3RSdW4ucHVzaChmdW5jdGlvbigpe3Aocyl9KSxFPXZvaWQgMDt2YXIgcztzfHwocz10eXBlb2YgcyE9InVuZGVmaW5lZCI/czp7fSkscy5vblJ1bnRpbWVJbml0aWFsaXplZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoaCxiKXt0aGlzLkxhPWgsdGhpcy5kYj1iLHRoaXMuS2E9MSx0aGlzLnFiPVtdfWZ1bmN0aW9uIHQoaCxiKXtpZih0aGlzLmRiPWIsYj1mZShoKSsxLHRoaXMuYWI9amUoYiksdGhpcy5hYj09PW51bGwpdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgZm9yIHRoZSBTUUwgc3RyaW5nIik7cmUoaCxLLHRoaXMuYWIsYiksdGhpcy5tYj10aGlzLmFiLHRoaXMuWWE9dGhpcy5HYj1udWxsfWZ1bmN0aW9uIHIoaCx7ZmlsZW5hbWU6Yj0hMX09e30pe2I9PT0hMT8odGhpcy5maWxlbmFtZT0iZGJmaWxlXyIrKDQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKT4+PjApLHRoaXMuTmM9ITAsaCE9bnVsbCYmbi50YigiLyIsdGhpcy5maWxlbmFtZSxoLCEwLCEwKSk6dGhpcy5maWxlbmFtZT1oLHRoaXMuaGFuZGxlRXJyb3IobCh0aGlzLmZpbGVuYW1lLGkpKSx0aGlzLmRiPUcoaSwiaTMyIiksV3IodGhpcy5kYiksdGhpcy5nYj17fSx0aGlzLlJhPXt9fXZhciBpPW9lKDQpLG89cy5jd3JhcCxsPW8oInNxbGl0ZTNfb3BlbiIsIm51bWJlciIsWyJzdHJpbmciLCJudW1iZXIiXSksZD1vKCJzcWxpdGUzX2Nsb3NlX3YyIiwibnVtYmVyIixbIm51bWJlciJdKSxtPW8oInNxbGl0ZTNfZXhlYyIsIm51bWJlciIsWyJudW1iZXIiLCJzdHJpbmciLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksZz1vKCJzcWxpdGUzX2NoYW5nZXMiLCJudW1iZXIiLFsibnVtYmVyIl0pLHc9bygic3FsaXRlM19wcmVwYXJlX3YyIiwibnVtYmVyIixbIm51bWJlciIsInN0cmluZyIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxfPW8oInNxbGl0ZTNfc3FsIiwic3RyaW5nIixbIm51bWJlciJdKSxEPW8oInNxbGl0ZTNfbm9ybWFsaXplZF9zcWwiLCJzdHJpbmciLFsibnVtYmVyIl0pLE49bygic3FsaXRlM19wcmVwYXJlX3YyIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxUPW8oInNxbGl0ZTNfYmluZF90ZXh0IiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxQPW8oInNxbGl0ZTNfYmluZF9ibG9iIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxzZT1vKCJzcWxpdGUzX2JpbmRfZG91YmxlIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxwZT1vKCJzcWxpdGUzX2JpbmRfaW50IiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSxhZT1vKCJzcWxpdGUzX2JpbmRfcGFyYW1ldGVyX2luZGV4IiwibnVtYmVyIixbIm51bWJlciIsInN0cmluZyJdKSxsdD1vKCJzcWxpdGUzX3N0ZXAiLCJudW1iZXIiLFsibnVtYmVyIl0pLFU9bygic3FsaXRlM19lcnJtc2ciLCJzdHJpbmciLFsibnVtYmVyIl0pLF9yPW8oInNxbGl0ZTNfY29sdW1uX2NvdW50IiwibnVtYmVyIixbIm51bWJlciJdKSxncj1vKCJzcWxpdGUzX2RhdGFfY291bnQiLCJudW1iZXIiLFsibnVtYmVyIl0pLEVyPW8oInNxbGl0ZTNfY29sdW1uX2RvdWJsZSIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdnI9bygic3FsaXRlM19jb2x1bW5fdGV4dCIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiXSksa3I9bygic3FsaXRlM19jb2x1bW5fYmxvYiIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksQXI9bygic3FsaXRlM19jb2x1bW5fYnl0ZXMiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHFyPW8oInNxbGl0ZTNfY29sdW1uX3R5cGUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLFNyPW8oInNxbGl0ZTNfY29sdW1uX25hbWUiLCJzdHJpbmciLFsibnVtYmVyIiwibnVtYmVyIl0pLERyPW8oInNxbGl0ZTNfcmVzZXQiLCJudW1iZXIiLFsibnVtYmVyIl0pLE1yPW8oInNxbGl0ZTNfY2xlYXJfYmluZGluZ3MiLCJudW1iZXIiLFsibnVtYmVyIl0pLElyPW8oInNxbGl0ZTNfZmluYWxpemUiLCJudW1iZXIiLFsibnVtYmVyIl0pLEZyPW8oInNxbGl0ZTNfY3JlYXRlX2Z1bmN0aW9uX3YyIiwibnVtYmVyIiwibnVtYmVyIHN0cmluZyBudW1iZXIgbnVtYmVyIG51bWJlciBudW1iZXIgbnVtYmVyIG51bWJlciBudW1iZXIiLnNwbGl0KCIgIikpLHpyPW8oInNxbGl0ZTNfdmFsdWVfdHlwZSIsIm51bWJlciIsWyJudW1iZXIiXSksUnI9bygic3FsaXRlM192YWx1ZV9ieXRlcyIsIm51bWJlciIsWyJudW1iZXIiXSksTnI9bygic3FsaXRlM192YWx1ZV90ZXh0Iiwic3RyaW5nIixbIm51bWJlciJdKSxQcj1vKCJzcWxpdGUzX3ZhbHVlX2Jsb2IiLCJudW1iZXIiLFsibnVtYmVyIl0pLExyPW8oInNxbGl0ZTNfdmFsdWVfZG91YmxlIiwibnVtYmVyIixbIm51bWJlciJdKSxCcj1vKCJzcWxpdGUzX3Jlc3VsdF9kb3VibGUiLCIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHh0PW8oInNxbGl0ZTNfcmVzdWx0X251bGwiLCIiLFsibnVtYmVyIl0pLFRyPW8oInNxbGl0ZTNfcmVzdWx0X3RleHQiLCIiLFsibnVtYmVyIiwic3RyaW5nIiwibnVtYmVyIiwibnVtYmVyIl0pLHhyPW8oInNxbGl0ZTNfcmVzdWx0X2Jsb2IiLCIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLFVyPW8oInNxbGl0ZTNfcmVzdWx0X2ludCIsIiIsWyJudW1iZXIiLCJudW1iZXIiXSksVXQ9bygic3FsaXRlM19yZXN1bHRfZXJyb3IiLCIiLFsibnVtYmVyIiwic3RyaW5nIiwibnVtYmVyIl0pLFdyPW8oIlJlZ2lzdGVyRXh0ZW5zaW9uRnVuY3Rpb25zIiwibnVtYmVyIixbIm51bWJlciJdKTtlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGgpe2lmKCF0aGlzLkxhKXRocm93IlN0YXRlbWVudCBjbG9zZWQiO3JldHVybiB0aGlzLnJlc2V0KCksQXJyYXkuaXNBcnJheShoKT90aGlzLm5jKGgpOmghPW51bGwmJnR5cGVvZiBoPT0ib2JqZWN0Ij90aGlzLm9jKGgpOiEwfSxlLnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKCl7aWYoIXRoaXMuTGEpdGhyb3ciU3RhdGVtZW50IGNsb3NlZCI7dGhpcy5LYT0xO3ZhciBoPWx0KHRoaXMuTGEpO3N3aXRjaChoKXtjYXNlIDEwMDpyZXR1cm4hMDtjYXNlIDEwMTpyZXR1cm4hMTtkZWZhdWx0OnRocm93IHRoaXMuZGIuaGFuZGxlRXJyb3IoaCl9fSxlLnByb3RvdHlwZS5IYz1mdW5jdGlvbihoKXtyZXR1cm4gaD09bnVsbCYmKGg9dGhpcy5LYSx0aGlzLkthKz0xKSxFcih0aGlzLkxhLGgpfSxlLnByb3RvdHlwZS5JYz1mdW5jdGlvbihoKXtyZXR1cm4gaD09bnVsbCYmKGg9dGhpcy5LYSx0aGlzLkthKz0xKSx2cih0aGlzLkxhLGgpfSxlLnByb3RvdHlwZS5nZXRCbG9iPWZ1bmN0aW9uKGgpe2g9PW51bGwmJihoPXRoaXMuS2EsdGhpcy5LYSs9MSk7dmFyIGI9QXIodGhpcy5MYSxoKTtoPWtyKHRoaXMuTGEsaCk7Zm9yKHZhciBBPW5ldyBVaW50OEFycmF5KGIpLFM9MDtTPGI7Uys9MSlBW1NdPUJbaCtTXTtyZXR1cm4gQX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGgpe2ghPW51bGwmJnRoaXMuYmluZChoKSYmdGhpcy5zdGVwKCksaD1bXTtmb3IodmFyIGI9Z3IodGhpcy5MYSksQT0wO0E8YjtBKz0xKXN3aXRjaChxcih0aGlzLkxhLEEpKXtjYXNlIDE6Y2FzZSAyOmgucHVzaCh0aGlzLkhjKEEpKTticmVhaztjYXNlIDM6aC5wdXNoKHRoaXMuSWMoQSkpO2JyZWFrO2Nhc2UgNDpoLnB1c2godGhpcy5nZXRCbG9iKEEpKTticmVhaztkZWZhdWx0OmgucHVzaChudWxsKX1yZXR1cm4gaH0sZS5wcm90b3R5cGUuZ2V0Q29sdW1uTmFtZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGg9W10sYj1fcih0aGlzLkxhKSxBPTA7QTxiO0ErPTEpaC5wdXNoKFNyKHRoaXMuTGEsQSkpO3JldHVybiBofSxlLnByb3RvdHlwZS5nZXRBc09iamVjdD1mdW5jdGlvbihoKXtoPXRoaXMuZ2V0KGgpO2Zvcih2YXIgYj10aGlzLmdldENvbHVtbk5hbWVzKCksQT17fSxTPTA7UzxiLmxlbmd0aDtTKz0xKUFbYltTXV09aFtTXTtyZXR1cm4gQX0sZS5wcm90b3R5cGUuZ2V0U1FMPWZ1bmN0aW9uKCl7cmV0dXJuIF8odGhpcy5MYSl9LGUucHJvdG90eXBlLmdldE5vcm1hbGl6ZWRTUUw9ZnVuY3Rpb24oKXtyZXR1cm4gRCh0aGlzLkxhKX0sZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGgpe3JldHVybiBoIT1udWxsJiZ0aGlzLmJpbmQoaCksdGhpcy5zdGVwKCksdGhpcy5yZXNldCgpfSxlLnByb3RvdHlwZS5yYz1mdW5jdGlvbihoLGIpe2I9PW51bGwmJihiPXRoaXMuS2EsdGhpcy5LYSs9MSksaD1PZShoKTt2YXIgQT1aZShoKTt0aGlzLnFiLnB1c2goQSksdGhpcy5kYi5oYW5kbGVFcnJvcihUKHRoaXMuTGEsYixBLGgubGVuZ3RoLTEsMCkpfSxlLnByb3RvdHlwZS5tYz1mdW5jdGlvbihoLGIpe2I9PW51bGwmJihiPXRoaXMuS2EsdGhpcy5LYSs9MSk7dmFyIEE9WmUoaCk7dGhpcy5xYi5wdXNoKEEpLHRoaXMuZGIuaGFuZGxlRXJyb3IoUCh0aGlzLkxhLGIsQSxoLmxlbmd0aCwwKSl9LGUucHJvdG90eXBlLnFjPWZ1bmN0aW9uKGgsYil7Yj09bnVsbCYmKGI9dGhpcy5LYSx0aGlzLkthKz0xKSx0aGlzLmRiLmhhbmRsZUVycm9yKChoPT09KGh8MCk/cGU6c2UpKHRoaXMuTGEsYixoKSl9LGUucHJvdG90eXBlLnBjPWZ1bmN0aW9uKGgpe2g9PW51bGwmJihoPXRoaXMuS2EsdGhpcy5LYSs9MSksUCh0aGlzLkxhLGgsMCwwLDApfSxlLnByb3RvdHlwZS5OYj1mdW5jdGlvbihoLGIpe3N3aXRjaChiPT1udWxsJiYoYj10aGlzLkthLHRoaXMuS2ErPTEpLHR5cGVvZiBoKXtjYXNlInN0cmluZyI6dGhpcy5yYyhoLGIpO3JldHVybjtjYXNlIm51bWJlciI6Y2FzZSJib29sZWFuIjp0aGlzLnFjKGgrMCxiKTtyZXR1cm47Y2FzZSJvYmplY3QiOmlmKGg9PT1udWxsKXt0aGlzLnBjKGIpO3JldHVybn1pZihoLmxlbmd0aCE9bnVsbCl7dGhpcy5tYyhoLGIpO3JldHVybn19dGhyb3ciV3JvbmcgQVBJIHVzZSA6IHRyaWVkIHRvIGJpbmQgYSB2YWx1ZSBvZiBhbiB1bmtub3duIHR5cGUgKCIraCsiKS4ifSxlLnByb3RvdHlwZS5vYz1mdW5jdGlvbihoKXt2YXIgYj10aGlzO3JldHVybiBPYmplY3Qua2V5cyhoKS5mb3JFYWNoKGZ1bmN0aW9uKEEpe3ZhciBTPWFlKGIuTGEsQSk7UyE9PTAmJmIuTmIoaFtBXSxTKX0pLCEwfSxlLnByb3RvdHlwZS5uYz1mdW5jdGlvbihoKXtmb3IodmFyIGI9MDtiPGgubGVuZ3RoO2IrPTEpdGhpcy5OYihoW2JdLGIrMSk7cmV0dXJuITB9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE1yKHRoaXMuTGEpPT09MCYmRHIodGhpcy5MYSk9PT0wfSxlLnByb3RvdHlwZS5mcmVlbWVtPWZ1bmN0aW9uKCl7Zm9yKHZhciBoOyhoPXRoaXMucWIucG9wKCkpIT09dm9pZCAwOylWZShoKX0sZS5wcm90b3R5cGUuZnJlZT1mdW5jdGlvbigpe3ZhciBoPUlyKHRoaXMuTGEpPT09MDtyZXR1cm4gZGVsZXRlIHRoaXMuZGIuZ2JbdGhpcy5MYV0sdGhpcy5MYT0wLGh9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmFiPT09bnVsbClyZXR1cm57ZG9uZTohMH07aWYodGhpcy5ZYSE9PW51bGwmJih0aGlzLllhLmZyZWUoKSx0aGlzLllhPW51bGwpLCF0aGlzLmRiLmRiKXRocm93IHRoaXMudmIoKSxFcnJvcigiRGF0YWJhc2UgY2xvc2VkIik7dmFyIGg9U2UoKSxiPW9lKDQpO3FlKGkpLHFlKGIpO3RyeXt0aGlzLmRiLmhhbmRsZUVycm9yKE4odGhpcy5kYi5kYix0aGlzLm1iLC0xLGksYikpLHRoaXMubWI9RyhiLCJpMzIiKTt2YXIgQT1HKGksImkzMiIpO3JldHVybiBBPT09MD8odGhpcy52YigpLHtkb25lOiEwfSk6KHRoaXMuWWE9bmV3IGUoQSx0aGlzLmRiKSx0aGlzLmRiLmdiW0FdPXRoaXMuWWEse3ZhbHVlOnRoaXMuWWEsZG9uZTohMX0pfWNhdGNoKFMpe3Rocm93IHRoaXMuR2I9TCh0aGlzLm1iKSx0aGlzLnZiKCksU31maW5hbGx5e0RlKGgpfX0sdC5wcm90b3R5cGUudmI9ZnVuY3Rpb24oKXtWZSh0aGlzLmFiKSx0aGlzLmFiPW51bGx9LHQucHJvdG90eXBlLmdldFJlbWFpbmluZ1NRTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdiIT09bnVsbD90aGlzLkdiOkwodGhpcy5tYil9LHR5cGVvZiBTeW1ib2w9PSJmdW5jdGlvbiImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PSJzeW1ib2wiJiYodC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGgsYil7aWYoIXRoaXMuZGIpdGhyb3ciRGF0YWJhc2UgY2xvc2VkIjtpZihiKXtoPXRoaXMucHJlcGFyZShoLGIpO3RyeXtoLnN0ZXAoKX1maW5hbGx5e2guZnJlZSgpfX1lbHNlIHRoaXMuaGFuZGxlRXJyb3IobSh0aGlzLmRiLGgsMCwwLGkpKTtyZXR1cm4gdGhpc30sci5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihoLGIpe2lmKCF0aGlzLmRiKXRocm93IkRhdGFiYXNlIGNsb3NlZCI7dmFyIEE9U2UoKSxTPW51bGw7dHJ5e3ZhciB6PWZlKGgpKzEsWD1vZSh6KTtyZShoLEIsWCx6KTt2YXIgaj1YLGJlPW9lKDQpO2ZvcihoPVtdO0coaiwiaTgiKSE9PTA7KXtxZShpKSxxZShiZSksdGhpcy5oYW5kbGVFcnJvcihOKHRoaXMuZGIsaiwtMSxpLGJlKSk7dmFyIHllPUcoaSwiaTMyIik7aWYoaj1HKGJlLCJpMzIiKSx5ZSE9PTApe2Zvcih6PW51bGwsUz1uZXcgZSh5ZSx0aGlzKSxiIT1udWxsJiZTLmJpbmQoYik7Uy5zdGVwKCk7KXo9PT1udWxsJiYoej17Y29sdW1uczpTLmdldENvbHVtbk5hbWVzKCksdmFsdWVzOltdfSxoLnB1c2goeikpLHoudmFsdWVzLnB1c2goUy5nZXQoKSk7Uy5mcmVlKCl9fXJldHVybiBofWNhdGNoKFYpe3Rocm93IFMmJlMuZnJlZSgpLFZ9ZmluYWxseXtEZShBKX19LHIucHJvdG90eXBlLmVhY2g9ZnVuY3Rpb24oaCxiLEEsUyl7dHlwZW9mIGI9PSJmdW5jdGlvbiImJihTPUEsQT1iLGI9dm9pZCAwKSxoPXRoaXMucHJlcGFyZShoLGIpO3RyeXtmb3IoO2guc3RlcCgpOylBKGguZ2V0QXNPYmplY3QoKSl9ZmluYWxseXtoLmZyZWUoKX1pZih0eXBlb2YgUz09ImZ1bmN0aW9uIilyZXR1cm4gUygpfSxyLnByb3RvdHlwZS5wcmVwYXJlPWZ1bmN0aW9uKGgsYil7aWYocWUoaSksdGhpcy5oYW5kbGVFcnJvcih3KHRoaXMuZGIsaCwtMSxpLDApKSxoPUcoaSwiaTMyIiksaD09PTApdGhyb3ciTm90aGluZyB0byBwcmVwYXJlIjt2YXIgQT1uZXcgZShoLHRoaXMpO3JldHVybiBiIT1udWxsJiZBLmJpbmQoYiksdGhpcy5nYltoXT1BfSxyLnByb3RvdHlwZS5pdGVyYXRlU3RhdGVtZW50cz1mdW5jdGlvbihoKXtyZXR1cm4gbmV3IHQoaCx0aGlzKX0sci5wcm90b3R5cGUuZXhwb3J0PWZ1bmN0aW9uKCl7T2JqZWN0LnZhbHVlcyh0aGlzLmdiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2IuZnJlZSgpfSksT2JqZWN0LnZhbHVlcyh0aGlzLlJhKS5mb3JFYWNoKFFlKSx0aGlzLlJhPXt9LHRoaXMuaGFuZGxlRXJyb3IoZCh0aGlzLmRiKSk7dmFyIGg9bi5yZWFkRmlsZSh0aGlzLmZpbGVuYW1lLHtlbmNvZGluZzoiYmluYXJ5In0pO3JldHVybiB0aGlzLmhhbmRsZUVycm9yKGwodGhpcy5maWxlbmFtZSxpKSksdGhpcy5kYj1HKGksImkzMiIpLGh9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5kYiE9PW51bGwmJihPYmplY3QudmFsdWVzKHRoaXMuZ2IpLmZvckVhY2goZnVuY3Rpb24oaCl7aC5mcmVlKCl9KSxPYmplY3QudmFsdWVzKHRoaXMuUmEpLmZvckVhY2goUWUpLHRoaXMuUmE9e30sdGhpcy5oYW5kbGVFcnJvcihkKHRoaXMuZGIpKSx0aGlzLk5jJiZuLnVubGluaygiLyIrdGhpcy5maWxlbmFtZSksdGhpcy5kYj1udWxsKX0sci5wcm90b3R5cGUuaGFuZGxlRXJyb3I9ZnVuY3Rpb24oaCl7aWYoaD09PTApcmV0dXJuIG51bGw7dGhyb3cgaD1VKHRoaXMuZGIpLEVycm9yKGgpfSxyLnByb3RvdHlwZS5nZXRSb3dzTW9kaWZpZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZyh0aGlzLmRiKX0sci5wcm90b3R5cGUuY3JlYXRlX2Z1bmN0aW9uPWZ1bmN0aW9uKGgsYil7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuUmEsaCkmJihRZSh0aGlzLlJhW2hdKSxkZWxldGUgdGhpcy5SYVtoXSk7dmFyIEE9TmUoZnVuY3Rpb24oUyx6LFgpe2Zvcih2YXIgaixiZT1bXSx5ZT0wO3llPHo7eWUrPTEpe3ZhciBWPUcoWCs0KnllLCJpMzIiKSxlZT16cihWKTtpZihlZT09PTF8fGVlPT09MilWPUxyKFYpO2Vsc2UgaWYoZWU9PT0zKVY9TnIoVik7ZWxzZSBpZihlZT09PTQpe2VlPVYsVj1ScihlZSksZWU9UHIoZWUpO2Zvcih2YXIgV3Q9bmV3IFVpbnQ4QXJyYXkoViksSGU9MDtIZTxWO0hlKz0xKVd0W0hlXT1CW2VlK0hlXTtWPVd0fWVsc2UgVj1udWxsO2JlLnB1c2goVil9dHJ5e2o9Yi5hcHBseShudWxsLGJlKX1jYXRjaChPcil7VXQoUyxPciwtMSk7cmV0dXJufXN3aXRjaCh0eXBlb2Ygail7Y2FzZSJib29sZWFuIjpVcihTLGo/MTowKTticmVhaztjYXNlIm51bWJlciI6QnIoUyxqKTticmVhaztjYXNlInN0cmluZyI6VHIoUyxqLC0xLC0xKTticmVhaztjYXNlIm9iamVjdCI6aj09PW51bGw/eHQoUyk6ai5sZW5ndGghPW51bGw/KHo9WmUoaikseHIoUyx6LGoubGVuZ3RoLC0xKSxWZSh6KSk6VXQoUywiV3JvbmcgQVBJIHVzZSA6IHRyaWVkIHRvIHJldHVybiBhIHZhbHVlIG9mIGFuIHVua25vd24gdHlwZSAoIitqKyIpLiIsLTEpO2JyZWFrO2RlZmF1bHQ6eHQoUyl9fSwidmlpaSIpO3JldHVybiB0aGlzLlJhW2hdPUEsdGhpcy5oYW5kbGVFcnJvcihGcih0aGlzLmRiLGgsYi5sZW5ndGgsMSwwLEEsMCwwLDApKSx0aGlzfSxzLkRhdGFiYXNlPXI7dmFyIE1lPW5ldyBNYXA7cy5yZWdpc3Rlcl9mb3JfaWRiPWg9PntsZXQgYj1OZShmdW5jdGlvbih6LFgpe3JldHVybiB6PU1lLmdldCh6KSxoLmxvY2soeixYKT8wOjV9LCJpaWkiKSxBPU5lKGZ1bmN0aW9uKHosWCl7cmV0dXJuIHo9TWUuZ2V0KHopLGgudW5sb2NrKHosWCksMH0sImlpaSIpLFM9TmUoZnVuY3Rpb24oeixYKXt6PUwoeiksTWUuc2V0KFgseil9LCJ2aWkiKTtzLl9yZWdpc3Rlcl9mb3JfaWRiKGIsQSxTKX0scy5jbGVhbnVwX2ZpbGU9aD0+e2xldCBiPVsuLi5NZS5lbnRyaWVzKCldLmZpbmQoQT0+QVsxXT09PWgpO01lLmRlbGV0ZShiWzBdKX0scy5yZXNldF9maWxlc3lzdGVtPSgpPT57bi5yb290PW51bGwsbi5lYygpfX07dmFyIE09T2JqZWN0LmFzc2lnbih7fSxzKSxXPSIuL3RoaXMucHJvZ3JhbSIsST10eXBlb2Ygd2luZG93PT0ib2JqZWN0IixSPXR5cGVvZiBpbXBvcnRTY3JpcHRzPT0iZnVuY3Rpb24iLHg9dHlwZW9mIHByb2Nlc3M9PSJvYmplY3QiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucz09Im9iamVjdCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGU9PSJzdHJpbmciLE89IiIsRWUsdmUsSWUsRmUsemUsS2U7eD8oTz1SP0plLmRpcm5hbWUoTykrIi8iOl9fZGlybmFtZSsiLyIsS2U9KCk9Pnt6ZXx8KEZlPUplLHplPUplKX0sRWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gS2UoKSxlPXplLm5vcm1hbGl6ZShlKSxGZS5yZWFkRmlsZVN5bmMoZSx0P3ZvaWQgMDoidXRmOCIpfSxJZT1lPT4oZT1FZShlLCEwKSxlLmJ1ZmZlcnx8KGU9bmV3IFVpbnQ4QXJyYXkoZSkpLGUpLHZlPShlLHQscik9PntLZSgpLGU9emUubm9ybWFsaXplKGUpLEZlLnJlYWRGaWxlKGUsZnVuY3Rpb24oaSxvKXtpP3IoaSk6dChvLmJ1ZmZlcil9KX0sMTxwcm9jZXNzLmFyZ3YubGVuZ3RoJiYoVz1wcm9jZXNzLmFyZ3ZbMV0ucmVwbGFjZSgvXFwvZywiLyIpKSxwcm9jZXNzLmFyZ3Yuc2xpY2UoMiksRS5leHBvcnRzPXMscy5pbnNwZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn0pOihJfHxSKSYmKFI/Tz1zZWxmLmxvY2F0aW9uLmhyZWY6dHlwZW9mIGRvY3VtZW50IT0idW5kZWZpbmVkIiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKE89ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLE89Ty5pbmRleE9mKCJibG9iOiIpIT09MD9PLnN1YnN0cigwLE8ucmVwbGFjZSgvWz8jXS4qLywiIikubGFzdEluZGV4T2YoIi8iKSsxKToiIixFZT1lPT57dmFyIHQ9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiB0Lm9wZW4oIkdFVCIsZSwhMSksdC5zZW5kKG51bGwpLHQucmVzcG9uc2VUZXh0fSxSJiYoSWU9ZT0+e3ZhciB0PW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gdC5vcGVuKCJHRVQiLGUsITEpLHQucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciIsdC5zZW5kKG51bGwpLG5ldyBVaW50OEFycmF5KHQucmVzcG9uc2UpfSksdmU9KGUsdCxyKT0+e3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9wZW4oIkdFVCIsZSwhMCksaS5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixpLm9ubG9hZD0oKT0+e2kuc3RhdHVzPT0yMDB8fGkuc3RhdHVzPT0wJiZpLnJlc3BvbnNlP3QoaS5yZXNwb25zZSk6cigpfSxpLm9uZXJyb3I9cixpLnNlbmQobnVsbCl9KTt2YXIgUmU9cy5wcmludHx8Y29uc29sZS5sb2cuYmluZChjb25zb2xlKSx0ZT1zLnByaW50RXJyfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtPYmplY3QuYXNzaWduKHMsTSksTT1udWxsLHMudGhpc1Byb2dyYW0mJihXPXMudGhpc1Byb2dyYW0pO2Z1bmN0aW9uIF90KGUpe3JldHVybiAxMjg+ZT9bZV06W2UlMTI4fDEyOCxlPj43XX12YXIgWGU9W10sbGU7ZnVuY3Rpb24gTmUoZSx0KXtpZighbGUpe2xlPW5ldyBXZWFrTWFwO2Zvcih2YXIgcj1ZLmxlbmd0aCxpPTA7aTwwK3I7aSsrKXt2YXIgbz1CZShpKTtvJiZsZS5zZXQobyxpKX19aWYobGUuaGFzKGUpKXJldHVybiBsZS5nZXQoZSk7aWYoWGUubGVuZ3RoKXI9WGUucG9wKCk7ZWxzZXt0cnl7WS5ncm93KDEpfWNhdGNoKG0pe3Rocm93IG0gaW5zdGFuY2VvZiBSYW5nZUVycm9yPyJVbmFibGUgdG8gZ3JvdyB3YXNtIHRhYmxlLiBTZXQgQUxMT1dfVEFCTEVfR1JPV1RILiI6bX1yPVkubGVuZ3RoLTF9dHJ5e2k9cixZLnNldChpLGUpLHdlW2ldPVkuZ2V0KGkpfWNhdGNoKG0pe2lmKCEobSBpbnN0YW5jZW9mIFR5cGVFcnJvcikpdGhyb3cgbTtpZih0eXBlb2YgV2ViQXNzZW1ibHkuRnVuY3Rpb249PSJmdW5jdGlvbiIpe289e2k6ImkzMiIsajoiaTY0IixmOiJmMzIiLGQ6ImY2NCIscDoiaTMyIn07dmFyIGw9e3BhcmFtZXRlcnM6W10scmVzdWx0czp0WzBdPT0idiI/W106W29bdFswXV1dfTtmb3IoaT0xO2k8dC5sZW5ndGg7KytpKWwucGFyYW1ldGVycy5wdXNoKG9bdFtpXV0pO3Q9bmV3IFdlYkFzc2VtYmx5LkZ1bmN0aW9uKGwsZSl9ZWxzZXtvPVsxLDk2XSxsPXQuc2xpY2UoMCwxKSx0PXQuc2xpY2UoMSk7dmFyIGQ9e2k6MTI3LHA6MTI3LGo6MTI2LGY6MTI1LGQ6MTI0fTtmb3Iobz1vLmNvbmNhdChfdCh0Lmxlbmd0aCkpLGk9MDtpPHQubGVuZ3RoOysraSlvLnB1c2goZFt0W2ldXSk7bD09InYiP28ucHVzaCgwKTpvPW8uY29uY2F0KFsxLGRbbF1dKSxvPVsxXS5jb25jYXQoX3Qoby5sZW5ndGgpLG8pLHQ9bmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwXS5jb25jYXQobyxbMiw3LDEsMSwxMDEsMSwxMDIsMCwwLDcsNSwxLDEsMTAyLDAsMF0pKSx0PW5ldyBXZWJBc3NlbWJseS5Nb2R1bGUodCksdD1uZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2UodCx7ZTp7ZjplfX0pLmV4cG9ydHMuZn1pPXIsWS5zZXQoaSx0KSx3ZVtpXT1ZLmdldChpKX1yZXR1cm4gbGUuc2V0KGUscikscn1mdW5jdGlvbiBRZShlKXtsZS5kZWxldGUoQmUoZSkpLFhlLnB1c2goZSl9dmFyIGtlO3Mud2FzbUJpbmFyeSYmKGtlPXMud2FzbUJpbmFyeSkscy5ub0V4aXRSdW50aW1lLHR5cGVvZiBXZWJBc3NlbWJseSE9Im9iamVjdCImJlooIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgWWUsZ3Q9ITE7ZnVuY3Rpb24gYXIoZSx0LHIsaSl7dmFyIG89e3N0cmluZzpmdW5jdGlvbih3KXt2YXIgXz0wO2lmKHchPW51bGwmJnchPT0wKXt2YXIgRD0ody5sZW5ndGg8PDIpKzE7Xz1vZShEKSxyZSh3LEssXyxEKX1yZXR1cm4gX30sYXJyYXk6ZnVuY3Rpb24odyl7dmFyIF89b2Uody5sZW5ndGgpO3JldHVybiBCLnNldCh3LF8pLF99fTtlPXNbIl8iK2VdO3ZhciBsPVtdLGQ9MDtpZihpKWZvcih2YXIgbT0wO208aS5sZW5ndGg7bSsrKXt2YXIgZz1vW3JbbV1dO2c/KGQ9PT0wJiYoZD1TZSgpKSxsW21dPWcoaVttXSkpOmxbbV09aVttXX1yZXR1cm4gcj1lLmFwcGx5KG51bGwsbCkscj1mdW5jdGlvbih3KXtyZXR1cm4gZCE9PTAmJkRlKGQpLHQ9PT0ic3RyaW5nIj9MKHcpOnQ9PT0iYm9vbGVhbiI/ISF3Ond9KHIpfWZ1bmN0aW9uIFplKGUpe3ZhciB0PWplKGUubGVuZ3RoKTtyZXR1cm4gZS5zdWJhcnJheXx8ZS5zbGljZXx8KGU9bmV3IFVpbnQ4QXJyYXkoZSkpLEsuc2V0KGUsdCksdH12YXIgRXQ9dHlwZW9mIFRleHREZWNvZGVyIT0idW5kZWZpbmVkIj9uZXcgVGV4dERlY29kZXIoInV0ZjgiKTp2b2lkIDA7ZnVuY3Rpb24gbWUoZSx0LHIpe3ZhciBpPXQrcjtmb3Iocj10O2Vbcl0mJiEocj49aSk7KSsrcjtpZigxNjxyLXQmJmUuYnVmZmVyJiZFdClyZXR1cm4gRXQuZGVjb2RlKGUuc3ViYXJyYXkodCxyKSk7Zm9yKGk9IiI7dDxyOyl7dmFyIG89ZVt0KytdO2lmKG8mMTI4KXt2YXIgbD1lW3QrK10mNjM7aWYoKG8mMjI0KT09MTkyKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUoKG8mMzEpPDw2fGwpO2Vsc2V7dmFyIGQ9ZVt0KytdJjYzO289KG8mMjQwKT09MjI0PyhvJjE1KTw8MTJ8bDw8NnxkOihvJjcpPDwxOHxsPDwxMnxkPDw2fGVbdCsrXSY2Myw2NTUzNj5vP2krPVN0cmluZy5mcm9tQ2hhckNvZGUobyk6KG8tPTY1NTM2LGkrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bz4+MTAsNTYzMjB8byYxMDIzKSl9fWVsc2UgaSs9U3RyaW5nLmZyb21DaGFyQ29kZShvKX1yZXR1cm4gaX1mdW5jdGlvbiBMKGUsdCl7cmV0dXJuIGU/bWUoSyxlLHQpOiIifWZ1bmN0aW9uIHJlKGUsdCxyLGkpe2lmKCEoMDxpKSlyZXR1cm4gMDt2YXIgbz1yO2k9citpLTE7Zm9yKHZhciBsPTA7bDxlLmxlbmd0aDsrK2wpe3ZhciBkPWUuY2hhckNvZGVBdChsKTtpZig1NTI5Njw9ZCYmNTczNDM+PWQpe3ZhciBtPWUuY2hhckNvZGVBdCgrK2wpO2Q9NjU1MzYrKChkJjEwMjMpPDwxMCl8bSYxMDIzfWlmKDEyNz49ZCl7aWYocj49aSlicmVhazt0W3IrK109ZH1lbHNle2lmKDIwNDc+PWQpe2lmKHIrMT49aSlicmVhazt0W3IrK109MTkyfGQ+PjZ9ZWxzZXtpZig2NTUzNT49ZCl7aWYocisyPj1pKWJyZWFrO3RbcisrXT0yMjR8ZD4+MTJ9ZWxzZXtpZihyKzM+PWkpYnJlYWs7dFtyKytdPTI0MHxkPj4xOCx0W3IrK109MTI4fGQ+PjEyJjYzfXRbcisrXT0xMjh8ZD4+NiY2M310W3IrK109MTI4fGQmNjN9fXJldHVybiB0W3JdPTAsci1vfWZ1bmN0aW9uIGZlKGUpe2Zvcih2YXIgdD0wLHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIGk9ZS5jaGFyQ29kZUF0KHIpOzU1Mjk2PD1pJiY1NzM0Mz49aSYmKGk9NjU1MzYrKChpJjEwMjMpPDwxMCl8ZS5jaGFyQ29kZUF0KCsrcikmMTAyMyksMTI3Pj1pPysrdDp0PTIwNDc+PWk/dCsyOjY1NTM1Pj1pP3QrMzp0KzR9cmV0dXJuIHR9ZnVuY3Rpb24gdnQoZSl7dmFyIHQ9ZmUoZSkrMSxyPWplKHQpO3JldHVybiByJiZyZShlLEIscix0KSxyfXZhciBHZSxCLEssUGUsdixDLGV0LHR0O2Z1bmN0aW9uIGt0KCl7dmFyIGU9WWUuYnVmZmVyO0dlPWUscy5IRUFQOD1CPW5ldyBJbnQ4QXJyYXkoZSkscy5IRUFQMTY9UGU9bmV3IEludDE2QXJyYXkoZSkscy5IRUFQMzI9dj1uZXcgSW50MzJBcnJheShlKSxzLkhFQVBVOD1LPW5ldyBVaW50OEFycmF5KGUpLHMuSEVBUFUxNj1uZXcgVWludDE2QXJyYXkoZSkscy5IRUFQVTMyPUM9bmV3IFVpbnQzMkFycmF5KGUpLHMuSEVBUEYzMj1ldD1uZXcgRmxvYXQzMkFycmF5KGUpLHMuSEVBUEY2ND10dD1uZXcgRmxvYXQ2NEFycmF5KGUpfXZhciBZLEF0PVtdLHF0PVtdLFN0PVtdO2Z1bmN0aW9uIHVyKCl7dmFyIGU9cy5wcmVSdW4uc2hpZnQoKTtBdC51bnNoaWZ0KGUpfXZhciBjZT0wLEFlPW51bGw7ZnVuY3Rpb24gcnQoKXtjZSsrLHMubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmcy5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKGNlKX1mdW5jdGlvbiBMZSgpe2lmKGNlLS0scy5tb25pdG9yUnVuRGVwZW5kZW5jaWVzJiZzLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMoY2UpLGNlPT0wJiZBZSl7dmFyIGU9QWU7QWU9bnVsbCxlKCl9fWZ1bmN0aW9uIFooZSl7dGhyb3cgcy5vbkFib3J0JiZzLm9uQWJvcnQoZSksZT0iQWJvcnRlZCgiK2UrIikiLHRlKGUpLGd0PSEwLG5ldyBXZWJBc3NlbWJseS5SdW50aW1lRXJyb3IoZSsiLiBCdWlsZCB3aXRoIC1zQVNTRVJUSU9OUyBmb3IgbW9yZSBpbmZvLiIpfWZ1bmN0aW9uIER0KCl7cmV0dXJuIEguc3RhcnRzV2l0aCgiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCIpfXZhciBIO2lmKEg9InNxbC13YXNtLndhc20iLCFEdCgpKXt2YXIgTXQ9SDtIPXMubG9jYXRlRmlsZT9zLmxvY2F0ZUZpbGUoTXQsTyk6TytNdH1mdW5jdGlvbiBJdCgpe3ZhciBlPUg7dHJ5e2lmKGU9PUgmJmtlKXJldHVybiBuZXcgVWludDhBcnJheShrZSk7aWYoSWUpcmV0dXJuIEllKGUpO3Rocm93ImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn1jYXRjaCh0KXtaKHQpfX1mdW5jdGlvbiBscigpe2lmKCFrZSYmKEl8fFIpKXtpZih0eXBlb2YgZmV0Y2g9PSJmdW5jdGlvbiImJiFILnN0YXJ0c1dpdGgoImZpbGU6Ly8iKSlyZXR1cm4gZmV0Y2goSCx7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oZnVuY3Rpb24oZSl7aWYoIWUub2spdGhyb3ciZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCAnIitIKyInIjtyZXR1cm4gZS5hcnJheUJ1ZmZlcigpfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gSXQoKX0pO2lmKHZlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe3ZlKEgsZnVuY3Rpb24ocil7ZShuZXcgVWludDhBcnJheShyKSl9LHQpfSl9cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gSXQoKX0pfXZhciBGLCQ7ZnVuY3Rpb24gbnQoZSl7Zm9yKDswPGUubGVuZ3RoOyl7dmFyIHQ9ZS5zaGlmdCgpO2lmKHR5cGVvZiB0PT0iZnVuY3Rpb24iKXQocyk7ZWxzZXt2YXIgcj10LmNkO3R5cGVvZiByPT0ibnVtYmVyIj90LnNiPT09dm9pZCAwP0JlKHIpKCk6QmUocikodC5zYik6cih0LnNiPT09dm9pZCAwP251bGw6dC5zYil9fX1mdW5jdGlvbiBHKGUsdD0iaTgiKXtzd2l0Y2godC5lbmRzV2l0aCgiKiIpJiYodD0idTMyIiksdCl7Y2FzZSJpMSI6cmV0dXJuIEJbZT4+MF07Y2FzZSJpOCI6cmV0dXJuIEJbZT4+MF07Y2FzZSJpMTYiOnJldHVybiBQZVtlPj4xXTtjYXNlImkzMiI6cmV0dXJuIHZbZT4+Ml07Y2FzZSJpNjQiOnJldHVybiB2W2U+PjJdO2Nhc2UiZmxvYXQiOnJldHVybiBldFtlPj4yXTtjYXNlImRvdWJsZSI6cmV0dXJuIE51bWJlcih0dFtlPj4zXSk7ZGVmYXVsdDpaKCJpbnZhbGlkIHR5cGUgZm9yIGdldFZhbHVlOiAiK3QpfXJldHVybiBudWxsfXZhciB3ZT1bXTtmdW5jdGlvbiBCZShlKXt2YXIgdD13ZVtlXTtyZXR1cm4gdHx8KGU+PXdlLmxlbmd0aCYmKHdlLmxlbmd0aD1lKzEpLHdlW2VdPXQ9WS5nZXQoZSkpLHR9ZnVuY3Rpb24gcWUoZSl7dmFyIHQ9ImkzMiI7c3dpdGNoKHQuZW5kc1dpdGgoIioiKSYmKHQ9InUzMiIpLHQpe2Nhc2UiaTEiOkJbZT4+MF09MDticmVhaztjYXNlImk4IjpCW2U+PjBdPTA7YnJlYWs7Y2FzZSJpMTYiOlBlW2U+PjFdPTA7YnJlYWs7Y2FzZSJpMzIiOnZbZT4+Ml09MDticmVhaztjYXNlImk2NCI6JD1bMCwoRj0wLDE8PStNYXRoLmFicyhGKT8wPEY/KE1hdGgubWluKCtNYXRoLmZsb29yKEYvNDI5NDk2NzI5NiksNDI5NDk2NzI5NSl8MCk+Pj4wOn5+K01hdGguY2VpbCgoRi0rKH5+Rj4+PjApKS80Mjk0OTY3Mjk2KT4+PjA6MCldLHZbZT4+Ml09JFswXSx2W2UrND4+Ml09JFsxXTticmVhaztjYXNlImZsb2F0IjpldFtlPj4yXT0wO2JyZWFrO2Nhc2UiZG91YmxlIjp0dFtlPj4zXT0wO2JyZWFrO2RlZmF1bHQ6WigiaW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTogIit0KX19dmFyIGl0PShlLHQpPT57Zm9yKHZhciByPTAsaT1lLmxlbmd0aC0xOzA8PWk7aS0tKXt2YXIgbz1lW2ldO289PT0iLiI/ZS5zcGxpY2UoaSwxKTpvPT09Ii4uIj8oZS5zcGxpY2UoaSwxKSxyKyspOnImJihlLnNwbGljZShpLDEpLHItLSl9aWYodClmb3IoO3I7ci0tKWUudW5zaGlmdCgiLi4iKTtyZXR1cm4gZX0sSj1lPT57dmFyIHQ9ZS5jaGFyQXQoMCk9PT0iLyIscj1lLnN1YnN0cigtMSk9PT0iLyI7cmV0dXJuKGU9aXQoZS5zcGxpdCgiLyIpLmZpbHRlcihpPT4hIWkpLCF0KS5qb2luKCIvIikpfHx0fHwoZT0iLiIpLGUmJnImJihlKz0iLyIpLCh0PyIvIjoiIikrZX0sVGU9ZT0+e3ZhciB0PS9eKFwvP3wpKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteXC9dKz98KShcLlteLlwvXSp8KSkoPzpbXC9dKikkLy5leGVjKGUpLnNsaWNlKDEpO3JldHVybiBlPXRbMF0sdD10WzFdLCFlJiYhdD8iLiI6KHQmJih0PXQuc3Vic3RyKDAsdC5sZW5ndGgtMSkpLGUrdCl9LG5lPWU9PntpZihlPT09Ii8iKXJldHVybiIvIjtlPUooZSksZT1lLnJlcGxhY2UoL1wvJC8sIiIpO3ZhciB0PWUubGFzdEluZGV4T2YoIi8iKTtyZXR1cm4gdD09PS0xP2U6ZS5zdWJzdHIodCsxKX0sZnI9KGUsdCk9PkooZSsiLyIrdCk7ZnVuY3Rpb24gY3IoKXtpZih0eXBlb2YgY3J5cHRvPT0ib2JqZWN0IiYmdHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXM9PSJmdW5jdGlvbiIpe3ZhciBlPW5ldyBVaW50OEFycmF5KDEpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGUpLGVbMF19fWlmKHgpdHJ5e3ZhciB0PXJlcXVpcmUoImNyeXB0byIpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LnJhbmRvbUJ5dGVzKDEpWzBdfX1jYXRjaHt9cmV0dXJuIGZ1bmN0aW9uKCl7WigicmFuZG9tRGV2aWNlIil9fWZ1bmN0aW9uIGhlKCl7Zm9yKHZhciBlPSIiLHQ9ITEscj1hcmd1bWVudHMubGVuZ3RoLTE7LTE8PXImJiF0O3ItLSl7aWYodD0wPD1yP2FyZ3VtZW50c1tyXTpuLmN3ZCgpLHR5cGVvZiB0IT0ic3RyaW5nIil0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncyIpO2lmKCF0KXJldHVybiIiO2U9dCsiLyIrZSx0PXQuY2hhckF0KDApPT09Ii8ifXJldHVybiBlPWl0KGUuc3BsaXQoIi8iKS5maWx0ZXIoaT0+ISFpKSwhdCkuam9pbigiLyIpLCh0PyIvIjoiIikrZXx8Ii4ifXZhciBGdD0oZSx0KT0+e2Z1bmN0aW9uIHIoZCl7Zm9yKHZhciBtPTA7bTxkLmxlbmd0aCYmZFttXT09PSIiO20rKyk7Zm9yKHZhciBnPWQubGVuZ3RoLTE7MDw9ZyYmZFtnXT09PSIiO2ctLSk7cmV0dXJuIG0+Zz9bXTpkLnNsaWNlKG0sZy1tKzEpfWU9aGUoZSkuc3Vic3RyKDEpLHQ9aGUodCkuc3Vic3RyKDEpLGU9cihlLnNwbGl0KCIvIikpLHQ9cih0LnNwbGl0KCIvIikpO2Zvcih2YXIgaT1NYXRoLm1pbihlLmxlbmd0aCx0Lmxlbmd0aCksbz1pLGw9MDtsPGk7bCsrKWlmKGVbbF0hPT10W2xdKXtvPWw7YnJlYWt9Zm9yKGk9W10sbD1vO2w8ZS5sZW5ndGg7bCsrKWkucHVzaCgiLi4iKTtyZXR1cm4gaT1pLmNvbmNhdCh0LnNsaWNlKG8pKSxpLmpvaW4oIi8iKX0senQ9W107ZnVuY3Rpb24gUnQoZSx0KXt6dFtlXT17aW5wdXQ6W10sb3V0cHV0OltdLCRhOnR9LG4uS2IoZSxocil9dmFyIGhyPXtvcGVuOmZ1bmN0aW9uKGUpe3ZhciB0PXp0W2Uubm9kZS5yZGV2XTtpZighdCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQzKTtlLnR0eT10LGUuc2Vla2FibGU9ITF9LGNsb3NlOmZ1bmN0aW9uKGUpe2UudHR5LiRhLmZsdXNoKGUudHR5KX0sZmx1c2g6ZnVuY3Rpb24oZSl7ZS50dHkuJGEuZmx1c2goZS50dHkpfSxyZWFkOmZ1bmN0aW9uKGUsdCxyLGkpe2lmKCFlLnR0eXx8IWUudHR5LiRhLlliKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNjApO2Zvcih2YXIgbz0wLGw9MDtsPGk7bCsrKXt0cnl7dmFyIGQ9ZS50dHkuJGEuWWIoZS50dHkpfWNhdGNoe3Rocm93IG5ldyBuLkVycm5vRXJyb3IoMjkpfWlmKGQ9PT12b2lkIDAmJm89PT0wKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNik7aWYoZD09bnVsbClicmVhaztvKyssdFtyK2xdPWR9cmV0dXJuIG8mJihlLm5vZGUudGltZXN0YW1wPURhdGUubm93KCkpLG99LHdyaXRlOmZ1bmN0aW9uKGUsdCxyLGkpe2lmKCFlLnR0eXx8IWUudHR5LiRhLkhiKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNjApO3RyeXtmb3IodmFyIG89MDtvPGk7bysrKWUudHR5LiRhLkhiKGUudHR5LHRbcitvXSl9Y2F0Y2h7dGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOSl9cmV0dXJuIGkmJihlLm5vZGUudGltZXN0YW1wPURhdGUubm93KCkpLG99fSxkcj17WWI6ZnVuY3Rpb24oZSl7aWYoIWUuaW5wdXQubGVuZ3RoKXt2YXIgdD1udWxsO2lmKHgpe3ZhciByPUJ1ZmZlci5hbGxvYygyNTYpLGk9MDt0cnl7aT1GZS5yZWFkU3luYyhwcm9jZXNzLnN0ZGluLmZkLHIsMCwyNTYsLTEpfWNhdGNoKG8pe2lmKG8udG9TdHJpbmcoKS5pbmNsdWRlcygiRU9GIikpaT0wO2Vsc2UgdGhyb3cgb30wPGk/dD1yLnNsaWNlKDAsaSkudG9TdHJpbmcoInV0Zi04Iik6dD1udWxsfWVsc2UgdHlwZW9mIHdpbmRvdyE9InVuZGVmaW5lZCImJnR5cGVvZiB3aW5kb3cucHJvbXB0PT0iZnVuY3Rpb24iPyh0PXdpbmRvdy5wcm9tcHQoIklucHV0OiAiKSx0IT09bnVsbCYmKHQrPWAKYCkpOnR5cGVvZiByZWFkbGluZT09ImZ1bmN0aW9uIiYmKHQ9cmVhZGxpbmUoKSx0IT09bnVsbCYmKHQrPWAKYCkpO2lmKCF0KXJldHVybiBudWxsO2UuaW5wdXQ9T2UodCwhMCl9cmV0dXJuIGUuaW5wdXQuc2hpZnQoKX0sSGI6ZnVuY3Rpb24oZSx0KXt0PT09bnVsbHx8dD09PTEwPyhSZShtZShlLm91dHB1dCwwKSksZS5vdXRwdXQ9W10pOnQhPTAmJmUub3V0cHV0LnB1c2godCl9LGZsdXNoOmZ1bmN0aW9uKGUpe2Uub3V0cHV0JiYwPGUub3V0cHV0Lmxlbmd0aCYmKFJlKG1lKGUub3V0cHV0LDApKSxlLm91dHB1dD1bXSl9fSxwcj17SGI6ZnVuY3Rpb24oZSx0KXt0PT09bnVsbHx8dD09PTEwPyh0ZShtZShlLm91dHB1dCwwKSksZS5vdXRwdXQ9W10pOnQhPTAmJmUub3V0cHV0LnB1c2godCl9LGZsdXNoOmZ1bmN0aW9uKGUpe2Uub3V0cHV0JiYwPGUub3V0cHV0Lmxlbmd0aCYmKHRlKG1lKGUub3V0cHV0LDApKSxlLm91dHB1dD1bXSl9fSxxPXtQYTpudWxsLG1vdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHEuY3JlYXRlTm9kZShudWxsLCIvIiwxNjg5NSwwKX0sY3JlYXRlTm9kZTpmdW5jdGlvbihlLHQscixpKXtpZihuLkpjKHIpfHxuLmlzRklGTyhyKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDYzKTtyZXR1cm4gcS5QYXx8KHEuUGE9e2Rpcjp7bm9kZTp7Z2V0YXR0cjpxLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpxLm5vZGVfb3BzLnNldGF0dHIsbG9va3VwOnEubm9kZV9vcHMubG9va3VwLG1rbm9kOnEubm9kZV9vcHMubWtub2QscmVuYW1lOnEubm9kZV9vcHMucmVuYW1lLHVubGluazpxLm5vZGVfb3BzLnVubGluayxybWRpcjpxLm5vZGVfb3BzLnJtZGlyLHJlYWRkaXI6cS5ub2RlX29wcy5yZWFkZGlyLHN5bWxpbms6cS5ub2RlX29wcy5zeW1saW5rfSxzdHJlYW06e2xsc2VlazpxLnN0cmVhbV9vcHMubGxzZWVrfX0sZmlsZTp7bm9kZTp7Z2V0YXR0cjpxLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpxLm5vZGVfb3BzLnNldGF0dHJ9LHN0cmVhbTp7bGxzZWVrOnEuc3RyZWFtX29wcy5sbHNlZWsscmVhZDpxLnN0cmVhbV9vcHMucmVhZCx3cml0ZTpxLnN0cmVhbV9vcHMud3JpdGUsYWxsb2NhdGU6cS5zdHJlYW1fb3BzLmFsbG9jYXRlLG1tYXA6cS5zdHJlYW1fb3BzLm1tYXAsbXN5bmM6cS5zdHJlYW1fb3BzLm1zeW5jfX0sbGluazp7bm9kZTp7Z2V0YXR0cjpxLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpxLm5vZGVfb3BzLnNldGF0dHIscmVhZGxpbms6cS5ub2RlX29wcy5yZWFkbGlua30sc3RyZWFtOnt9fSxQYjp7bm9kZTp7Z2V0YXR0cjpxLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpxLm5vZGVfb3BzLnNldGF0dHJ9LHN0cmVhbTpuLnZjfX0pLHI9bi5jcmVhdGVOb2RlKGUsdCxyLGkpLG4uaXNEaXIoci5tb2RlKT8oci5ub2RlX29wcz1xLlBhLmRpci5ub2RlLHIuc3RyZWFtX29wcz1xLlBhLmRpci5zdHJlYW0sci5JYT17fSk6bi5pc0ZpbGUoci5tb2RlKT8oci5ub2RlX29wcz1xLlBhLmZpbGUubm9kZSxyLnN0cmVhbV9vcHM9cS5QYS5maWxlLnN0cmVhbSxyLk1hPTAsci5JYT1udWxsKTpuLlphKHIubW9kZSk/KHIubm9kZV9vcHM9cS5QYS5saW5rLm5vZGUsci5zdHJlYW1fb3BzPXEuUGEubGluay5zdHJlYW0pOm4uamIoci5tb2RlKSYmKHIubm9kZV9vcHM9cS5QYS5QYi5ub2RlLHIuc3RyZWFtX29wcz1xLlBhLlBiLnN0cmVhbSksci50aW1lc3RhbXA9RGF0ZS5ub3coKSxlJiYoZS5JYVt0XT1yLGUudGltZXN0YW1wPXIudGltZXN0YW1wKSxyfSxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5JYT9lLklhLnN1YmFycmF5P2UuSWEuc3ViYXJyYXkoMCxlLk1hKTpuZXcgVWludDhBcnJheShlLklhKTpuZXcgVWludDhBcnJheSgwKX0sVWI6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLklhP2UuSWEubGVuZ3RoOjA7cj49dHx8KHQ9TWF0aC5tYXgodCxyKigxMDQ4NTc2PnI/MjoxLjEyNSk+Pj4wKSxyIT0wJiYodD1NYXRoLm1heCh0LDI1NikpLHI9ZS5JYSxlLklhPW5ldyBVaW50OEFycmF5KHQpLDA8ZS5NYSYmZS5JYS5zZXQoci5zdWJhcnJheSgwLGUuTWEpLDApKX0sVmM6ZnVuY3Rpb24oZSx0KXtpZihlLk1hIT10KWlmKHQ9PTApZS5JYT1udWxsLGUuTWE9MDtlbHNle3ZhciByPWUuSWE7ZS5JYT1uZXcgVWludDhBcnJheSh0KSxyJiZlLklhLnNldChyLnN1YmFycmF5KDAsTWF0aC5taW4odCxlLk1hKSkpLGUuTWE9dH19LG5vZGVfb3BzOntnZXRhdHRyOmZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB0LmRldj1uLmpiKGUubW9kZSk/ZS5pZDoxLHQuaW5vPWUuaWQsdC5tb2RlPWUubW9kZSx0Lm5saW5rPTEsdC51aWQ9MCx0LmdpZD0wLHQucmRldj1lLnJkZXYsbi5pc0RpcihlLm1vZGUpP3Quc2l6ZT00MDk2Om4uaXNGaWxlKGUubW9kZSk/dC5zaXplPWUuTWE6bi5aYShlLm1vZGUpP3Quc2l6ZT1lLmxpbmsubGVuZ3RoOnQuc2l6ZT0wLHQuYXRpbWU9bmV3IERhdGUoZS50aW1lc3RhbXApLHQubXRpbWU9bmV3IERhdGUoZS50aW1lc3RhbXApLHQuY3RpbWU9bmV3IERhdGUoZS50aW1lc3RhbXApLHQuc2M9NDA5Nix0LmJsb2Nrcz1NYXRoLmNlaWwodC5zaXplL3Quc2MpLHR9LHNldGF0dHI6ZnVuY3Rpb24oZSx0KXt0Lm1vZGUhPT12b2lkIDAmJihlLm1vZGU9dC5tb2RlKSx0LnRpbWVzdGFtcCE9PXZvaWQgMCYmKGUudGltZXN0YW1wPXQudGltZXN0YW1wKSx0LnNpemUhPT12b2lkIDAmJnEuVmMoZSx0LnNpemUpfSxsb29rdXA6ZnVuY3Rpb24oKXt0aHJvdyBuLnhiWzQ0XX0sbWtub2Q6ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIHEuY3JlYXRlTm9kZShlLHQscixpKX0scmVuYW1lOmZ1bmN0aW9uKGUsdCxyKXtpZihuLmlzRGlyKGUubW9kZSkpe3RyeXt2YXIgaT1uLmxvb2t1cE5vZGUodCxyKX1jYXRjaHt9aWYoaSlmb3IodmFyIG8gaW4gaS5JYSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDU1KX1kZWxldGUgZS5wYXJlbnQuSWFbZS5uYW1lXSxlLnBhcmVudC50aW1lc3RhbXA9RGF0ZS5ub3coKSxlLm5hbWU9cix0LklhW3JdPWUsdC50aW1lc3RhbXA9ZS5wYXJlbnQudGltZXN0YW1wLGUucGFyZW50PXR9LHVubGluazpmdW5jdGlvbihlLHQpe2RlbGV0ZSBlLklhW3RdLGUudGltZXN0YW1wPURhdGUubm93KCl9LHJtZGlyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bi5sb29rdXBOb2RlKGUsdCksaTtmb3IoaSBpbiByLklhKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNTUpO2RlbGV0ZSBlLklhW3RdLGUudGltZXN0YW1wPURhdGUubm93KCl9LHJlYWRkaXI6ZnVuY3Rpb24oZSl7dmFyIHQ9WyIuIiwiLi4iXSxyO2ZvcihyIGluIGUuSWEpZS5JYS5oYXNPd25Qcm9wZXJ0eShyKSYmdC5wdXNoKHIpO3JldHVybiB0fSxzeW1saW5rOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT1xLmNyZWF0ZU5vZGUoZSx0LDQxNDcxLDApLGUubGluaz1yLGV9LHJlYWRsaW5rOmZ1bmN0aW9uKGUpe2lmKCFuLlphKGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7cmV0dXJuIGUubGlua319LHN0cmVhbV9vcHM6e3JlYWQ6ZnVuY3Rpb24oZSx0LHIsaSxvKXt2YXIgbD1lLm5vZGUuSWE7aWYobz49ZS5ub2RlLk1hKXJldHVybiAwO2lmKGU9TWF0aC5taW4oZS5ub2RlLk1hLW8saSksODxlJiZsLnN1YmFycmF5KXQuc2V0KGwuc3ViYXJyYXkobyxvK2UpLHIpO2Vsc2UgZm9yKGk9MDtpPGU7aSsrKXRbcitpXT1sW28raV07cmV0dXJuIGV9LHdyaXRlOmZ1bmN0aW9uKGUsdCxyLGksbyxsKXtpZih0LmJ1ZmZlcj09PUIuYnVmZmVyJiYobD0hMSksIWkpcmV0dXJuIDA7aWYoZT1lLm5vZGUsZS50aW1lc3RhbXA9RGF0ZS5ub3coKSx0LnN1YmFycmF5JiYoIWUuSWF8fGUuSWEuc3ViYXJyYXkpKXtpZihsKXJldHVybiBlLklhPXQuc3ViYXJyYXkocixyK2kpLGUuTWE9aTtpZihlLk1hPT09MCYmbz09PTApcmV0dXJuIGUuSWE9dC5zbGljZShyLHIraSksZS5NYT1pO2lmKG8raTw9ZS5NYSlyZXR1cm4gZS5JYS5zZXQodC5zdWJhcnJheShyLHIraSksbyksaX1pZihxLlViKGUsbytpKSxlLklhLnN1YmFycmF5JiZ0LnN1YmFycmF5KWUuSWEuc2V0KHQuc3ViYXJyYXkocixyK2kpLG8pO2Vsc2UgZm9yKGw9MDtsPGk7bCsrKWUuSWFbbytsXT10W3IrbF07cmV0dXJuIGUuTWE9TWF0aC5tYXgoZS5NYSxvK2kpLGl9LGxsc2VlazpmdW5jdGlvbihlLHQscil7aWYocj09PTE/dCs9ZS5wb3NpdGlvbjpyPT09MiYmbi5pc0ZpbGUoZS5ub2RlLm1vZGUpJiYodCs9ZS5ub2RlLk1hKSwwPnQpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7cmV0dXJuIHR9LGFsbG9jYXRlOmZ1bmN0aW9uKGUsdCxyKXtxLlViKGUubm9kZSx0K3IpLGUubm9kZS5NYT1NYXRoLm1heChlLm5vZGUuTWEsdCtyKX0sbW1hcDpmdW5jdGlvbihlLHQscixpLG8pe2lmKCFuLmlzRmlsZShlLm5vZGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig0Myk7aWYoZT1lLm5vZGUuSWEsbyYyfHxlLmJ1ZmZlciE9PUdlKXtpZigoMDxyfHxyK3Q8ZS5sZW5ndGgpJiYoZS5zdWJhcnJheT9lPWUuc3ViYXJyYXkocixyK3QpOmU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSxyLHIrdCkpLHI9ITAsdD02NTUzNipNYXRoLmNlaWwodC82NTUzNiksKG89VHQoNjU1MzYsdCkpPyhLLmZpbGwoMCxvLG8rdCksdD1vKTp0PTAsIXQpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig0OCk7Qi5zZXQoZSx0KX1lbHNlIHI9ITEsdD1lLmJ5dGVPZmZzZXQ7cmV0dXJue1VjOnQsbGM6cn19LG1zeW5jOmZ1bmN0aW9uKGUsdCxyLGksbyl7aWYoIW4uaXNGaWxlKGUubm9kZS5tb2RlKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQzKTtyZXR1cm4gbyYyfHxxLnN0cmVhbV9vcHMud3JpdGUoZSx0LDAsaSxyLCExKSwwfX19O2Z1bmN0aW9uIG1yKGUsdCxyKXt2YXIgaT0iYWwgIitlO3ZlKGUsZnVuY3Rpb24obyl7b3x8WignTG9hZGluZyBkYXRhIGZpbGUgIicrZSsnIiBmYWlsZWQgKG5vIGFycmF5QnVmZmVyKS4nKSx0KG5ldyBVaW50OEFycmF5KG8pKSxpJiZMZSgpfSxmdW5jdGlvbigpe2lmKHIpcigpO2Vsc2UgdGhyb3cnTG9hZGluZyBkYXRhIGZpbGUgIicrZSsnIiBmYWlsZWQuJ30pLGkmJnJ0KCl9dmFyIG49e3Jvb3Q6bnVsbCxmYjpbXSxTYjp7fSxzdHJlYW1zOltdLFBjOjEsT2E6bnVsbCxSYjoiLyIsQmI6ITEsYmM6ITAsRXJybm9FcnJvcjpudWxsLHhiOnt9LERjOm51bGwsb2I6MCxsb29rdXBQYXRoOihlLHQ9e30pPT57aWYoZT1oZShuLmN3ZCgpLGUpLCFlKXJldHVybntwYXRoOiIiLG5vZGU6bnVsbH07aWYodD1PYmplY3QuYXNzaWduKHt3YjohMCxKYjowfSx0KSw4PHQuSmIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigzMik7ZT1pdChlLnNwbGl0KCIvIikuZmlsdGVyKGQ9PiEhZCksITEpO2Zvcih2YXIgcj1uLnJvb3QsaT0iLyIsbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgbD1vPT09ZS5sZW5ndGgtMTtpZihsJiZ0LnBhcmVudClicmVhaztpZihyPW4ubG9va3VwTm9kZShyLGVbb10pLGk9SihpKyIvIitlW29dKSxuLlZhKHIpJiYoIWx8fGwmJnQud2IpJiYocj1yLmViLnJvb3QpLCFsfHx0Lk5hKXtmb3IobD0wO24uWmEoci5tb2RlKTspaWYocj1uLnJlYWRsaW5rKGkpLGk9aGUoVGUoaSkscikscj1uLmxvb2t1cFBhdGgoaSx7SmI6dC5KYisxfSkubm9kZSw0MDxsKyspdGhyb3cgbmV3IG4uRXJybm9FcnJvcigzMil9fXJldHVybntwYXRoOmksbm9kZTpyfX0sU2E6ZT0+e2Zvcih2YXIgdDs7KXtpZihuLmlzUm9vdChlKSlyZXR1cm4gZT1lLm1vdW50LmRjLHQ/ZVtlLmxlbmd0aC0xXSE9PSIvIj9lKyIvIit0OmUrdDplO3Q9dD9lLm5hbWUrIi8iK3Q6ZS5uYW1lLGU9ZS5wYXJlbnR9fSxBYjooZSx0KT0+e2Zvcih2YXIgcj0wLGk9MDtpPHQubGVuZ3RoO2krKylyPShyPDw1KS1yK3QuY2hhckNvZGVBdChpKXwwO3JldHVybihlK3I+Pj4wKSVuLk9hLmxlbmd0aH0sJGI6ZT0+e3ZhciB0PW4uQWIoZS5wYXJlbnQuaWQsZS5uYW1lKTtlLlhhPW4uT2FbdF0sbi5PYVt0XT1lfSxhYzplPT57dmFyIHQ9bi5BYihlLnBhcmVudC5pZCxlLm5hbWUpO2lmKG4uT2FbdF09PT1lKW4uT2FbdF09ZS5YYTtlbHNlIGZvcih0PW4uT2FbdF07dDspe2lmKHQuWGE9PT1lKXt0LlhhPWUuWGE7YnJlYWt9dD10LlhhfX0sbG9va3VwTm9kZTooZSx0KT0+e3ZhciByPW4uTGMoZSk7aWYocil0aHJvdyBuZXcgbi5FcnJub0Vycm9yKHIsZSk7Zm9yKHI9bi5PYVtuLkFiKGUuaWQsdCldO3I7cj1yLlhhKXt2YXIgaT1yLm5hbWU7aWYoci5wYXJlbnQuaWQ9PT1lLmlkJiZpPT09dClyZXR1cm4gcn1yZXR1cm4gbi5sb29rdXAoZSx0KX0sY3JlYXRlTm9kZTooZSx0LHIsaSk9PihlPW5ldyBuLkZTTm9kZShlLHQscixpKSxuLiRiKGUpLGUpLHViOmU9PntuLmFjKGUpfSxpc1Jvb3Q6ZT0+ZT09PWUucGFyZW50LFZhOmU9PiEhZS5lYixpc0ZpbGU6ZT0+KGUmNjE0NDApPT09MzI3NjgsaXNEaXI6ZT0+KGUmNjE0NDApPT09MTYzODQsWmE6ZT0+KGUmNjE0NDApPT09NDA5NjAsamI6ZT0+KGUmNjE0NDApPT09ODE5MixKYzplPT4oZSY2MTQ0MCk9PT0yNDU3Nixpc0ZJRk86ZT0+KGUmNjE0NDApPT09NDA5Nixpc1NvY2tldDplPT4oZSY0OTE1Mik9PT00OTE1MixFYzp7cjowLCJyKyI6Mix3OjU3NywidysiOjU3OCxhOjEwODksImErIjoxMDkwfSxPYzplPT57dmFyIHQ9bi5FY1tlXTtpZih0eXBlb2YgdD09InVuZGVmaW5lZCIpdGhyb3cgRXJyb3IoIlVua25vd24gZmlsZSBvcGVuIG1vZGU6ICIrZSk7cmV0dXJuIHR9LFZiOmU9Pnt2YXIgdD1bInIiLCJ3IiwicnciXVtlJjNdO3JldHVybiBlJjUxMiYmKHQrPSJ3IiksdH0sVWE6KGUsdCk9PntpZihuLmJjKXJldHVybiAwO2lmKCF0LmluY2x1ZGVzKCJyIil8fGUubW9kZSYyOTIpe2lmKHQuaW5jbHVkZXMoInciKSYmIShlLm1vZGUmMTQ2KXx8dC5pbmNsdWRlcygieCIpJiYhKGUubW9kZSY3MykpcmV0dXJuIDJ9ZWxzZSByZXR1cm4gMjtyZXR1cm4gMH0sTGM6ZT0+e3ZhciB0PW4uVWEoZSwieCIpO3JldHVybiB0fHwoZS5ub2RlX29wcy5sb29rdXA/MDoyKX0sRmI6KGUsdCk9Pnt0cnl7cmV0dXJuIG4ubG9va3VwTm9kZShlLHQpLDIwfWNhdGNoe31yZXR1cm4gbi5VYShlLCJ3eCIpfSxrYjooZSx0LHIpPT57dHJ5e3ZhciBpPW4ubG9va3VwTm9kZShlLHQpfWNhdGNoKG8pe3JldHVybiBvLkphfWlmKGU9bi5VYShlLCJ3eCIpKXJldHVybiBlO2lmKHIpe2lmKCFuLmlzRGlyKGkubW9kZSkpcmV0dXJuIDU0O2lmKG4uaXNSb290KGkpfHxuLlNhKGkpPT09bi5jd2QoKSlyZXR1cm4gMTB9ZWxzZSBpZihuLmlzRGlyKGkubW9kZSkpcmV0dXJuIDMxO3JldHVybiAwfSxNYzooZSx0KT0+ZT9uLlphKGUubW9kZSk/MzI6bi5pc0RpcihlLm1vZGUpJiYobi5WYih0KSE9PSJyInx8dCY1MTIpPzMxOm4uVWEoZSxuLlZiKHQpKTo0NCxpYzo0MDk2LFFjOihlPTAsdD1uLmljKT0+e2Zvcig7ZTw9dDtlKyspaWYoIW4uc3RyZWFtc1tlXSlyZXR1cm4gZTt0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDMzKX0sVGE6ZT0+bi5zdHJlYW1zW2VdLFFiOihlLHQscik9PihuLnBifHwobi5wYj1mdW5jdGlvbigpe3RoaXMubmI9e319LG4ucGIucHJvdG90eXBlPXtvYmplY3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGV9LHNldDpmdW5jdGlvbihpKXt0aGlzLm5vZGU9aX19LGZsYWdzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYi5mbGFnc30sc2V0OmZ1bmN0aW9uKGkpe3RoaXMubmIuZmxhZ3M9aX19LHBvc2l0aW9uOntnZXQgZGQoKXtyZXR1cm4gdGhpcy5uYi5wb3NpdGlvbn0sc2V0OmZ1bmN0aW9uKGkpe3RoaXMubmIucG9zaXRpb249aX19fSksZT1PYmplY3QuYXNzaWduKG5ldyBuLnBiLGUpLHQ9bi5RYyh0LHIpLGUuZmQ9dCxuLnN0cmVhbXNbdF09ZSksd2M6ZT0+e24uc3RyZWFtc1tlXT1udWxsfSx2Yzp7b3BlbjplPT57ZS5zdHJlYW1fb3BzPW4uR2MoZS5ub2RlLnJkZXYpLnN0cmVhbV9vcHMsZS5zdHJlYW1fb3BzLm9wZW4mJmUuc3RyZWFtX29wcy5vcGVuKGUpfSxsbHNlZWs6KCk9Pnt0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDcwKX19LEViOmU9PmU+PjgsamQ6ZT0+ZSYyNTUsV2E6KGUsdCk9PmU8PDh8dCxLYjooZSx0KT0+e24uU2JbZV09e3N0cmVhbV9vcHM6dH19LEdjOmU9Pm4uU2JbZV0sWGI6ZT0+e3ZhciB0PVtdO2ZvcihlPVtlXTtlLmxlbmd0aDspe3ZhciByPWUucG9wKCk7dC5wdXNoKHIpLGUucHVzaC5hcHBseShlLHIuZmIpfXJldHVybiB0fSxmYzooZSx0KT0+e2Z1bmN0aW9uIHIoZCl7cmV0dXJuIG4ub2ItLSx0KGQpfWZ1bmN0aW9uIGkoZCl7aWYoZCl7aWYoIWkuQ2MpcmV0dXJuIGkuQ2M9ITAscihkKX1lbHNlKytsPj1vLmxlbmd0aCYmcihudWxsKX10eXBlb2YgZT09ImZ1bmN0aW9uIiYmKHQ9ZSxlPSExKSxuLm9iKyssMTxuLm9iJiZ0ZSgid2FybmluZzogIituLm9iKyIgRlMuc3luY2ZzIG9wZXJhdGlvbnMgaW4gZmxpZ2h0IGF0IG9uY2UsIHByb2JhYmx5IGp1c3QgZG9pbmcgZXh0cmEgd29yayIpO3ZhciBvPW4uWGIobi5yb290Lm1vdW50KSxsPTA7by5mb3JFYWNoKGQ9PntpZighZC50eXBlLmZjKXJldHVybiBpKG51bGwpO2QudHlwZS5mYyhkLGUsaSl9KX0sbW91bnQ6KGUsdCxyKT0+e3ZhciBpPXI9PT0iLyIsbz0hcjtpZihpJiZuLnJvb3QpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigxMCk7aWYoIWkmJiFvKXt2YXIgbD1uLmxvb2t1cFBhdGgocix7d2I6ITF9KTtpZihyPWwucGF0aCxsPWwubm9kZSxuLlZhKGwpKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMTApO2lmKCFuLmlzRGlyKGwubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig1NCl9cmV0dXJuIHQ9e3R5cGU6ZSxtZDp0LGRjOnIsZmI6W119LGU9ZS5tb3VudCh0KSxlLm1vdW50PXQsdC5yb290PWUsaT9uLnJvb3Q9ZTpsJiYobC5lYj10LGwubW91bnQmJmwubW91bnQuZmIucHVzaCh0KSksZX0scGQ6ZT0+e2lmKGU9bi5sb29rdXBQYXRoKGUse3diOiExfSksIW4uVmEoZS5ub2RlKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDI4KTtlPWUubm9kZTt2YXIgdD1lLmViLHI9bi5YYih0KTtPYmplY3Qua2V5cyhuLk9hKS5mb3JFYWNoKGk9Pntmb3IoaT1uLk9hW2ldO2k7KXt2YXIgbz1pLlhhO3IuaW5jbHVkZXMoaS5tb3VudCkmJm4udWIoaSksaT1vfX0pLGUuZWI9bnVsbCxlLm1vdW50LmZiLnNwbGljZShlLm1vdW50LmZiLmluZGV4T2YodCksMSl9LGxvb2t1cDooZSx0KT0+ZS5ub2RlX29wcy5sb29rdXAoZSx0KSxta25vZDooZSx0LHIpPT57dmFyIGk9bi5sb29rdXBQYXRoKGUse3BhcmVudDohMH0pLm5vZGU7aWYoZT1uZShlKSwhZXx8ZT09PSIuInx8ZT09PSIuLiIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7dmFyIG89bi5GYihpLGUpO2lmKG8pdGhyb3cgbmV3IG4uRXJybm9FcnJvcihvKTtpZighaS5ub2RlX29wcy5ta25vZCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDYzKTtyZXR1cm4gaS5ub2RlX29wcy5ta25vZChpLGUsdCxyKX0sY3JlYXRlOihlLHQpPT5uLm1rbm9kKGUsKHQhPT12b2lkIDA/dDo0MzgpJjQwOTV8MzI3NjgsMCksbWtkaXI6KGUsdCk9Pm4ubWtub2QoZSwodCE9PXZvaWQgMD90OjUxMSkmMTAyM3wxNjM4NCwwKSxrZDooZSx0KT0+e2U9ZS5zcGxpdCgiLyIpO2Zvcih2YXIgcj0iIixpPTA7aTxlLmxlbmd0aDsrK2kpaWYoZVtpXSl7cis9Ii8iK2VbaV07dHJ5e24ubWtkaXIocix0KX1jYXRjaChvKXtpZihvLkphIT0yMCl0aHJvdyBvfX19LGxiOihlLHQscik9Pih0eXBlb2Ygcj09InVuZGVmaW5lZCImJihyPXQsdD00MzgpLG4ubWtub2QoZSx0fDgxOTIscikpLHN5bWxpbms6KGUsdCk9PntpZighaGUoZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig0NCk7dmFyIHI9bi5sb29rdXBQYXRoKHQse3BhcmVudDohMH0pLm5vZGU7aWYoIXIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig0NCk7dD1uZSh0KTt2YXIgaT1uLkZiKHIsdCk7aWYoaSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKGkpO2lmKCFyLm5vZGVfb3BzLnN5bWxpbmspdGhyb3cgbmV3IG4uRXJybm9FcnJvcig2Myk7cmV0dXJuIHIubm9kZV9vcHMuc3ltbGluayhyLHQsZSl9LHJlbmFtZTooZSx0KT0+e3ZhciByPVRlKGUpLGk9VGUodCksbz1uZShlKSxsPW5lKHQpLGQ9bi5sb29rdXBQYXRoKGUse3BhcmVudDohMH0pLG09ZC5ub2RlO2lmKGQ9bi5sb29rdXBQYXRoKHQse3BhcmVudDohMH0pLGQ9ZC5ub2RlLCFtfHwhZCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtpZihtLm1vdW50IT09ZC5tb3VudCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDc1KTt2YXIgZz1uLmxvb2t1cE5vZGUobSxvKTtpZihlPUZ0KGUsaSksZS5jaGFyQXQoMCkhPT0iLiIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7aWYoZT1GdCh0LHIpLGUuY2hhckF0KDApIT09Ii4iKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNTUpO3RyeXt2YXIgdz1uLmxvb2t1cE5vZGUoZCxsKX1jYXRjaHt9aWYoZyE9PXcpe2lmKHQ9bi5pc0RpcihnLm1vZGUpLG89bi5rYihtLG8sdCkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcihvKTtpZihvPXc/bi5rYihkLGwsdCk6bi5GYihkLGwpKXRocm93IG5ldyBuLkVycm5vRXJyb3Iobyk7aWYoIW0ubm9kZV9vcHMucmVuYW1lKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNjMpO2lmKG4uVmEoZyl8fHcmJm4uVmEodykpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigxMCk7aWYoZCE9PW0mJihvPW4uVWEobSwidyIpKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKG8pO24uYWMoZyk7dHJ5e20ubm9kZV9vcHMucmVuYW1lKGcsZCxsKX1jYXRjaChfKXt0aHJvdyBffWZpbmFsbHl7bi4kYihnKX19fSxybWRpcjplPT57dmFyIHQ9bi5sb29rdXBQYXRoKGUse3BhcmVudDohMH0pLm5vZGU7ZT1uZShlKTt2YXIgcj1uLmxvb2t1cE5vZGUodCxlKSxpPW4ua2IodCxlLCEwKTtpZihpKXRocm93IG5ldyBuLkVycm5vRXJyb3IoaSk7aWYoIXQubm9kZV9vcHMucm1kaXIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig2Myk7aWYobi5WYShyKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDEwKTt0Lm5vZGVfb3BzLnJtZGlyKHQsZSksbi51YihyKX0scmVhZGRpcjplPT57aWYoZT1uLmxvb2t1cFBhdGgoZSx7TmE6ITB9KS5ub2RlLCFlLm5vZGVfb3BzLnJlYWRkaXIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig1NCk7cmV0dXJuIGUubm9kZV9vcHMucmVhZGRpcihlKX0sdW5saW5rOmU9Pnt2YXIgdD1uLmxvb2t1cFBhdGgoZSx7cGFyZW50OiEwfSkubm9kZTtpZighdCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtlPW5lKGUpO3ZhciByPW4ubG9va3VwTm9kZSh0LGUpLGk9bi5rYih0LGUsITEpO2lmKGkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcihpKTtpZighdC5ub2RlX29wcy51bmxpbmspdGhyb3cgbmV3IG4uRXJybm9FcnJvcig2Myk7aWYobi5WYShyKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDEwKTt0Lm5vZGVfb3BzLnVubGluayh0LGUpLG4udWIocil9LHJlYWRsaW5rOmU9PntpZihlPW4ubG9va3VwUGF0aChlKS5ub2RlLCFlKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNDQpO2lmKCFlLm5vZGVfb3BzLnJlYWRsaW5rKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMjgpO3JldHVybiBoZShuLlNhKGUucGFyZW50KSxlLm5vZGVfb3BzLnJlYWRsaW5rKGUpKX0sc3RhdDooZSx0KT0+e2lmKGU9bi5sb29rdXBQYXRoKGUse05hOiF0fSkubm9kZSwhZSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtpZighZS5ub2RlX29wcy5nZXRhdHRyKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNjMpO3JldHVybiBlLm5vZGVfb3BzLmdldGF0dHIoZSl9LGxzdGF0OmU9Pm4uc3RhdChlLCEwKSxjaG1vZDooZSx0LHIpPT57aWYoZT10eXBlb2YgZT09InN0cmluZyI/bi5sb29rdXBQYXRoKGUse05hOiFyfSkubm9kZTplLCFlLm5vZGVfb3BzLnNldGF0dHIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig2Myk7ZS5ub2RlX29wcy5zZXRhdHRyKGUse21vZGU6dCY0MDk1fGUubW9kZSYtNDA5Nix0aW1lc3RhbXA6RGF0ZS5ub3coKX0pfSxsY2htb2Q6KGUsdCk9PntuLmNobW9kKGUsdCwhMCl9LGZjaG1vZDooZSx0KT0+e2lmKGU9bi5UYShlKSwhZSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDgpO24uY2htb2QoZS5ub2RlLHQpfSxjaG93bjooZSx0LHIsaSk9PntpZihlPXR5cGVvZiBlPT0ic3RyaW5nIj9uLmxvb2t1cFBhdGgoZSx7TmE6IWl9KS5ub2RlOmUsIWUubm9kZV9vcHMuc2V0YXR0cil0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDYzKTtlLm5vZGVfb3BzLnNldGF0dHIoZSx7dGltZXN0YW1wOkRhdGUubm93KCl9KX0sbGNob3duOihlLHQscik9PntuLmNob3duKGUsdCxyLCEwKX0sZmNob3duOihlLHQscik9PntpZihlPW4uVGEoZSksIWUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtuLmNob3duKGUubm9kZSx0LHIpfSx0cnVuY2F0ZTooZSx0KT0+e2lmKDA+dCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDI4KTtpZihlPXR5cGVvZiBlPT0ic3RyaW5nIj9uLmxvb2t1cFBhdGgoZSx7TmE6ITB9KS5ub2RlOmUsIWUubm9kZV9vcHMuc2V0YXR0cil0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDYzKTtpZihuLmlzRGlyKGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigzMSk7aWYoIW4uaXNGaWxlKGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7dmFyIHI9bi5VYShlLCJ3Iik7aWYocil0aHJvdyBuZXcgbi5FcnJub0Vycm9yKHIpO2Uubm9kZV9vcHMuc2V0YXR0cihlLHtzaXplOnQsdGltZXN0YW1wOkRhdGUubm93KCl9KX0sRmM6KGUsdCk9PntpZihlPW4uVGEoZSksIWUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtpZigoZS5mbGFncyYyMDk3MTU1KT09PTApdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7bi50cnVuY2F0ZShlLm5vZGUsdCl9LFljOihlLHQscik9PntlPW4ubG9va3VwUGF0aChlLHtOYTohMH0pLm5vZGUsZS5ub2RlX29wcy5zZXRhdHRyKGUse3RpbWVzdGFtcDpNYXRoLm1heCh0LHIpfSl9LG9wZW46KGUsdCxyKT0+e2lmKGU9PT0iIil0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtpZih0PXR5cGVvZiB0PT0ic3RyaW5nIj9uLk9jKHQpOnQscj10JjY0Pyh0eXBlb2Ygcj09InVuZGVmaW5lZCI/NDM4OnIpJjQwOTV8MzI3Njg6MCx0eXBlb2YgZT09Im9iamVjdCIpdmFyIGk9ZTtlbHNle2U9SihlKTt0cnl7aT1uLmxvb2t1cFBhdGgoZSx7TmE6ISh0JjEzMTA3Mil9KS5ub2RlfWNhdGNoe319dmFyIG89ITE7aWYodCY2NClpZihpKXtpZih0JjEyOCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDIwKX1lbHNlIGk9bi5ta25vZChlLHIsMCksbz0hMDtpZighaSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtpZihuLmpiKGkubW9kZSkmJih0Jj0tNTEzKSx0JjY1NTM2JiYhbi5pc0RpcihpLm1vZGUpKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNTQpO2lmKCFvJiYocj1uLk1jKGksdCkpKXRocm93IG5ldyBuLkVycm5vRXJyb3Iocik7cmV0dXJuIHQmNTEyJiYhbyYmbi50cnVuY2F0ZShpLDApLHQmPS0xMzE3MTMsaT1uLlFiKHtub2RlOmkscGF0aDpuLlNhKGkpLGZsYWdzOnQsc2Vla2FibGU6ITAscG9zaXRpb246MCxzdHJlYW1fb3BzOmkuc3RyZWFtX29wcyxYYzpbXSxlcnJvcjohMX0pLGkuc3RyZWFtX29wcy5vcGVuJiZpLnN0cmVhbV9vcHMub3BlbihpKSwhcy5sb2dSZWFkRmlsZXN8fHQmMXx8KG4uSWJ8fChuLkliPXt9KSxlIGluIG4uSWJ8fChuLkliW2VdPTEpKSxpfSxjbG9zZTplPT57aWYobi5jYihlKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDgpO2UuemImJihlLnpiPW51bGwpO3RyeXtlLnN0cmVhbV9vcHMuY2xvc2UmJmUuc3RyZWFtX29wcy5jbG9zZShlKX1jYXRjaCh0KXt0aHJvdyB0fWZpbmFsbHl7bi53YyhlLmZkKX1lLmZkPW51bGx9LGNiOmU9PmUuZmQ9PT1udWxsLGxsc2VlazooZSx0LHIpPT57aWYobi5jYihlKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDgpO2lmKCFlLnNlZWthYmxlfHwhZS5zdHJlYW1fb3BzLmxsc2Vlayl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDcwKTtpZihyIT0wJiZyIT0xJiZyIT0yKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMjgpO3JldHVybiBlLnBvc2l0aW9uPWUuc3RyZWFtX29wcy5sbHNlZWsoZSx0LHIpLGUuWGM9W10sZS5wb3NpdGlvbn0scmVhZDooZSx0LHIsaSxvKT0+e2lmKDA+aXx8MD5vKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMjgpO2lmKG4uY2IoZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtpZigoZS5mbGFncyYyMDk3MTU1KT09PTEpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtpZihuLmlzRGlyKGUubm9kZS5tb2RlKSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDMxKTtpZighZS5zdHJlYW1fb3BzLnJlYWQpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7dmFyIGw9dHlwZW9mIG8hPSJ1bmRlZmluZWQiO2lmKCFsKW89ZS5wb3NpdGlvbjtlbHNlIGlmKCFlLnNlZWthYmxlKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNzApO3JldHVybiB0PWUuc3RyZWFtX29wcy5yZWFkKGUsdCxyLGksbyksbHx8KGUucG9zaXRpb24rPXQpLHR9LHdyaXRlOihlLHQscixpLG8sbCk9PntpZigwPml8fDA+byl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDI4KTtpZihuLmNiKGUpKXRocm93IG5ldyBuLkVycm5vRXJyb3IoOCk7aWYoKGUuZmxhZ3MmMjA5NzE1NSk9PT0wKXRocm93IG5ldyBuLkVycm5vRXJyb3IoOCk7aWYobi5pc0RpcihlLm5vZGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigzMSk7aWYoIWUuc3RyZWFtX29wcy53cml0ZSl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDI4KTtlLnNlZWthYmxlJiZlLmZsYWdzJjEwMjQmJm4ubGxzZWVrKGUsMCwyKTt2YXIgZD10eXBlb2YgbyE9InVuZGVmaW5lZCI7aWYoIWQpbz1lLnBvc2l0aW9uO2Vsc2UgaWYoIWUuc2Vla2FibGUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig3MCk7cmV0dXJuIHQ9ZS5zdHJlYW1fb3BzLndyaXRlKGUsdCxyLGksbyxsKSxkfHwoZS5wb3NpdGlvbis9dCksdH0sYWxsb2NhdGU6KGUsdCxyKT0+e2lmKG4uY2IoZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtpZigwPnR8fDA+PXIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOCk7aWYoKGUuZmxhZ3MmMjA5NzE1NSk9PT0wKXRocm93IG5ldyBuLkVycm5vRXJyb3IoOCk7aWYoIW4uaXNGaWxlKGUubm9kZS5tb2RlKSYmIW4uaXNEaXIoZS5ub2RlLm1vZGUpKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNDMpO2lmKCFlLnN0cmVhbV9vcHMuYWxsb2NhdGUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcigxMzgpO2Uuc3RyZWFtX29wcy5hbGxvY2F0ZShlLHQscil9LG1tYXA6KGUsdCxyLGksbyk9PntpZigoaSYyKSE9PTAmJihvJjIpPT09MCYmKGUuZmxhZ3MmMjA5NzE1NSkhPT0yKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMik7aWYoKGUuZmxhZ3MmMjA5NzE1NSk9PT0xKXRocm93IG5ldyBuLkVycm5vRXJyb3IoMik7aWYoIWUuc3RyZWFtX29wcy5tbWFwKXRocm93IG5ldyBuLkVycm5vRXJyb3IoNDMpO3JldHVybiBlLnN0cmVhbV9vcHMubW1hcChlLHQscixpLG8pfSxtc3luYzooZSx0LHIsaSxvKT0+ZSYmZS5zdHJlYW1fb3BzLm1zeW5jP2Uuc3RyZWFtX29wcy5tc3luYyhlLHQscixpLG8pOjAsbGQ6KCk9PjAsY2M6KGUsdCxyKT0+e2lmKCFlLnN0cmVhbV9vcHMuY2MpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig1OSk7cmV0dXJuIGUuc3RyZWFtX29wcy5jYyhlLHQscil9LHJlYWRGaWxlOihlLHQ9e30pPT57aWYodC5mbGFncz10LmZsYWdzfHwwLHQuZW5jb2Rpbmc9dC5lbmNvZGluZ3x8ImJpbmFyeSIsdC5lbmNvZGluZyE9PSJ1dGY4IiYmdC5lbmNvZGluZyE9PSJiaW5hcnkiKXRocm93IEVycm9yKCdJbnZhbGlkIGVuY29kaW5nIHR5cGUgIicrdC5lbmNvZGluZysnIicpO3ZhciByLGk9bi5vcGVuKGUsdC5mbGFncyk7ZT1uLnN0YXQoZSkuc2l6ZTt2YXIgbz1uZXcgVWludDhBcnJheShlKTtyZXR1cm4gbi5yZWFkKGksbywwLGUsMCksdC5lbmNvZGluZz09PSJ1dGY4Ij9yPW1lKG8sMCk6dC5lbmNvZGluZz09PSJiaW5hcnkiJiYocj1vKSxuLmNsb3NlKGkpLHJ9LHdyaXRlRmlsZTooZSx0LHI9e30pPT57aWYoci5mbGFncz1yLmZsYWdzfHw1NzcsZT1uLm9wZW4oZSxyLmZsYWdzLHIubW9kZSksdHlwZW9mIHQ9PSJzdHJpbmciKXt2YXIgaT1uZXcgVWludDhBcnJheShmZSh0KSsxKTt0PXJlKHQsaSwwLGkubGVuZ3RoKSxuLndyaXRlKGUsaSwwLHQsdm9pZCAwLHIudWMpfWVsc2UgaWYoQXJyYXlCdWZmZXIuaXNWaWV3KHQpKW4ud3JpdGUoZSx0LDAsdC5ieXRlTGVuZ3RoLHZvaWQgMCxyLnVjKTtlbHNlIHRocm93IEVycm9yKCJVbnN1cHBvcnRlZCBkYXRhIHR5cGUiKTtuLmNsb3NlKGUpfSxjd2Q6KCk9Pm4uUmIsY2hkaXI6ZT0+e2lmKGU9bi5sb29rdXBQYXRoKGUse05hOiEwfSksZS5ub2RlPT09bnVsbCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDQ0KTtpZighbi5pc0RpcihlLm5vZGUubW9kZSkpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig1NCk7dmFyIHQ9bi5VYShlLm5vZGUsIngiKTtpZih0KXRocm93IG5ldyBuLkVycm5vRXJyb3IodCk7bi5SYj1lLnBhdGh9LHljOigpPT57bi5ta2RpcigiL3RtcCIpLG4ubWtkaXIoIi9ob21lIiksbi5ta2RpcigiL2hvbWUvd2ViX3VzZXIiKX0seGM6KCk9PntuLm1rZGlyKCIvZGV2Iiksbi5LYihuLldhKDEsMykse3JlYWQ6KCk9PjAsd3JpdGU6KHQscixpLG8pPT5vfSksbi5sYigiL2Rldi9udWxsIixuLldhKDEsMykpLFJ0KG4uV2EoNSwwKSxkciksUnQobi5XYSg2LDApLHByKSxuLmxiKCIvZGV2L3R0eSIsbi5XYSg1LDApKSxuLmxiKCIvZGV2L3R0eTEiLG4uV2EoNiwwKSk7dmFyIGU9Y3IoKTtuLlFhKCIvZGV2IiwicmFuZG9tIixlKSxuLlFhKCIvZGV2IiwidXJhbmRvbSIsZSksbi5ta2RpcigiL2Rldi9zaG0iKSxuLm1rZGlyKCIvZGV2L3NobS90bXAiKX0sQWM6KCk9PntuLm1rZGlyKCIvcHJvYyIpO3ZhciBlPW4ubWtkaXIoIi9wcm9jL3NlbGYiKTtuLm1rZGlyKCIvcHJvYy9zZWxmL2ZkIiksbi5tb3VudCh7bW91bnQ6KCk9Pnt2YXIgdD1uLmNyZWF0ZU5vZGUoZSwiZmQiLDE2ODk1LDczKTtyZXR1cm4gdC5ub2RlX29wcz17bG9va3VwOihyLGkpPT57dmFyIG89bi5UYSgraSk7aWYoIW8pdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtyZXR1cm4gcj17cGFyZW50Om51bGwsbW91bnQ6e2RjOiJmYWtlIn0sbm9kZV9vcHM6e3JlYWRsaW5rOigpPT5vLnBhdGh9fSxyLnBhcmVudD1yfX0sdH19LHt9LCIvcHJvYy9zZWxmL2ZkIil9LEJjOigpPT57cy5zdGRpbj9uLlFhKCIvZGV2Iiwic3RkaW4iLHMuc3RkaW4pOm4uc3ltbGluaygiL2Rldi90dHkiLCIvZGV2L3N0ZGluIikscy5zdGRvdXQ/bi5RYSgiL2RldiIsInN0ZG91dCIsbnVsbCxzLnN0ZG91dCk6bi5zeW1saW5rKCIvZGV2L3R0eSIsIi9kZXYvc3Rkb3V0Iikscy5zdGRlcnI/bi5RYSgiL2RldiIsInN0ZGVyciIsbnVsbCxzLnN0ZGVycik6bi5zeW1saW5rKCIvZGV2L3R0eTEiLCIvZGV2L3N0ZGVyciIpLG4ub3BlbigiL2Rldi9zdGRpbiIsMCksbi5vcGVuKCIvZGV2L3N0ZG91dCIsMSksbi5vcGVuKCIvZGV2L3N0ZGVyciIsMSl9LFRiOigpPT57bi5FcnJub0Vycm9yfHwobi5FcnJub0Vycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5ub2RlPXQsdGhpcy5XYz1mdW5jdGlvbihyKXt0aGlzLkphPXJ9LHRoaXMuV2MoZSksdGhpcy5tZXNzYWdlPSJGUyBlcnJvciJ9LG4uRXJybm9FcnJvci5wcm90b3R5cGU9RXJyb3IoKSxuLkVycm5vRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPW4uRXJybm9FcnJvcixbNDRdLmZvckVhY2goZT0+e24ueGJbZV09bmV3IG4uRXJybm9FcnJvcihlKSxuLnhiW2VdLnN0YWNrPSI8Z2VuZXJpYyBlcnJvciwgbm8gc3RhY2s+In0pKX0sZWM6KCk9PntuLlRiKCksbi5PYT1BcnJheSg0MDk2KSxuLm1vdW50KHEse30sIi8iKSxuLnljKCksbi54YygpLG4uQWMoKSxuLkRjPXtNRU1GUzpxfX0saWI6KGUsdCxyKT0+e24uaWIuQmI9ITAsbi5UYigpLHMuc3RkaW49ZXx8cy5zdGRpbixzLnN0ZG91dD10fHxzLnN0ZG91dCxzLnN0ZGVycj1yfHxzLnN0ZGVycixuLkJjKCl9LG5kOigpPT57bi5pYi5CYj0hMTtmb3IodmFyIGU9MDtlPG4uc3RyZWFtcy5sZW5ndGg7ZSsrKXt2YXIgdD1uLnN0cmVhbXNbZV07dCYmbi5jbG9zZSh0KX19LHliOihlLHQpPT57dmFyIHI9MDtyZXR1cm4gZSYmKHJ8PTM2NSksdCYmKHJ8PTE0Nikscn0sYmQ6KGUsdCk9PihlPW4ucmIoZSx0KSxlLmV4aXN0cz9lLm9iamVjdDpudWxsKSxyYjooZSx0KT0+e3RyeXt2YXIgcj1uLmxvb2t1cFBhdGgoZSx7TmE6IXR9KTtlPXIucGF0aH1jYXRjaHt9dmFyIGk9e2lzUm9vdDohMSxleGlzdHM6ITEsZXJyb3I6MCxuYW1lOm51bGwscGF0aDpudWxsLG9iamVjdDpudWxsLFJjOiExLFRjOm51bGwsU2M6bnVsbH07dHJ5e3I9bi5sb29rdXBQYXRoKGUse3BhcmVudDohMH0pLGkuUmM9ITAsaS5UYz1yLnBhdGgsaS5TYz1yLm5vZGUsaS5uYW1lPW5lKGUpLHI9bi5sb29rdXBQYXRoKGUse05hOiF0fSksaS5leGlzdHM9ITAsaS5wYXRoPXIucGF0aCxpLm9iamVjdD1yLm5vZGUsaS5uYW1lPXIubm9kZS5uYW1lLGkuaXNSb290PXIucGF0aD09PSIvIn1jYXRjaChvKXtpLmVycm9yPW8uSmF9cmV0dXJuIGl9LCRjOihlLHQpPT57Zm9yKGU9dHlwZW9mIGU9PSJzdHJpbmciP2U6bi5TYShlKSx0PXQuc3BsaXQoIi8iKS5yZXZlcnNlKCk7dC5sZW5ndGg7KXt2YXIgcj10LnBvcCgpO2lmKHIpe3ZhciBpPUooZSsiLyIrcik7dHJ5e24ubWtkaXIoaSl9Y2F0Y2h7fWU9aX19cmV0dXJuIGl9LHpjOihlLHQscixpLG8pPT4oZT10eXBlb2YgZT09InN0cmluZyI/ZTpuLlNhKGUpLHQ9SihlKyIvIit0KSxuLmNyZWF0ZSh0LG4ueWIoaSxvKSkpLHRiOihlLHQscixpLG8sbCk9Pnt2YXIgZD10O2lmKGUmJihlPXR5cGVvZiBlPT0ic3RyaW5nIj9lOm4uU2EoZSksZD10P0ooZSsiLyIrdCk6ZSksZT1uLnliKGksbyksZD1uLmNyZWF0ZShkLGUpLHIpe2lmKHR5cGVvZiByPT0ic3RyaW5nIil7Zm9yKHQ9QXJyYXkoci5sZW5ndGgpLGk9MCxvPXIubGVuZ3RoO2k8bzsrK2kpdFtpXT1yLmNoYXJDb2RlQXQoaSk7cj10fW4uY2htb2QoZCxlfDE0NiksdD1uLm9wZW4oZCw1NzcpLG4ud3JpdGUodCxyLDAsci5sZW5ndGgsMCxsKSxuLmNsb3NlKHQpLG4uY2htb2QoZCxlKX1yZXR1cm4gZH0sUWE6KGUsdCxyLGkpPT57ZT1mcih0eXBlb2YgZT09InN0cmluZyI/ZTpuLlNhKGUpLHQpLHQ9bi55YighIXIsISFpKSxuLlFhLkVifHwobi5RYS5FYj02NCk7dmFyIG89bi5XYShuLlFhLkViKyssMCk7cmV0dXJuIG4uS2Iobyx7b3BlbjpsPT57bC5zZWVrYWJsZT0hMX0sY2xvc2U6KCk9PntpJiZpLmJ1ZmZlciYmaS5idWZmZXIubGVuZ3RoJiZpKDEwKX0scmVhZDoobCxkLG0sZyk9Pntmb3IodmFyIHc9MCxfPTA7XzxnO18rKyl7dHJ5e3ZhciBEPXIoKX1jYXRjaHt0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDI5KX1pZihEPT09dm9pZCAwJiZ3PT09MCl0aHJvdyBuZXcgbi5FcnJub0Vycm9yKDYpO2lmKEQ9PW51bGwpYnJlYWs7dysrLGRbbStfXT1EfXJldHVybiB3JiYobC5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpKSx3fSx3cml0ZToobCxkLG0sZyk9Pntmb3IodmFyIHc9MDt3PGc7dysrKXRyeXtpKGRbbSt3XSl9Y2F0Y2h7dGhyb3cgbmV3IG4uRXJybm9FcnJvcigyOSl9cmV0dXJuIGcmJihsLm5vZGUudGltZXN0YW1wPURhdGUubm93KCkpLHd9fSksbi5sYihlLHQsbyl9LFdiOmU9PntpZihlLkNifHxlLktjfHxlLmxpbmt8fGUuSWEpcmV0dXJuITA7aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT0idW5kZWZpbmVkIil0aHJvdyBFcnJvcigiTGF6eSBsb2FkaW5nIHNob3VsZCBoYXZlIGJlZW4gcGVyZm9ybWVkIChjb250ZW50cyBzZXQpIGluIGNyZWF0ZUxhenlGaWxlLCBidXQgaXQgd2FzIG5vdC4gTGF6eSBsb2FkaW5nIG9ubHkgd29ya3MgaW4gd2ViIHdvcmtlcnMuIFVzZSAtLWVtYmVkLWZpbGUgb3IgLS1wcmVsb2FkLWZpbGUgaW4gZW1jYyBvbiB0aGUgbWFpbiB0aHJlYWQuIik7aWYoRWUpdHJ5e2UuSWE9T2UoRWUoZS51cmwpLCEwKSxlLk1hPWUuSWEubGVuZ3RofWNhdGNoe3Rocm93IG5ldyBuLkVycm5vRXJyb3IoMjkpfWVsc2UgdGhyb3cgRXJyb3IoIkNhbm5vdCBsb2FkIHdpdGhvdXQgcmVhZCgpIG9yIFhNTEh0dHBSZXF1ZXN0LiIpfSxaYzooZSx0LHIsaSxvKT0+e2Z1bmN0aW9uIGwoKXt0aGlzLkRiPSExLHRoaXMuaGI9W119aWYobC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHcpe2lmKCEodz50aGlzLmxlbmd0aC0xfHwwPncpKXt2YXIgXz13JXRoaXMuY2h1bmtTaXplO3JldHVybiB0aGlzLlpiKHcvdGhpcy5jaHVua1NpemV8MClbX119fSxsLnByb3RvdHlwZS5oYz1mdW5jdGlvbih3KXt0aGlzLlpiPXd9LGwucHJvdG90eXBlLk9iPWZ1bmN0aW9uKCl7dmFyIHc9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKHcub3BlbigiSEVBRCIsciwhMSksdy5zZW5kKG51bGwpLCEoMjAwPD13LnN0YXR1cyYmMzAwPncuc3RhdHVzfHx3LnN0YXR1cz09PTMwNCkpdGhyb3cgRXJyb3IoIkNvdWxkbid0IGxvYWQgIityKyIuIFN0YXR1czogIit3LnN0YXR1cyk7dmFyIF89TnVtYmVyKHcuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtbGVuZ3RoIikpLEQsTj0oRD13LmdldFJlc3BvbnNlSGVhZGVyKCJBY2NlcHQtUmFuZ2VzIikpJiZEPT09ImJ5dGVzIjt3PShEPXcuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtRW5jb2RpbmciKSkmJkQ9PT0iZ3ppcCI7dmFyIFQ9MTA0ODU3NjtOfHwoVD1fKTt2YXIgUD10aGlzO1AuaGMoc2U9Pnt2YXIgcGU9c2UqVCxhZT0oc2UrMSkqVC0xO2lmKGFlPU1hdGgubWluKGFlLF8tMSksdHlwZW9mIFAuaGJbc2VdPT0idW5kZWZpbmVkIil7dmFyIGx0PVAuaGI7aWYocGU+YWUpdGhyb3cgRXJyb3IoImludmFsaWQgcmFuZ2UgKCIrcGUrIiwgIithZSsiKSBvciBubyBieXRlcyByZXF1ZXN0ZWQhIik7aWYoYWU+Xy0xKXRocm93IEVycm9yKCJvbmx5ICIrXysiIGJ5dGVzIGF2YWlsYWJsZSEgcHJvZ3JhbW1lciBlcnJvciEiKTt2YXIgVT1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoVS5vcGVuKCJHRVQiLHIsITEpLF8hPT1UJiZVLnNldFJlcXVlc3RIZWFkZXIoIlJhbmdlIiwiYnl0ZXM9IitwZSsiLSIrYWUpLFUucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciIsVS5vdmVycmlkZU1pbWVUeXBlJiZVLm92ZXJyaWRlTWltZVR5cGUoInRleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQiKSxVLnNlbmQobnVsbCksISgyMDA8PVUuc3RhdHVzJiYzMDA+VS5zdGF0dXN8fFUuc3RhdHVzPT09MzA0KSl0aHJvdyBFcnJvcigiQ291bGRuJ3QgbG9hZCAiK3IrIi4gU3RhdHVzOiAiK1Uuc3RhdHVzKTtwZT1VLnJlc3BvbnNlIT09dm9pZCAwP25ldyBVaW50OEFycmF5KFUucmVzcG9uc2V8fFtdKTpPZShVLnJlc3BvbnNlVGV4dHx8IiIsITApLGx0W3NlXT1wZX1pZih0eXBlb2YgUC5oYltzZV09PSJ1bmRlZmluZWQiKXRocm93IEVycm9yKCJkb1hIUiBmYWlsZWQhIik7cmV0dXJuIFAuaGJbc2VdfSksKHd8fCFfKSYmKFQ9Xz0xLFQ9Xz10aGlzLlpiKDApLmxlbmd0aCxSZSgiTGF6eUZpbGVzIG9uIGd6aXAgZm9yY2VzIGRvd25sb2FkIG9mIHRoZSB3aG9sZSBmaWxlIHdoZW4gbGVuZ3RoIGlzIGFjY2Vzc2VkIikpLHRoaXMua2M9Xyx0aGlzLmpjPVQsdGhpcy5EYj0hMH0sdHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT0idW5kZWZpbmVkIil7aWYoIVIpdGhyb3ciQ2Fubm90IGRvIHN5bmNocm9ub3VzIGJpbmFyeSBYSFJzIG91dHNpZGUgd2Vid29ya2VycyBpbiBtb2Rlcm4gYnJvd3NlcnMuIFVzZSAtLWVtYmVkLWZpbGUgb3IgLS1wcmVsb2FkLWZpbGUgaW4gZW1jYyI7dmFyIGQ9bmV3IGw7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZCx7bGVuZ3RoOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5EYnx8dGhpcy5PYigpLHRoaXMua2N9fSxjaHVua1NpemU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkRifHx0aGlzLk9iKCksdGhpcy5qY319fSksZD17Q2I6ITEsSWE6ZH19ZWxzZSBkPXtDYjohMSx1cmw6cn07dmFyIG09bi56YyhlLHQsZCxpLG8pO2QuSWE/bS5JYT1kLklhOmQudXJsJiYobS5JYT1udWxsLG0udXJsPWQudXJsKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhtLHtNYTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSWEubGVuZ3RofX19KTt2YXIgZz17fTtyZXR1cm4gT2JqZWN0LmtleXMobS5zdHJlYW1fb3BzKS5mb3JFYWNoKHc9Pnt2YXIgXz1tLnN0cmVhbV9vcHNbd107Z1t3XT1mdW5jdGlvbigpe3JldHVybiBuLldiKG0pLF8uYXBwbHkobnVsbCxhcmd1bWVudHMpfX0pLGcucmVhZD0odyxfLEQsTixUKT0+e2lmKG4uV2IobSksdz13Lm5vZGUuSWEsVD49dy5sZW5ndGgpcmV0dXJuIDA7aWYoTj1NYXRoLm1pbih3Lmxlbmd0aC1ULE4pLHcuc2xpY2UpZm9yKHZhciBQPTA7UDxOO1ArKylfW0QrUF09d1tUK1BdO2Vsc2UgZm9yKFA9MDtQPE47UCsrKV9bRCtQXT13LmdldChUK1ApO3JldHVybiBOfSxtLnN0cmVhbV9vcHM9ZyxtfSxhZDooZSx0LHIsaSxvLGwsZCxtLGcsdyk9PntmdW5jdGlvbiBfKE4pe2Z1bmN0aW9uIFQoUCl7dyYmdygpLG18fG4udGIoZSx0LFAsaSxvLGcpLGwmJmwoKSxMZSgpfWJyLmdkKE4sRCxULCgpPT57ZCYmZCgpLExlKCl9KXx8VChOKX12YXIgRD10P2hlKEooZSsiLyIrdCkpOmU7cnQoKSx0eXBlb2Ygcj09InN0cmluZyI/bXIocixOPT5fKE4pLGQpOl8ocil9LGluZGV4ZWREQjooKT0+d2luZG93LmluZGV4ZWREQnx8d2luZG93Lm1vekluZGV4ZWREQnx8d2luZG93LndlYmtpdEluZGV4ZWREQnx8d2luZG93Lm1zSW5kZXhlZERCLExiOigpPT4iRU1fRlNfIit3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsTWI6MjAsYmI6IkZJTEVfREFUQSIsb2Q6KGUsdCxyKT0+e3Q9dHx8KCgpPT57fSkscj1yfHwoKCk9Pnt9KTt2YXIgaT1uLmluZGV4ZWREQigpO3RyeXt2YXIgbz1pLm9wZW4obi5MYigpLG4uTWIpfWNhdGNoKGwpe3JldHVybiByKGwpfW8ub251cGdyYWRlbmVlZGVkPSgpPT57UmUoImNyZWF0aW5nIGRiIiksby5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUobi5iYil9LG8ub25zdWNjZXNzPSgpPT57dmFyIGw9by5yZXN1bHQudHJhbnNhY3Rpb24oW24uYmJdLCJyZWFkd3JpdGUiKSxkPWwub2JqZWN0U3RvcmUobi5iYiksbT0wLGc9MCx3PWUubGVuZ3RoO2UuZm9yRWFjaChfPT57Xz1kLnB1dChuLnJiKF8pLm9iamVjdC5JYSxfKSxfLm9uc3VjY2Vzcz0oKT0+e20rKyxtK2c9PXcmJihnPT0wP3QoKTpyKCkpfSxfLm9uZXJyb3I9KCk9PntnKyssbStnPT13JiYoZz09MD90KCk6cigpKX19KSxsLm9uZXJyb3I9cn0sby5vbmVycm9yPXJ9LGhkOihlLHQscik9Pnt0PXR8fCgoKT0+e30pLHI9cnx8KCgpPT57fSk7dmFyIGk9bi5pbmRleGVkREIoKTt0cnl7dmFyIG89aS5vcGVuKG4uTGIoKSxuLk1iKX1jYXRjaChsKXtyZXR1cm4gcihsKX1vLm9udXBncmFkZW5lZWRlZD1yLG8ub25zdWNjZXNzPSgpPT57dmFyIGw9by5yZXN1bHQ7dHJ5e3ZhciBkPWwudHJhbnNhY3Rpb24oW24uYmJdLCJyZWFkb25seSIpfWNhdGNoKEQpe3IoRCk7cmV0dXJufXZhciBtPWQub2JqZWN0U3RvcmUobi5iYiksZz0wLHc9MCxfPWUubGVuZ3RoO2UuZm9yRWFjaChEPT57dmFyIE49bS5nZXQoRCk7Ti5vbnN1Y2Nlc3M9KCk9PntuLnJiKEQpLmV4aXN0cyYmbi51bmxpbmsoRCksbi50YihUZShEKSxuZShEKSxOLnJlc3VsdCwhMCwhMCwhMCksZysrLGcrdz09XyYmKHc9PTA/dCgpOnIoKSl9LE4ub25lcnJvcj0oKT0+e3crKyxnK3c9PV8mJih3PT0wP3QoKTpyKCkpfX0pLGQub25lcnJvcj1yfSxvLm9uZXJyb3I9cn19O2Z1bmN0aW9uIGRlKGUsdCxyKXtpZih0LmNoYXJBdCgwKT09PSIvIilyZXR1cm4gdDtpZihlPT09LTEwMCllPW4uY3dkKCk7ZWxzZXtpZihlPW4uVGEoZSksIWUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtlPWUucGF0aH1pZih0Lmxlbmd0aD09MCl7aWYoIXIpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig0NCk7cmV0dXJuIGV9cmV0dXJuIEooZSsiLyIrdCl9ZnVuY3Rpb24geGUoZSx0LHIpe3RyeXt2YXIgaT1lKHQpfWNhdGNoKG8pe2lmKG8mJm8ubm9kZSYmSih0KSE9PUoobi5TYShvLm5vZGUpKSlyZXR1cm4tNTQ7dGhyb3cgb31yZXR1cm4gdltyPj4yXT1pLmRldix2W3IrND4+Ml09MCx2W3IrOD4+Ml09aS5pbm8sdltyKzEyPj4yXT1pLm1vZGUsdltyKzE2Pj4yXT1pLm5saW5rLHZbcisyMD4+Ml09aS51aWQsdltyKzI0Pj4yXT1pLmdpZCx2W3IrMjg+PjJdPWkucmRldix2W3IrMzI+PjJdPTAsJD1baS5zaXplPj4+MCwoRj1pLnNpemUsMTw9K01hdGguYWJzKEYpPzA8Rj8oTWF0aC5taW4oK01hdGguZmxvb3IoRi80Mjk0OTY3Mjk2KSw0Mjk0OTY3Mjk1KXwwKT4+PjA6fn4rTWF0aC5jZWlsKChGLSsofn5GPj4+MCkpLzQyOTQ5NjcyOTYpPj4+MDowKV0sdltyKzQwPj4yXT0kWzBdLHZbcis0ND4+Ml09JFsxXSx2W3IrNDg+PjJdPTQwOTYsdltyKzUyPj4yXT1pLmJsb2Nrcyx2W3IrNTY+PjJdPWkuYXRpbWUuZ2V0VGltZSgpLzFlM3wwLHZbcis2MD4+Ml09MCx2W3IrNjQ+PjJdPWkubXRpbWUuZ2V0VGltZSgpLzFlM3wwLHZbcis2OD4+Ml09MCx2W3IrNzI+PjJdPWkuY3RpbWUuZ2V0VGltZSgpLzFlM3wwLHZbcis3Nj4+Ml09MCwkPVtpLmlubz4+PjAsKEY9aS5pbm8sMTw9K01hdGguYWJzKEYpPzA8Rj8oTWF0aC5taW4oK01hdGguZmxvb3IoRi80Mjk0OTY3Mjk2KSw0Mjk0OTY3Mjk1KXwwKT4+PjA6fn4rTWF0aC5jZWlsKChGLSsofn5GPj4+MCkpLzQyOTQ5NjcyOTYpPj4+MDowKV0sdltyKzgwPj4yXT0kWzBdLHZbcis4ND4+Ml09JFsxXSwwfXZhciBVZT12b2lkIDA7ZnVuY3Rpb24gV2UoKXtyZXR1cm4gVWUrPTQsdltVZS00Pj4yXX1mdW5jdGlvbiBpZShlKXtpZihlPW4uVGEoZSksIWUpdGhyb3cgbmV3IG4uRXJybm9FcnJvcig4KTtyZXR1cm4gZX1mdW5jdGlvbiB3cihlLHQscil7ZnVuY3Rpb24gaShnKXtyZXR1cm4oZz1nLnRvVGltZVN0cmluZygpLm1hdGNoKC9cKChbQS1aYS16IF0rKVwpJC8pKT9nWzFdOiJHTVQifXZhciBvPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxsPW5ldyBEYXRlKG8sMCwxKSxkPW5ldyBEYXRlKG8sNiwxKTtvPWwuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgbT1kLmdldFRpbWV6b25lT2Zmc2V0KCk7dltlPj4yXT02MCpNYXRoLm1heChvLG0pLHZbdD4+Ml09TnVtYmVyKG8hPW0pLGU9aShsKSx0PWkoZCksZT12dChlKSx0PXZ0KHQpLG08bz8oQ1tyPj4yXT1lLENbcis0Pj4yXT10KTooQ1tyPj4yXT10LENbcis0Pj4yXT1lKX1mdW5jdGlvbiBvdChlLHQscil7b3QudGN8fChvdC50Yz0hMCx3cihlLHQscikpfXZhciBOdDtOdD14PygpPT57dmFyIGU9cHJvY2Vzcy5ocnRpbWUoKTtyZXR1cm4gMWUzKmVbMF0rZVsxXS8xZTZ9OigpPT5wZXJmb3JtYW5jZS5ub3coKTt2YXIgc3Q9e307ZnVuY3Rpb24gUHQoKXtpZighYXQpe3ZhciBlPXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6KHR5cGVvZiBuYXZpZ2F0b3I9PSJvYmplY3QiJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdfHwiQyIpLnJlcGxhY2UoIi0iLCJfIikrIi5VVEYtOCIsXzpXfHwiLi90aGlzLnByb2dyYW0ifSx0O2Zvcih0IGluIHN0KXN0W3RdPT09dm9pZCAwP2RlbGV0ZSBlW3RdOmVbdF09c3RbdF07dmFyIHI9W107Zm9yKHQgaW4gZSlyLnB1c2godCsiPSIrZVt0XSk7YXQ9cn1yZXR1cm4gYXR9dmFyIGF0O2Z1bmN0aW9uIEx0KGUsdCxyLGkpe2V8fChlPXRoaXMpLHRoaXMucGFyZW50PWUsdGhpcy5tb3VudD1lLm1vdW50LHRoaXMuZWI9bnVsbCx0aGlzLmlkPW4uUGMrKyx0aGlzLm5hbWU9dCx0aGlzLm1vZGU9cix0aGlzLm5vZGVfb3BzPXt9LHRoaXMuc3RyZWFtX29wcz17fSx0aGlzLnJkZXY9aX1PYmplY3QuZGVmaW5lUHJvcGVydGllcyhMdC5wcm90b3R5cGUse3JlYWQ6e2dldDpmdW5jdGlvbigpe3JldHVybih0aGlzLm1vZGUmMzY1KT09PTM2NX0sc2V0OmZ1bmN0aW9uKGUpe2U/dGhpcy5tb2RlfD0zNjU6dGhpcy5tb2RlJj0tMzY2fX0sd3JpdGU6e2dldDpmdW5jdGlvbigpe3JldHVybih0aGlzLm1vZGUmMTQ2KT09PTE0Nn0sc2V0OmZ1bmN0aW9uKGUpe2U/dGhpcy5tb2RlfD0xNDY6dGhpcy5tb2RlJj0tMTQ3fX0sS2M6e2dldDpmdW5jdGlvbigpe3JldHVybiBuLmlzRGlyKHRoaXMubW9kZSl9fSxDYjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uamIodGhpcy5tb2RlKX19fSksbi5GU05vZGU9THQsbi5lYygpO3ZhciBicjtmdW5jdGlvbiBPZShlLHQpe3ZhciByPUFycmF5KGZlKGUpKzEpO3JldHVybiBlPXJlKGUsciwwLHIubGVuZ3RoKSx0JiYoci5sZW5ndGg9ZSkscn12YXIgeXI9e2E6ZnVuY3Rpb24oZSx0LHIsaSl7WigiQXNzZXJ0aW9uIGZhaWxlZDogIitMKGUpKyIsIGF0OiAiK1t0P0wodCk6InVua25vd24gZmlsZW5hbWUiLHIsaT9MKGkpOiJ1bmtub3duIGZ1bmN0aW9uIl0pfSxnOmZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlPUwoZSksbi5jaG1vZChlLHQpLDB9Y2F0Y2gocil7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKHIgaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IHI7cmV0dXJuLXIuSmF9fSxJOmZ1bmN0aW9uKGUsdCxyKXt0cnl7aWYodD1MKHQpLHQ9ZGUoZSx0KSxyJi04KXJldHVybi0yODt2YXIgaT1uLmxvb2t1cFBhdGgodCx7TmE6ITB9KS5ub2RlO3JldHVybiBpPyhlPSIiLHImNCYmKGUrPSJyIiksciYyJiYoZSs9InciKSxyJjEmJihlKz0ieCIpLGUmJm4uVWEoaSxlKT8tMjowKTotNDR9Y2F0Y2gobyl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKG8gaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IG87cmV0dXJuLW8uSmF9fSxoOmZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBuLmZjaG1vZChlLHQpLDB9Y2F0Y2gocil7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKHIgaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IHI7cmV0dXJuLXIuSmF9fSxIOmZ1bmN0aW9uKGUsdCxyKXt0cnl7cmV0dXJuIG4uZmNob3duKGUsdCxyKSwwfWNhdGNoKGkpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShpIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyBpO3JldHVybi1pLkphfX0sYjpmdW5jdGlvbihlLHQscil7VWU9cjt0cnl7dmFyIGk9aWUoZSk7c3dpdGNoKHQpe2Nhc2UgMDp2YXIgbz1XZSgpO3JldHVybiAwPm8/LTI4Om4uUWIoaSxvKS5mZDtjYXNlIDE6Y2FzZSAyOnJldHVybiAwO2Nhc2UgMzpyZXR1cm4gaS5mbGFncztjYXNlIDQ6cmV0dXJuIG89V2UoKSxpLmZsYWdzfD1vLDA7Y2FzZSA1OnJldHVybiBvPVdlKCksUGVbbyswPj4xXT0yLDA7Y2FzZSA2OmNhc2UgNzpyZXR1cm4gMDtjYXNlIDE2OmNhc2UgODpyZXR1cm4tMjg7Y2FzZSA5OnJldHVybiB2W0J0KCk+PjJdPTI4LC0xO2RlZmF1bHQ6cmV0dXJuLTI4fX1jYXRjaChsKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEobCBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgbDtyZXR1cm4tbC5KYX19LEc6ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9aWUoZSk7cmV0dXJuIHhlKG4uc3RhdCxyLnBhdGgsdCl9Y2F0Y2goaSl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKGkgaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IGk7cmV0dXJuLWkuSmF9fSxsOmZ1bmN0aW9uKGUsdCxyKXt0cnl7cmV0dXJuIHQ9cisyMDk3MTUyPj4+MDw0MTk0MzA1LSEhdD8odD4+PjApKzQyOTQ5NjcyOTYqcjpOYU4saXNOYU4odCk/LTYxOihuLkZjKGUsdCksMCl9Y2F0Y2goaSl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKGkgaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IGk7cmV0dXJuLWkuSmF9fSxCOmZ1bmN0aW9uKGUsdCl7dHJ5e2lmKHQ9PT0wKXJldHVybi0yODt2YXIgcj1uLmN3ZCgpLGk9ZmUocikrMTtyZXR1cm4gdDxpPy02ODoocmUocixLLGUsdCksaSl9Y2F0Y2gobyl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKG8gaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IG87cmV0dXJuLW8uSmF9fSxFOmZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlPUwoZSkseGUobi5sc3RhdCxlLHQpfWNhdGNoKHIpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShyIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyByO3JldHVybi1yLkphfX0seTpmdW5jdGlvbihlLHQscil7dHJ5e3JldHVybiB0PUwodCksdD1kZShlLHQpLHQ9Sih0KSx0W3QubGVuZ3RoLTFdPT09Ii8iJiYodD10LnN1YnN0cigwLHQubGVuZ3RoLTEpKSxuLm1rZGlyKHQsciwwKSwwfWNhdGNoKGkpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShpIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyBpO3JldHVybi1pLkphfX0sRDpmdW5jdGlvbihlLHQscixpKXt0cnl7dD1MKHQpO3ZhciBvPWkmMjU2O3JldHVybiB0PWRlKGUsdCxpJjQwOTYpLHhlKG8/bi5sc3RhdDpuLnN0YXQsdCxyKX1jYXRjaChsKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEobCBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgbDtyZXR1cm4tbC5KYX19LHY6ZnVuY3Rpb24oZSx0LHIsaSl7VWU9aTt0cnl7dD1MKHQpLHQ9ZGUoZSx0KTt2YXIgbz1pP1dlKCk6MDtyZXR1cm4gbi5vcGVuKHQscixvKS5mZH1jYXRjaChsKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEobCBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgbDtyZXR1cm4tbC5KYX19LHQ6ZnVuY3Rpb24oZSx0LHIsaSl7dHJ5e2lmKHQ9TCh0KSx0PWRlKGUsdCksMD49aSlyZXR1cm4tMjg7dmFyIG89bi5yZWFkbGluayh0KSxsPU1hdGgubWluKGksZmUobykpLGQ9QltyK2xdO3JldHVybiByZShvLEsscixpKzEpLEJbcitsXT1kLGx9Y2F0Y2gobSl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKG0gaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IG07cmV0dXJuLW0uSmF9fSxzOmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZT1MKGUpLG4ucm1kaXIoZSksMH1jYXRjaCh0KXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEodCBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgdDtyZXR1cm4tdC5KYX19LEY6ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGU9TChlKSx4ZShuLnN0YXQsZSx0KX1jYXRjaChyKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEociBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgcjtyZXR1cm4tci5KYX19LHA6ZnVuY3Rpb24oZSx0LHIpe3RyeXtyZXR1cm4gdD1MKHQpLHQ9ZGUoZSx0KSxyPT09MD9uLnVubGluayh0KTpyPT09NTEyP24ucm1kaXIodCk6WigiSW52YWxpZCBmbGFncyBwYXNzZWQgdG8gdW5saW5rYXQiKSwwfWNhdGNoKGkpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShpIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyBpO3JldHVybi1pLkphfX0sbjpmdW5jdGlvbihlLHQscil7dHJ5e2lmKHQ9TCh0KSx0PWRlKGUsdCwhMCkscil7dmFyIGk9dltyPj4yXSxvPXZbcis0Pj4yXTtsPTFlMyppK28vMWU2LHIrPTgsaT12W3I+PjJdLG89dltyKzQ+PjJdLGQ9MWUzKmkrby8xZTZ9ZWxzZSB2YXIgbD1EYXRlLm5vdygpLGQ9bDtyZXR1cm4gbi5ZYyh0LGwsZCksMH1jYXRjaChtKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEobSBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgbTtyZXR1cm4tbS5KYX19LGU6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKX0saTpmdW5jdGlvbihlLHQpe2U9bmV3IERhdGUoMWUzKnZbZT4+Ml0pLHZbdD4+Ml09ZS5nZXRTZWNvbmRzKCksdlt0KzQ+PjJdPWUuZ2V0TWludXRlcygpLHZbdCs4Pj4yXT1lLmdldEhvdXJzKCksdlt0KzEyPj4yXT1lLmdldERhdGUoKSx2W3QrMTY+PjJdPWUuZ2V0TW9udGgoKSx2W3QrMjA+PjJdPWUuZ2V0RnVsbFllYXIoKS0xOTAwLHZbdCsyND4+Ml09ZS5nZXREYXkoKTt2YXIgcj1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwxKTt2W3QrMjg+PjJdPShlLmdldFRpbWUoKS1yLmdldFRpbWUoKSkvODY0ZTV8MCx2W3QrMzY+PjJdPS0oNjAqZS5nZXRUaW1lem9uZU9mZnNldCgpKTt2YXIgaT1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksNiwxKS5nZXRUaW1lem9uZU9mZnNldCgpO3I9ci5nZXRUaW1lem9uZU9mZnNldCgpLHZbdCszMj4+Ml09KGkhPXImJmUuZ2V0VGltZXpvbmVPZmZzZXQoKT09TWF0aC5taW4ocixpKSl8MH0sdzpmdW5jdGlvbihlLHQscixpLG8sbCxkKXt0cnl7aWYoZSE9PTApcmV0dXJuLTI4O3ZhciBtPW4uVGEobyk7aWYoIW0pcmV0dXJuLTg7dmFyIGc9bi5tbWFwKG0sdCxsLHIsaSksdz1nLlVjO3JldHVybiB2W2Q+PjJdPWcubGMsd31jYXRjaChfKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEoXyBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgXztyZXR1cm4tXy5KYX19LHg6ZnVuY3Rpb24oZSx0LHIsaSxvLGwpe3RyeXt2YXIgZD1uLlRhKG8pO2lmKGQmJnImMil7dmFyIG09Sy5zbGljZShlLGUrdCk7bi5tc3luYyhkLG0sbCx0LGkpfX1jYXRjaChnKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEoZyBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgZztyZXR1cm4tZy5KYX19LGo6b3QscTpmdW5jdGlvbigpe3JldHVybiAyMTQ3NDgzNjQ4fSxkOk50LG86ZnVuY3Rpb24oZSx0LHIpe0suY29weVdpdGhpbihlLHQsdCtyKX0sYzpmdW5jdGlvbihlKXt2YXIgdD1LLmxlbmd0aDtpZihlPj4+PTAsMjE0NzQ4MzY0ODxlKXJldHVybiExO2Zvcih2YXIgcj0xOzQ+PXI7cio9Mil7dmFyIGk9dCooMSsuMi9yKTtpPU1hdGgubWluKGksZSsxMDA2NjMyOTYpO3ZhciBvPU1hdGg7aT1NYXRoLm1heChlLGkpLG89by5taW4uY2FsbChvLDIxNDc0ODM2NDgsaSsoNjU1MzYtaSU2NTUzNiklNjU1MzYpO2U6e3RyeXtZZS5ncm93KG8tR2UuYnl0ZUxlbmd0aCs2NTUzNT4+PjE2KSxrdCgpO3ZhciBsPTE7YnJlYWsgZX1jYXRjaHt9bD12b2lkIDB9aWYobClyZXR1cm4hMH1yZXR1cm4hMX0sejpmdW5jdGlvbihlLHQpe3ZhciByPTA7cmV0dXJuIFB0KCkuZm9yRWFjaChmdW5jdGlvbihpLG8pe3ZhciBsPXQrcjtmb3Iobz1DW2UrNCpvPj4yXT1sLGw9MDtsPGkubGVuZ3RoOysrbClCW28rKz4+MF09aS5jaGFyQ29kZUF0KGwpO0Jbbz4+MF09MCxyKz1pLmxlbmd0aCsxfSksMH0sQTpmdW5jdGlvbihlLHQpe3ZhciByPVB0KCk7Q1tlPj4yXT1yLmxlbmd0aDt2YXIgaT0wO3JldHVybiByLmZvckVhY2goZnVuY3Rpb24obyl7aSs9by5sZW5ndGgrMX0pLENbdD4+Ml09aSwwfSxmOmZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1pZShlKTtyZXR1cm4gbi5jbG9zZSh0KSwwfWNhdGNoKHIpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShyIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyByO3JldHVybiByLkphfX0sbTpmdW5jdGlvbihlLHQpe3RyeXt2YXIgcj1pZShlKSxpPXIudHR5PzI6bi5pc0RpcihyLm1vZGUpPzM6bi5aYShyLm1vZGUpPzc6NDtyZXR1cm4gQlt0Pj4wXT1pLDB9Y2F0Y2gobyl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKG8gaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IG87cmV0dXJuIG8uSmF9fSx1OmZ1bmN0aW9uKGUsdCxyLGkpe3RyeXtlOnt2YXIgbz1pZShlKTtlPXQ7Zm9yKHZhciBsPXQ9MDtsPHI7bCsrKXt2YXIgZD1DW2U+PjJdLG09Q1tlKzQ+PjJdO2UrPTg7dmFyIGc9bi5yZWFkKG8sQixkLG0sdm9pZCAwKTtpZigwPmcpe3ZhciB3PS0xO2JyZWFrIGV9aWYodCs9ZyxnPG0pYnJlYWt9dz10fXJldHVybiB2W2k+PjJdPXcsMH1jYXRjaChfKXtpZih0eXBlb2Ygbj09InVuZGVmaW5lZCJ8fCEoXyBpbnN0YW5jZW9mIG4uRXJybm9FcnJvcikpdGhyb3cgXztyZXR1cm4gXy5KYX19LGs6ZnVuY3Rpb24oZSx0LHIsaSxvKXt0cnl7aWYodD1yKzIwOTcxNTI+Pj4wPDQxOTQzMDUtISF0Pyh0Pj4+MCkrNDI5NDk2NzI5NipyOk5hTixpc05hTih0KSlyZXR1cm4gNjE7dmFyIGw9aWUoZSk7cmV0dXJuIG4ubGxzZWVrKGwsdCxpKSwkPVtsLnBvc2l0aW9uPj4+MCwoRj1sLnBvc2l0aW9uLDE8PStNYXRoLmFicyhGKT8wPEY/KE1hdGgubWluKCtNYXRoLmZsb29yKEYvNDI5NDk2NzI5NiksNDI5NDk2NzI5NSl8MCk+Pj4wOn5+K01hdGguY2VpbCgoRi0rKH5+Rj4+PjApKS80Mjk0OTY3Mjk2KT4+PjA6MCldLHZbbz4+Ml09JFswXSx2W28rND4+Ml09JFsxXSxsLnpiJiZ0PT09MCYmaT09PTAmJihsLnpiPW51bGwpLDB9Y2F0Y2goZCl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKGQgaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IGQ7cmV0dXJuIGQuSmF9fSxDOmZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1pZShlKTtyZXR1cm4gdC5zdHJlYW1fb3BzJiZ0LnN0cmVhbV9vcHMuZnN5bmM/LXQuc3RyZWFtX29wcy5mc3luYyh0KTowfWNhdGNoKHIpe2lmKHR5cGVvZiBuPT0idW5kZWZpbmVkInx8IShyIGluc3RhbmNlb2Ygbi5FcnJub0Vycm9yKSl0aHJvdyByO3JldHVybiByLkphfX0scjpmdW5jdGlvbihlLHQscixpKXt0cnl7ZTp7dmFyIG89aWUoZSk7ZT10O2Zvcih2YXIgbD10PTA7bDxyO2wrKyl7dmFyIGQ9Q1tlPj4yXSxtPUNbZSs0Pj4yXTtlKz04O3ZhciBnPW4ud3JpdGUobyxCLGQsbSx2b2lkIDApO2lmKDA+Zyl7dmFyIHc9LTE7YnJlYWsgZX10Kz1nfXc9dH1yZXR1cm4gQ1tpPj4yXT13LDB9Y2F0Y2goXyl7aWYodHlwZW9mIG49PSJ1bmRlZmluZWQifHwhKF8gaW5zdGFuY2VvZiBuLkVycm5vRXJyb3IpKXRocm93IF87cmV0dXJuIF8uSmF9fX07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShvKXtzLmFzbT1vLmV4cG9ydHMsWWU9cy5hc20uSixrdCgpLFk9cy5hc20uQmEscXQudW5zaGlmdChzLmFzbS5LKSxMZSgpfWZ1bmN0aW9uIHQobyl7ZShvLmluc3RhbmNlKX1mdW5jdGlvbiByKG8pe3JldHVybiBscigpLnRoZW4oZnVuY3Rpb24obCl7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGwsaSl9KS50aGVuKGZ1bmN0aW9uKGwpe3JldHVybiBsfSkudGhlbihvLGZ1bmN0aW9uKGwpe3RlKCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK2wpLFoobCl9KX12YXIgaT17YTp5cn07aWYocnQoKSxzLmluc3RhbnRpYXRlV2FzbSl0cnl7cmV0dXJuIHMuaW5zdGFudGlhdGVXYXNtKGksZSl9Y2F0Y2gobyl7cmV0dXJuIHRlKCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK28pLCExfXJldHVybiBmdW5jdGlvbigpe3JldHVybiBrZXx8dHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nIT0iZnVuY3Rpb24ifHxEdCgpfHxILnN0YXJ0c1dpdGgoImZpbGU6Ly8iKXx8dHlwZW9mIGZldGNoIT0iZnVuY3Rpb24iP3IodCk6ZmV0Y2goSCx7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oZnVuY3Rpb24obyl7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKG8saSkudGhlbih0LGZ1bmN0aW9uKGwpe3JldHVybiB0ZSgid2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICIrbCksdGUoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIikscih0KX0pfSl9KCkse319KSgpLHMuX19fd2FzbV9jYWxsX2N0b3JzPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX19fd2FzbV9jYWxsX2N0b3JzPXMuYXNtLkspLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM192ZnNfZmluZD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX3Zmc19maW5kPXMuYXNtLkwpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19mcmVlPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfZnJlZT1zLmFzbS5NKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBCdD1zLl9fX2Vycm5vX2xvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuKEJ0PXMuX19fZXJybm9fbG9jYXRpb249cy5hc20uTikuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtzLl9zcWxpdGUzX2ZpbmFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfZmluYWxpemU9cy5hc20uTykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX3Jlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcmVzZXQ9cy5hc20uUCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2NsZWFyX2JpbmRpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfY2xlYXJfYmluZGluZ3M9cy5hc20uUSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX3ZhbHVlX2Jsb2I9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM192YWx1ZV9ibG9iPXMuYXNtLlIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM192YWx1ZV90ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfdmFsdWVfdGV4dD1zLmFzbS5TKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfdmFsdWVfYnl0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM192YWx1ZV9ieXRlcz1zLmFzbS5UKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfdmFsdWVfZG91YmxlPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfdmFsdWVfZG91YmxlPXMuYXNtLlUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM192YWx1ZV9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM192YWx1ZV9pbnQ9cy5hc20uVikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX3ZhbHVlX3R5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM192YWx1ZV90eXBlPXMuYXNtLlcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19yZXN1bHRfYmxvYj1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX3Jlc3VsdF9ibG9iPXMuYXNtLlgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19yZXN1bHRfZG91YmxlPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcmVzdWx0X2RvdWJsZT1zLmFzbS5ZKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfcmVzdWx0X2Vycm9yPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcmVzdWx0X2Vycm9yPXMuYXNtLlopLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19yZXN1bHRfaW50PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcmVzdWx0X2ludD1zLmFzbS5fKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfcmVzdWx0X2ludDY0PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcmVzdWx0X2ludDY0PXMuYXNtLiQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19yZXN1bHRfbnVsbD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX3Jlc3VsdF9udWxsPXMuYXNtLmFhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfcmVzdWx0X3RleHQ9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19yZXN1bHRfdGV4dD1zLmFzbS5iYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX3N0ZXA9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19zdGVwPXMuYXNtLmNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfY29sdW1uX2NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfY29sdW1uX2NvdW50PXMuYXNtLmRhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfZGF0YV9jb3VudD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2RhdGFfY291bnQ9cy5hc20uZWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19jb2x1bW5fYmxvYj1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2NvbHVtbl9ibG9iPXMuYXNtLmZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfY29sdW1uX2J5dGVzPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfY29sdW1uX2J5dGVzPXMuYXNtLmdhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfY29sdW1uX2RvdWJsZT1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2NvbHVtbl9kb3VibGU9cy5hc20uaGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19jb2x1bW5fdGV4dD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2NvbHVtbl90ZXh0PXMuYXNtLmlhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfY29sdW1uX3R5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19jb2x1bW5fdHlwZT1zLmFzbS5qYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2NvbHVtbl9uYW1lPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfY29sdW1uX25hbWU9cy5hc20ua2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19iaW5kX2Jsb2I9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19iaW5kX2Jsb2I9cy5hc20ubGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19iaW5kX2RvdWJsZT1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2JpbmRfZG91YmxlPXMuYXNtLm1hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfYmluZF9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19iaW5kX2ludD1zLmFzbS5uYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2JpbmRfdGV4dD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2JpbmRfdGV4dD1zLmFzbS5vYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2JpbmRfcGFyYW1ldGVyX2luZGV4PWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfYmluZF9wYXJhbWV0ZXJfaW5kZXg9cy5hc20ucGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19zcWw9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19zcWw9cy5hc20ucWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19ub3JtYWxpemVkX3NxbD1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX25vcm1hbGl6ZWRfc3FsPXMuYXNtLnJhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfZXJybXNnPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfZXJybXNnPXMuYXNtLnNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfZXhlYz1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2V4ZWM9cy5hc20udGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scy5fc3FsaXRlM19wcmVwYXJlX3YyPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3NxbGl0ZTNfcHJlcGFyZV92Mj1zLmFzbS51YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2NoYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19jaGFuZ2VzPXMuYXNtLnZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHMuX3NxbGl0ZTNfY2xvc2VfdjI9ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19jbG9zZV92Mj1zLmFzbS53YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX2NyZWF0ZV9mdW5jdGlvbl92Mj1mdW5jdGlvbigpe3JldHVybihzLl9zcWxpdGUzX2NyZWF0ZV9mdW5jdGlvbl92Mj1zLmFzbS54YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9zcWxpdGUzX29wZW49ZnVuY3Rpb24oKXtyZXR1cm4ocy5fc3FsaXRlM19vcGVuPXMuYXNtLnlhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBqZT1zLl9tYWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4oamU9cy5fbWFsbG9jPXMuYXNtLnphKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZlPXMuX2ZyZWU9ZnVuY3Rpb24oKXtyZXR1cm4oVmU9cy5fZnJlZT1zLmFzbS5BYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtzLl9SZWdpc3RlckV4dGVuc2lvbkZ1bmN0aW9ucz1mdW5jdGlvbigpe3JldHVybihzLl9SZWdpc3RlckV4dGVuc2lvbkZ1bmN0aW9ucz1zLmFzbS5DYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzLl9yZWdpc3Rlcl9mb3JfaWRiPWZ1bmN0aW9uKCl7cmV0dXJuKHMuX3JlZ2lzdGVyX2Zvcl9pZGI9cy5hc20uRGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIFR0PXMuX2Vtc2NyaXB0ZW5fYnVpbHRpbl9tZW1hbGlnbj1mdW5jdGlvbigpe3JldHVybihUdD1zLl9lbXNjcmlwdGVuX2J1aWx0aW5fbWVtYWxpZ249cy5hc20uRWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU2U9cy5zdGFja1NhdmU9ZnVuY3Rpb24oKXtyZXR1cm4oU2U9cy5zdGFja1NhdmU9cy5hc20uRmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRGU9cy5zdGFja1Jlc3RvcmU9ZnVuY3Rpb24oKXtyZXR1cm4oRGU9cy5zdGFja1Jlc3RvcmU9cy5hc20uR2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb2U9cy5zdGFja0FsbG9jPWZ1bmN0aW9uKCl7cmV0dXJuKG9lPXMuc3RhY2tBbGxvYz1zLmFzbS5IYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtzLmN3cmFwPWZ1bmN0aW9uKGUsdCxyLGkpe3I9cnx8W107dmFyIG89ci5ldmVyeShmdW5jdGlvbihsKXtyZXR1cm4gbD09PSJudW1iZXIifSk7cmV0dXJuIHQhPT0ic3RyaW5nIiYmbyYmIWk/c1siXyIrZV06ZnVuY3Rpb24oKXtyZXR1cm4gYXIoZSx0LHIsYXJndW1lbnRzKX19LHMuVVRGOFRvU3RyaW5nPUwscy5zdGFja1NhdmU9U2Uscy5zdGFja1Jlc3RvcmU9RGUscy5zdGFja0FsbG9jPW9lLHMuRlM9bjt2YXIgQ2U7QWU9ZnVuY3Rpb24gZSgpe0NlfHx1dCgpLENlfHwoQWU9ZSl9O2Z1bmN0aW9uIHV0KCl7ZnVuY3Rpb24gZSgpe2lmKCFDZSYmKENlPSEwLHMuY2FsbGVkUnVuPSEwLCFndCkpe2lmKHMubm9GU0luaXR8fG4uaWIuQmJ8fG4uaWIoKSxuLmJjPSExLG50KHF0KSxzLm9uUnVudGltZUluaXRpYWxpemVkJiZzLm9uUnVudGltZUluaXRpYWxpemVkKCkscy5wb3N0UnVuKWZvcih0eXBlb2Ygcy5wb3N0UnVuPT0iZnVuY3Rpb24iJiYocy5wb3N0UnVuPVtzLnBvc3RSdW5dKTtzLnBvc3RSdW4ubGVuZ3RoOyl7dmFyIHQ9cy5wb3N0UnVuLnNoaWZ0KCk7U3QudW5zaGlmdCh0KX1udChTdCl9fWlmKCEoMDxjZSkpe2lmKHMucHJlUnVuKWZvcih0eXBlb2Ygcy5wcmVSdW49PSJmdW5jdGlvbiImJihzLnByZVJ1bj1bcy5wcmVSdW5dKTtzLnByZVJ1bi5sZW5ndGg7KXVyKCk7bnQoQXQpLDA8Y2V8fChzLnNldFN0YXR1cz8ocy5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3Muc2V0U3RhdHVzKCIiKX0sMSksZSgpfSwxKSk6ZSgpKX19aWYocy5ydW49dXQscy5wcmVJbml0KWZvcih0eXBlb2Ygcy5wcmVJbml0PT0iZnVuY3Rpb24iJiYocy5wcmVJbml0PVtzLnByZUluaXRdKTswPHMucHJlSW5pdC5sZW5ndGg7KXMucHJlSW5pdC5wb3AoKSgpO3JldHVybiB1dCgpLHN9KSxmKX07RS5leHBvcnRzPXUsRS5leHBvcnRzLmRlZmF1bHQ9dX0pKHd0KTt2YXIgb3I9d3QuZXhwb3J0cztjb25zdCBidD1bInllbGxvdyIsImN5YW4iLCJtYWdlbnRhIl07Y2xhc3Mgc3J7Y29uc3RydWN0b3IoYSxmLHUsYyl7dGhpcy5kYk5hbWU9YSx0aGlzLndhc21Vcmw9Zix0aGlzLnBhZ2VTaXplPXUsdGhpcy5jYWNoZVNpemU9Yyx0aGlzLmN1cnJlbnRUcmFuc2FjdGlvbkk9MH1hc3luYyBpbml0KCl7Y29uc3QgYT1hd2FpdCBvcih7bG9jYXRlRmlsZTooKT0+dGhpcy53YXNtVXJsfSksZj1uZXcganQoYS5GUyxuZXcgdHIpO2EucmVnaXN0ZXJfZm9yX2lkYihmKSxhLkZTLm1rZGlyKCIvYmxvY2tlZCIpLGEuRlMubW91bnQoZix7fSwiL2Jsb2NrZWQiKTtjb25zdCB1PWAvYmxvY2tlZC8ke3RoaXMuZGJOYW1lfS5zcWxpdGVgO2lmKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlcj09InVuZGVmaW5lZCIpe2NvbnNvbGUubG9nKCJObyBTaGFyZWRBcnJheUJ1ZmZlciIpO2NvbnN0IGM9YS5GUy5vcGVuKHUsImErIik7YXdhaXQgYy5ub2RlLmNvbnRlbnRzLnJlYWRJZkZhbGxiYWNrKCksYS5GUy5jbG9zZShjKX10aGlzLnNxbERiPW5ldyBhLkRhdGFiYXNlKGAvYmxvY2tlZC8ke3RoaXMuZGJOYW1lfS5zcWxpdGVgLHtmaWxlbmFtZTohMH0pLGNvbnNvbGUubG9nKCJTZXR0aW5nIHByYWdtYSIpLHRoaXMuc3FsRGIuZXhlYyhgCiAgICAgIFBSQUdNQSBjYWNoZV9zaXplPSR7dGhpcy5jYWNoZVNpemV9OwogICAgICBQUkFHTUEgam91cm5hbF9tb2RlPU1FTU9SWTsKICAgICAgUFJBR01BIHBhZ2Vfc2l6ZT0ke3RoaXMucGFnZVNpemV9OwogICAgYCl9c3FsRXhlYyhhLGYsdSl7dHJ5e2NvbnN0IGM9W10scD1wZXJmb3JtYW5jZS5ub3coKSx5PXRoaXMuc3FsRGIucHJlcGFyZShhLGYpO2Zvcig7eS5zdGVwKCk7KWMucHVzaCh5LmdldEFzT2JqZWN0KCkpO3kuZnJlZSgpO2NvbnN0IGs9cGVyZm9ybWFuY2Uubm93KCk7cmV0dXJuKHU9PW51bGw/dm9pZCAwOnUudHJhbnNhY3Rpb25JZCkmJnUudHJhbnNhY3Rpb25JZCE9PXRoaXMuY3VycmVudFRyYW5zYWN0aW9uSWQmJiF1LnN1cHByZXNzJiYodGhpcy5jdXJyZW50VHJhbnNhY3Rpb25JZD11LnRyYW5zYWN0aW9uSWQsdGhpcy5jdXJyZW50VHJhbnNhY3Rpb25JKyspLHUhPW51bGwmJnUudHJhbnNhY3Rpb25JZHx8KHRoaXMuY3VycmVudFRyYW5zYWN0aW9uSWQ9dm9pZCAwKSx1IT1udWxsJiZ1LnN1cHByZXNzfHxjb25zb2xlLmxvZyhgJWNbJHt0aGlzLmRiTmFtZX1dJHt1IT1udWxsJiZ1LnRyYW5zYWN0aW9uSWQ/YFt0cl9pZD0ke3UudHJhbnNhY3Rpb25JZC5zdWJzdHJpbmcoMCw2KX1dYDoiIn0gJHthfSAke0pTT04uc3RyaW5naWZ5KGYpfSBUaW1lOiAkeygoay1wKS8xZTMpLnRvRml4ZWQoNCl9YCxgY29sb3I6ICR7dGhpcy5jdXJyZW50VHJhbnNhY3Rpb25JZD9idFt0aGlzLmN1cnJlbnRUcmFuc2FjdGlvbkklYnQubGVuZ3RoXToid2hpdGUifWApLGN9Y2F0Y2goYyl7dGhyb3cgY29uc29sZS5lcnJvcihgWyR7dGhpcy5kYk5hbWV9XSBGYWlsZWQgZXhlY3V0ZWAsYyxhLGYsdSx0aGlzLmN1cnJlbnRUcmFuc2FjdGlvbklkKSxjfX19Y29uc3QgeXQ9c2VsZjtsZXQgZ2U7eXQuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsYXN5bmMgRT0+e2NvbnN0IGE9dT0+eXQucG9zdE1lc3NhZ2UodSksZj1FLmRhdGE7aWYoZi50eXBlPT09ImluaXRpYWxpemUiKXtpZihnZSl0aHJvdyBuZXcgRXJyb3IoIkRCIGFscmVhZHkgaW5pdGlhbGl6ZWQhIik7Z2U9bmV3IHNyKGYuZGJOYW1lLGYud2FzbVVybCxmLnBhZ2VTaXplLGYuY2FjaGVTaXplKSxhd2FpdCBnZS5pbml0KCksYSh7dHlwZToiaW5pdGlhbGl6ZWQifSl9ZWxzZXtpZighZ2Upe2Eoe3R5cGU6InJlc3BvbnNlIixkYXRhOntjb21tYW5kSWQ6Zi5kYXRhLmNvbW1hbmRJZCxzdGF0dXM6ImVycm9yIixtZXNzYWdlOiJEQiBub3QgaW5pdGlhbGl6ZWQhIn19KSxjb25zb2xlLmVycm9yKCJEQiBpcyBub3QgaW5pdGlhbGl6ZWQiKTtyZXR1cm59Y29uc3QgdT1nZTt0cnl7Y29uc3QgYz1mLmRhdGEucXVlcmllcy5tYXAocD0+dS5zcWxFeGVjKHAudGV4dCxwLnZhbHVlcyxmLmRhdGEubG9nT3B0cykpO2Eoe3R5cGU6InJlc3BvbnNlIixkYXRhOntjb21tYW5kSWQ6Zi5kYXRhLmNvbW1hbmRJZCxzdGF0dXM6InN1Y2Nlc3MiLHJlc3VsdDpjfX0pfWNhdGNoKGMpe2Eoe3R5cGU6InJlc3BvbnNlIixkYXRhOntjb21tYW5kSWQ6Zi5kYXRhLmNvbW1hbmRJZCxzdGF0dXM6ImVycm9yIixtZXNzYWdlOmMgaW5zdGFuY2VvZiBFcnJvcj9jLm1lc3NhZ2U6SlNPTi5zdHJpbmdpZnkoYyl9fSl9fX0pfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9L2Fzc2V0cy9EQi53b3JrZXIuNTgxZTkxZDkuanMubWFw\";\nvar blob = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs)], {\n  type: \"text/javascript;charset=utf-8\"\n});\nfunction WorkerWrapper() {\n  var objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);\n  try {\n    return objURL ? new Worker(objURL, {}) : new Worker(\"data:application/javascript;base64,\" + encodedJs, {\n      type: \"module\"\n    });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\nvar absurdWebBackend = function absurdWebBackend(_ref4) {\n  var wasmUrl = _ref4.wasmUrl,\n    queryTimeout = _ref4.queryTimeout,\n    pageSize = _ref4.pageSize,\n    cacheSize = _ref4.cacheSize;\n  return function (_ref5) {\n    var dbName = _ref5.dbName,\n      stopped$ = _ref5.stopped$;\n    var initializedWorker = new WorkerWrapper();\n    var messagesToWorker$ = new Subject();\n    messagesToWorker$.pipe(takeUntil(stopped$)).subscribe(function (mes) {\n      initializedWorker.postMessage(mes);\n    });\n    var messagesFromWorker$ = new Observable(function (obs) {\n      var sub = function sub(ev) {\n        obs.next(ev.data);\n      };\n      initializedWorker.addEventListener(\"message\", sub);\n      return function () {\n        initializedWorker.removeEventListener(\"message\", sub);\n      };\n    }).pipe(share({\n      connector: function connector() {\n        return new ReplaySubject(20);\n      },\n      resetOnRefCountZero: false\n    }), takeUntil(stopped$));\n    stopped$.pipe(first()).subscribe(function () {\n      initializedWorker.terminate();\n    });\n    var state = {\n      messagesToWorker$: messagesToWorker$,\n      messagesFromWorker$: messagesFromWorker$,\n      stop$: stopped$,\n      queryTimeout: queryTimeout || 3e4\n    };\n    return {\n      initialize: function initialize() {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          var initPromise, url;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  initBackend(initializedWorker);\n                  initPromise = firstValueFrom(messagesFromWorker$.pipe(filter(function (ev) {\n                    return ev.type === \"initialized\";\n                  }), takeUntil(stopped$)));\n                  if (!(typeof wasmUrl === \"string\")) {\n                    _context2.next = 6;\n                    break;\n                  }\n                  _context2.t0 = wasmUrl;\n                  _context2.next = 9;\n                  break;\n                case 6:\n                  _context2.next = 8;\n                  return wasmUrl();\n                case 8:\n                  _context2.t0 = _context2.sent;\n                case 9:\n                  url = _context2.t0;\n                  messagesToWorker$.next({\n                    type: \"initialize\",\n                    dbName: dbName,\n                    wasmUrl: new URL(url, document.baseURI).toString(),\n                    pageSize: pageSize !== void 0 ? pageSize : 32 * 1024,\n                    cacheSize: cacheSize !== void 0 ? cacheSize : -5e3\n                  });\n                  _context2.next = 13;\n                  return initPromise;\n                case 13:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }))();\n      },\n      execQueries: function execQueries(queries, opts) {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return runWorkerCommand(state, buildRunQueriesCommand(queries, opts));\n                case 2:\n                  return _context3.abrupt(\"return\", _context3.sent);\n                case 3:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }))();\n      }\n    };\n  };\n};\nfunction decodeBase64(base64, enableUnicode) {\n  var binaryString = atob(base64);\n  if (enableUnicode) {\n    var binaryView = new Uint8Array(binaryString.length);\n    for (var i = 0, n = binaryString.length; i < n; ++i) {\n      binaryView[i] = binaryString.charCodeAt(i);\n    }\n    return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n  }\n  return binaryString;\n}\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n  var sourcemap = sourcemapArg === void 0 ? null : sourcemapArg;\n  var enableUnicode = enableUnicodeArg === void 0 ? false : enableUnicodeArg;\n  var source = decodeBase64(base64, enableUnicode);\n  var start = source.indexOf(\"\\n\", 10) + 1;\n  var body = source.substring(start) + (sourcemap ? \"//# sourceMappingURL=\" + sourcemap : \"\");\n  var blob2 = new Blob([body], {\n    type: \"application/javascript\"\n  });\n  return URL.createObjectURL(blob2);\n}\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n  var url;\n  return function WorkerFactory2(options) {\n    url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n    return new Worker(url, options);\n  };\n}\nvar WorkerFactory = createBase64WorkerFactory(\"Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IHQ9MzczNTkyODU1OTtjbGFzcyBle2NvbnN0cnVjdG9yKHQse2luaXRpYWxPZmZzZXQ6ZT00LHVzZUF0b21pY3M6aT0hMCxzdHJlYW06cz0hMCxkZWJ1ZzpyLG5hbWU6bn09e30pe3RoaXMuYnVmZmVyPXQsdGhpcy5hdG9taWNWaWV3PW5ldyBJbnQzMkFycmF5KHQpLHRoaXMub2Zmc2V0PWUsdGhpcy51c2VBdG9taWNzPWksdGhpcy5zdHJlYW09cyx0aGlzLmRlYnVnPXIsdGhpcy5uYW1lPW59bG9nKC4uLnQpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKGBbcmVhZGVyOiAke3RoaXMubmFtZX1dYCwuLi50KX13YWl0V3JpdGUodCxlPW51bGwpe2lmKHRoaXMudXNlQXRvbWljcyl7Zm9yKHRoaXMubG9nKGB3YWl0aW5nIGZvciAke3R9YCk7MD09PUF0b21pY3MubG9hZCh0aGlzLmF0b21pY1ZpZXcsMCk7KXtpZihudWxsIT1lJiYidGltZWQtb3V0Ij09PUF0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCwwLGUpKXRocm93IG5ldyBFcnJvcigidGltZW91dCIpO0F0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCwwLDUwMCl9dGhpcy5sb2coYHJlc3VtZWQgZm9yICR7dH1gKX1lbHNlIGlmKDEhPT10aGlzLmF0b21pY1ZpZXdbMF0pdGhyb3cgbmV3IEVycm9yKCJgd2FpdFdyaXRlYCBleHBlY3RlZCBhcnJheSB0byBiZSByZWFkYWJsZSIpfWZsaXAoKXtpZih0aGlzLmxvZygiZmxpcCIpLHRoaXMudXNlQXRvbWljcyl7aWYoMSE9PUF0b21pY3MuY29tcGFyZUV4Y2hhbmdlKHRoaXMuYXRvbWljVmlldywwLDEsMCkpdGhyb3cgbmV3IEVycm9yKCJSZWFkIGRhdGEgb3V0IG9mIHN5bmMhIFRoaXMgaXMgZGlzYXN0cm91cyIpO0F0b21pY3Mubm90aWZ5KHRoaXMuYXRvbWljVmlldywwKX1lbHNlIHRoaXMuYXRvbWljVmlld1swXT0wO3RoaXMub2Zmc2V0PTR9ZG9uZSgpe3RoaXMud2FpdFdyaXRlKCJkb25lIik7bGV0IGU9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5nZXRVaW50MzIoMCk9PT10O3JldHVybiBlJiYodGhpcy5sb2coImRvbmUiKSx0aGlzLmZsaXAoKSksZX1wZWVrKHQpe3RoaXMucGVla09mZnNldD10aGlzLm9mZnNldDtsZXQgZT10KCk7cmV0dXJuIHRoaXMub2Zmc2V0PXRoaXMucGVla09mZnNldCx0aGlzLnBlZWtPZmZzZXQ9bnVsbCxlfXN0cmluZyh0KXt0aGlzLndhaXRXcml0ZSgic3RyaW5nIix0KTtsZXQgZT10aGlzLl9pbnQzMigpLGk9ZS8yLHM9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0LGUpLHI9W107Zm9yKGxldCB0PTA7dDxpO3QrKylyLnB1c2gocy5nZXRVaW50MTYoMip0KSk7bGV0IG49U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIpO3JldHVybiB0aGlzLmxvZygic3RyaW5nIixuKSx0aGlzLm9mZnNldCs9ZSxudWxsPT10aGlzLnBlZWtPZmZzZXQmJnRoaXMuZmxpcCgpLG59X2ludDMyKCl7bGV0IHQ9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5nZXRJbnQzMigpO3JldHVybiB0aGlzLmxvZygiX2ludDMyIix0KSx0aGlzLm9mZnNldCs9NCx0fWludDMyKCl7dGhpcy53YWl0V3JpdGUoImludDMyIik7bGV0IHQ9dGhpcy5faW50MzIoKTtyZXR1cm4gdGhpcy5sb2coImludDMyIix0KSxudWxsPT10aGlzLnBlZWtPZmZzZXQmJnRoaXMuZmxpcCgpLHR9Ynl0ZXMoKXt0aGlzLndhaXRXcml0ZSgiYnl0ZXMiKTtsZXQgdD10aGlzLl9pbnQzMigpLGU9bmV3IEFycmF5QnVmZmVyKHQpO3JldHVybiBuZXcgVWludDhBcnJheShlKS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsdGhpcy5vZmZzZXQsdCkpLHRoaXMubG9nKCJieXRlcyIsZSksdGhpcy5vZmZzZXQrPXQsbnVsbD09dGhpcy5wZWVrT2Zmc2V0JiZ0aGlzLmZsaXAoKSxlfX1jbGFzcyBpe2NvbnN0cnVjdG9yKHQse2luaXRpYWxPZmZzZXQ6ZT00LHVzZUF0b21pY3M6aT0hMCxzdHJlYW06cz0hMCxkZWJ1ZzpyLG5hbWU6bn09e30pe3RoaXMuYnVmZmVyPXQsdGhpcy5hdG9taWNWaWV3PW5ldyBJbnQzMkFycmF5KHQpLHRoaXMub2Zmc2V0PWUsdGhpcy51c2VBdG9taWNzPWksdGhpcy5zdHJlYW09cyx0aGlzLmRlYnVnPXIsdGhpcy5uYW1lPW4sdGhpcy51c2VBdG9taWNzP0F0b21pY3Muc3RvcmUodGhpcy5hdG9taWNWaWV3LDAsMCk6dGhpcy5hdG9taWNWaWV3WzBdPTB9bG9nKC4uLnQpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKGBbd3JpdGVyOiAke3RoaXMubmFtZX1dYCwuLi50KX13YWl0UmVhZCh0KXtpZih0aGlzLnVzZUF0b21pY3Mpe2lmKHRoaXMubG9nKGB3YWl0aW5nIGZvciAke3R9YCksMCE9PUF0b21pY3MuY29tcGFyZUV4Y2hhbmdlKHRoaXMuYXRvbWljVmlldywwLDAsMSkpdGhyb3cgbmV3IEVycm9yKCJXcm90ZSBzb21ldGhpbmcgaW50byB1bndyaXRhYmxlIGJ1ZmZlciEgVGhpcyBpcyBkaXNhc3Ryb3VzIik7Zm9yKEF0b21pY3Mubm90aWZ5KHRoaXMuYXRvbWljVmlldywwKTsxPT09QXRvbWljcy5sb2FkKHRoaXMuYXRvbWljVmlldywwKTspQXRvbWljcy53YWl0KHRoaXMuYXRvbWljVmlldywwLDEsNTAwKTt0aGlzLmxvZyhgcmVzdW1lZCBmb3IgJHt0fWApfWVsc2UgdGhpcy5hdG9taWNWaWV3WzBdPTE7dGhpcy5vZmZzZXQ9NH1maW5hbGl6ZSgpe3RoaXMubG9nKCJmaW5hbGl6aW5nIiksbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRVaW50MzIoMCx0KSx0aGlzLndhaXRSZWFkKCJmaW5hbGl6ZSIpfXN0cmluZyh0KXt0aGlzLmxvZygic3RyaW5nIix0KTtsZXQgZT0yKnQubGVuZ3RoO3RoaXMuX2ludDMyKGUpO2xldCBpPW5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCxlKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKylpLnNldFVpbnQxNigyKmUsdC5jaGFyQ29kZUF0KGUpKTt0aGlzLm9mZnNldCs9ZSx0aGlzLndhaXRSZWFkKCJzdHJpbmciKX1faW50MzIodCl7bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRJbnQzMigwLHQpLHRoaXMub2Zmc2V0Kz00fWludDMyKHQpe3RoaXMubG9nKCJpbnQzMiIsdCksdGhpcy5faW50MzIodCksdGhpcy53YWl0UmVhZCgiaW50MzIiKX1ieXRlcyh0KXt0aGlzLmxvZygiYnl0ZXMiLHQpO2xldCBlPXQuYnl0ZUxlbmd0aDt0aGlzLl9pbnQzMihlKSxuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCkuc2V0KG5ldyBVaW50OEFycmF5KHQpKSx0aGlzLm9mZnNldCs9ZSx0aGlzLndhaXRSZWFkKCJieXRlcyIpfX1sZXQgcz0wLHI9MSxuPTIsbz00O2xldCBhPS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbD1uZXcgTWFwLGM9bmV3IE1hcDtmdW5jdGlvbiBoKHQsZSl7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGUpfWNsYXNzIGZ7Y29uc3RydWN0b3IodCxlPSJyZWFkb25seSIpe3RoaXMuZGI9dCx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sZSksdGhpcy5zdG9yZT10aGlzLnRyYW5zLm9iamVjdFN0b3JlKCJkYXRhIiksdGhpcy5sb2NrVHlwZT0icmVhZG9ubHkiPT09ZT9yOm8sdGhpcy5jYWNoZWRGaXJzdEJsb2NrPW51bGwsdGhpcy5jdXJzb3I9bnVsbCx0aGlzLnByZXZSZWFkcz1udWxsfWFzeW5jIHByZWZldGNoRmlyc3RCbG9jayh0KXtsZXQgZT1hd2FpdCB0aGlzLmdldCgwKTtyZXR1cm4gdGhpcy5jYWNoZWRGaXJzdEJsb2NrPWUsZX1hc3luYyB3YWl0Q29tcGxldGUoKXtyZXR1cm4gbmV3IFByb21pc2UoKCh0LGUpPT57dGhpcy5jb21taXQoKSx0aGlzLmxvY2tUeXBlPT09bz8odGhpcy50cmFucy5vbmNvbXBsZXRlPWU9PnQoKSx0aGlzLnRyYW5zLm9uZXJyb3I9dD0+ZSh0KSk6YT90aGlzLnRyYW5zLm9uY29tcGxldGU9ZT0+dCgpOnQoKX0pKX1jb21taXQoKXt0aGlzLnRyYW5zLmNvbW1pdCYmdGhpcy50cmFucy5jb21taXQoKX1hc3luYyB1cGdyYWRlRXhjbHVzaXZlKCl7dGhpcy5jb21taXQoKSx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sInJlYWR3cml0ZSIpLHRoaXMuc3RvcmU9dGhpcy50cmFucy5vYmplY3RTdG9yZSgiZGF0YSIpLHRoaXMubG9ja1R5cGU9bztsZXQgdD10aGlzLmNhY2hlZEZpcnN0QmxvY2s7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9dCYmbnVsbCE9ZSl7bGV0IGk9bmV3IFVpbnQ4QXJyYXkodCkscz1uZXcgVWludDhBcnJheShlKTtmb3IobGV0IHQ9MjQ7dDw0MDt0KyspaWYoaVt0XSE9PXNbdF0pcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIG51bGw9PXQmJm51bGw9PWV9KGF3YWl0IHRoaXMucHJlZmV0Y2hGaXJzdEJsb2NrKDUwMCksdCl9ZG93bmdyYWRlU2hhcmVkKCl7dGhpcy5jb21taXQoKSx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sInJlYWRvbmx5IiksdGhpcy5zdG9yZT10aGlzLnRyYW5zLm9iamVjdFN0b3JlKCJkYXRhIiksdGhpcy5sb2NrVHlwZT1yfWFzeW5jIGdldCh0KXtyZXR1cm4gbmV3IFByb21pc2UoKChlLGkpPT57bGV0IHM9dGhpcy5zdG9yZS5nZXQodCk7cy5vbnN1Y2Nlc3M9dD0+e2Uocy5yZXN1bHQpfSxzLm9uZXJyb3I9dD0+aSh0KX0pKX1nZXRSZWFkRGlyZWN0aW9uKCl7bGV0IHQ9dGhpcy5wcmV2UmVhZHM7aWYodCl7aWYodFswXTx0WzFdJiZ0WzFdPHRbMl0mJnRbMl0tdFswXTwxMClyZXR1cm4ibmV4dCI7aWYodFswXT50WzFdJiZ0WzFdPnRbMl0mJnRbMF0tdFsyXTwxMClyZXR1cm4icHJldiJ9cmV0dXJuIG51bGx9cmVhZCh0KXtsZXQgZT0oKT0+bmV3IFByb21pc2UoKCh0LGUpPT57aWYobnVsbCE9dGhpcy5jdXJzb3JQcm9taXNlKXRocm93IG5ldyBFcnJvcigid2FpdEN1cnNvcigpIGNhbGxlZCBidXQgc29tZXRoaW5nIGVsc2UgaXMgYWxyZWFkeSB3YWl0aW5nIik7dGhpcy5jdXJzb3JQcm9taXNlPXtyZXNvbHZlOnQscmVqZWN0OmV9fSkpO2lmKHRoaXMuY3Vyc29yKXtsZXQgaT10aGlzLmN1cnNvcjtyZXR1cm4ibmV4dCI9PT1pLmRpcmVjdGlvbiYmdD5pLmtleSYmdDxpLmtleSsxMDA/KGkuYWR2YW5jZSh0LWkua2V5KSxlKCkpOiJwcmV2Ij09PWkuZGlyZWN0aW9uJiZ0PGkua2V5JiZ0Pmkua2V5LTEwMD8oaS5hZHZhbmNlKGkua2V5LXQpLGUoKSk6KHRoaXMuY3Vyc29yPW51bGwsdGhpcy5yZWFkKHQpKX17bGV0IGk9dGhpcy5nZXRSZWFkRGlyZWN0aW9uKCk7aWYoaSl7bGV0IHM7dGhpcy5wcmV2UmVhZHM9bnVsbCxzPSJwcmV2Ij09PWk/SURCS2V5UmFuZ2UudXBwZXJCb3VuZCh0KTpJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO2xldCByPXRoaXMuc3RvcmUub3BlbkN1cnNvcihzLGkpO3JldHVybiByLm9uc3VjY2Vzcz10PT57bGV0IGU9dC50YXJnZXQucmVzdWx0O2lmKHRoaXMuY3Vyc29yPWUsbnVsbD09dGhpcy5jdXJzb3JQcm9taXNlKXRocm93IG5ldyBFcnJvcigiR290IGRhdGEgZnJvbSBjdXJzb3IgYnV0IG5vdGhpbmcgaXMgd2FpdGluZyBpdCIpO3RoaXMuY3Vyc29yUHJvbWlzZS5yZXNvbHZlKGU/ZS52YWx1ZTpudWxsKSx0aGlzLmN1cnNvclByb21pc2U9bnVsbH0sci5vbmVycm9yPXQ9PntpZihjb25zb2xlLmxvZygiQ3Vyc29yIGZhaWx1cmU6Iix0KSxudWxsPT10aGlzLmN1cnNvclByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJHb3QgZGF0YSBmcm9tIGN1cnNvciBidXQgbm90aGluZyBpcyB3YWl0aW5nIGl0Iik7dGhpcy5jdXJzb3JQcm9taXNlLnJlamVjdCh0KSx0aGlzLmN1cnNvclByb21pc2U9bnVsbH0sZSgpfXJldHVybiBudWxsPT10aGlzLnByZXZSZWFkcyYmKHRoaXMucHJldlJlYWRzPVswLDAsMF0pLHRoaXMucHJldlJlYWRzLnB1c2godCksdGhpcy5wcmV2UmVhZHMuc2hpZnQoKSx0aGlzLmdldCh0KX19YXN5bmMgc2V0KHQpe3JldHVybiB0aGlzLnByZXZSZWFkcz1udWxsLG5ldyBQcm9taXNlKCgoZSxpKT0+e2xldCBzPXRoaXMuc3RvcmUucHV0KHQudmFsdWUsdC5rZXkpO3Mub25zdWNjZXNzPXQ9PmUocy5yZXN1bHQpLHMub25lcnJvcj10PT5pKHQpfSkpfWFzeW5jIGJ1bGtTZXQodCl7dGhpcy5wcmV2UmVhZHM9bnVsbCxhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgodD0+dGhpcy5zZXQodCkpKSl9fWFzeW5jIGZ1bmN0aW9uIHUodCl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZSxpKT0+e2lmKGwuZ2V0KHQpKXJldHVybiB2b2lkIGUobC5nZXQodCkpO2xldCBzPWdsb2JhbFRoaXMuaW5kZXhlZERCLm9wZW4odCwyKTtzLm9uc3VjY2Vzcz1pPT57bGV0IHM9aS50YXJnZXQucmVzdWx0O3Mub252ZXJzaW9uY2hhbmdlPSgpPT57Y29uc29sZS5sb2coImNsb3NpbmcgYmVjYXVzZSB2ZXJzaW9uIGNoYW5nZWQiKSxzLmNsb3NlKCksbC5kZWxldGUodCl9LHMub25jbG9zZT0oKT0+e2wuZGVsZXRlKHQpfSxsLnNldCh0LHMpLGUocyl9LHMub251cGdyYWRlbmVlZGVkPXQ9PntsZXQgZT10LnRhcmdldC5yZXN1bHQ7ZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCJkYXRhIil8fGUuY3JlYXRlT2JqZWN0U3RvcmUoImRhdGEiKX0scy5vbmJsb2NrZWQ9dD0+Y29uc29sZS5sb2coImJsb2NrZWQiLHQpLHMub25lcnJvcj1zLm9uYWJvcnQ9dD0+aSh0LnRhcmdldC5lcnJvcil9KSl9YXN5bmMgZnVuY3Rpb24gdyh0LGUsaSl7bGV0IHM9Yy5nZXQodCk7aWYocyl7aWYoInJlYWR3cml0ZSI9PT1lJiZzLmxvY2tUeXBlPT09cil0aHJvdyBuZXcgRXJyb3IoIkF0dGVtcHRlZCB3cml0ZSBidXQgb25seSBoYXMgU0hBUkVEIGxvY2siKTtyZXR1cm4gaShzKX1zPW5ldyBmKGF3YWl0IHUodCksZSksYXdhaXQgaShzKSxhd2FpdCBzLndhaXRDb21wbGV0ZSgpfWFzeW5jIGZ1bmN0aW9uIGQodCxlLGkpe2xldCBuPWZ1bmN0aW9uKHQpe3JldHVybiBjLmdldCh0KX0oZSk7aWYoaT09PXIpe2lmKG51bGw9PW4pdGhyb3cgbmV3IEVycm9yKCJVbmxvY2sgZXJyb3IgKFNIQVJFRCk6IG5vIHRyYW5zYWN0aW9uIHJ1bm5pbmciKTtuLmxvY2tUeXBlPT09byYmbi5kb3duZ3JhZGVTaGFyZWQoKX1lbHNlIGk9PT1zJiZuJiYoYXdhaXQgbi53YWl0Q29tcGxldGUoKSxjLmRlbGV0ZShlKSk7dC5pbnQzMigwKSx0LmZpbmFsaXplKCl9YXN5bmMgZnVuY3Rpb24gZyh0LGUpe2xldCBpPXQuc3RyaW5nKCk7c3dpdGNoKGkpe2Nhc2UicHJvZmlsZS1zdGFydCI6dC5kb25lKCksZS5pbnQzMigwKSxlLmZpbmFsaXplKCksZyh0LGUpO2JyZWFrO2Nhc2UicHJvZmlsZS1zdG9wIjp0LmRvbmUoKSxhd2FpdCBuZXcgUHJvbWlzZSgodD0+c2V0VGltZW91dCh0LDFlMykpKSxlLmludDMyKDApLGUuZmluYWxpemUoKSxnKHQsZSk7YnJlYWs7Y2FzZSJ3cml0ZUJsb2NrcyI6e2xldCBpPXQuc3RyaW5nKCkscz1bXTtmb3IoOyF0LmRvbmUoKTspe2xldCBlPXQuaW50MzIoKSxpPXQuYnl0ZXMoKTtzLnB1c2goe3BvczplLGRhdGE6aX0pfWF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdyhlLCJyZWFkd3JpdGUiLChhc3luYyBlPT57YXdhaXQgZS5idWxrU2V0KGkubWFwKCh0PT4oe2tleTp0LnBvcyx2YWx1ZTp0LmRhdGF9KSkpKSx0LmludDMyKDApLHQuZmluYWxpemUoKX0pKX0oZSxpLHMpLGcodCxlKTticmVha31jYXNlInJlYWRCbG9jayI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe3JldHVybiB3KGUsInJlYWRvbmx5IiwoYXN5bmMgZT0+e2xldCBzPWF3YWl0IGUucmVhZChpKTtudWxsPT1zP3QuYnl0ZXMobmV3IEFycmF5QnVmZmVyKDApKTp0LmJ5dGVzKHMpLHQuZmluYWxpemUoKX0pKX0oZSxpLHMpLGcodCxlKTticmVha31jYXNlInJlYWRNZXRhIjp7bGV0IGk9dC5zdHJpbmcoKTt0LmRvbmUoKSxhd2FpdCBhc3luYyBmdW5jdGlvbih0LGUpe3JldHVybiB3KGUsInJlYWRvbmx5IiwoYXN5bmMgaT0+e3RyeXtjb25zb2xlLmxvZygiUmVhZGluZyBtZXRhLi4uIik7bGV0IHM9YXdhaXQgaS5nZXQoLTEpO2lmKGNvbnNvbGUubG9nKGBHb3QgbWV0YSBmb3IgJHtlfTpgLHMpLG51bGw9PXMpdC5pbnQzMigtMSksdC5pbnQzMig0MDk2KSx0LmZpbmFsaXplKCk7ZWxzZXtsZXQgZT1hd2FpdCBpLmdldCgwKSxyPTQwOTY7ZSYmKHI9MjU2Km5ldyBVaW50MTZBcnJheShlKVs4XSksdC5pbnQzMihzLnNpemUpLHQuaW50MzIociksdC5maW5hbGl6ZSgpfX1jYXRjaChlKXtjb25zb2xlLmxvZyhlKSx0LmludDMyKC0xKSx0LmludDMyKC0xKSx0LmZpbmFsaXplKCl9fSkpfShlLGkpLGcodCxlKTticmVha31jYXNlIndyaXRlTWV0YSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe3JldHVybiB3KGUsInJlYWR3cml0ZSIsKGFzeW5jIGU9Pnt0cnl7YXdhaXQgZS5zZXQoe2tleTotMSx2YWx1ZTppfSksdC5pbnQzMigwKSx0LmZpbmFsaXplKCl9Y2F0Y2goZSl7Y29uc29sZS5sb2coZSksdC5pbnQzMigtMSksdC5maW5hbGl6ZSgpfX0pKX0oZSxpLHtzaXplOnN9KSxnKHQsZSk7YnJlYWt9Y2FzZSJjbG9zZUZpbGUiOntsZXQgaT10LnN0cmluZygpO3QuZG9uZSgpLGUuaW50MzIoMCksZS5maW5hbGl6ZSgpLGZ1bmN0aW9uKHQpe2xldCBlPWwuZ2V0KHQpO2UmJihlLmNsb3NlKCksbC5kZWxldGUodCkpfShpKSxzZWxmLmNsb3NlKCk7YnJlYWt9Y2FzZSJsb2NrRmlsZSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe2xldCBzPWMuZ2V0KGUpO2lmKHMpaWYoaT5zLmxvY2tUeXBlKXtoKHMubG9ja1R5cGU9PT1yLGBVcHJhZGluZyBsb2NrIHR5cGUgZnJvbSAke3MubG9ja1R5cGV9IGlzIGludmFsaWRgKSxoKGk9PT1ufHxpPT09byxgVXBncmFkaW5nIGxvY2sgdHlwZSB0byAke2l9IGlzIGludmFsaWRgKTtsZXQgZT1hd2FpdCBzLnVwZ3JhZGVFeGNsdXNpdmUoKTt0LmludDMyKGU/MDotMSksdC5maW5hbGl6ZSgpfWVsc2UgaChzLmxvY2tUeXBlPT09aSxgRG93bmdyYWRpbmcgbG9jayB0byAke2l9IGlzIGludmFsaWRgKSx0LmludDMyKDApLHQuZmluYWxpemUoKTtlbHNle2goaT09PXIsYE5ldyBsb2NrcyBtdXN0IHN0YXJ0IGFzIFNIQVJFRCBpbnN0ZWFkIG9mICR7aX1gKTtsZXQgcz1uZXcgZihhd2FpdCB1KGUpKTthd2FpdCBzLnByZWZldGNoRmlyc3RCbG9jayg1MDApLGMuc2V0KGUscyksdC5pbnQzMigwKSx0LmZpbmFsaXplKCl9fShlLGkscyksZyh0LGUpO2JyZWFrfWNhc2UidW5sb2NrRmlsZSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgZChlLGkscyksZyh0LGUpO2JyZWFrfWRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIG1ldGhvZDogIitpKX19c2VsZi5vbm1lc3NhZ2U9dD0+e3N3aXRjaCh0LmRhdGEudHlwZSl7Y2FzZSJpbml0Ijp7bGV0W3Mscl09dC5kYXRhLmJ1ZmZlcnM7ZyhuZXcgZShzLHtuYW1lOiJhcmdzIixkZWJ1ZzohMX0pLG5ldyBpKHIse25hbWU6InJlc3VsdHMiLGRlYnVnOiExfSkpO2JyZWFrfX19fSgpOwoK\", null, false);\nvar indexeddbMainThreadWorkerD62f296a = /* @__PURE__ */Object.freeze( /* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  \"default\": WorkerFactory\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { absurdWebBackend, buildRunQueriesCommand, runWorkerCommand };","map":{"version":3,"mappings":"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","names":["WorkerGlobalScope","self","getModule","argBuffer","resultBuffer","parentWorker","isWorker","Error","Worker","then","BackendWorker","default","worker","postMessage","type","buffers","addEventListener","msg","data","spawnEventName","startWorkerFromMain","makeStartWorkerFromMain","e","initBackend","makeInitBackend","Promise","resolve","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","d2","b2","p","prototype","hasOwnProperty","call","TypeError","String","constructor","create","__","thisArg","_arguments","P","generator","value","reject","step","next","result","done","adopt","fulfilled","rejected","apply","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","pop","length","push","o","s","m","i","r","ar","error","to","from2","pack","arguments","l","slice","concat","__await","asyncIterator","q","a","resume","settle","fulfill","shift","__values","v2","createImpl","_super","instance","stack","ctorFunc","UnsubscriptionError","createErrorClass","errors","message","map","err","toString","join","name","arr","item","index","indexOf","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","Subscription2","unsubscribe","e_1","_a","e_2","_b","isArray","_parentage_1","_parentage_1_1","parent_1","remove","e_1_1","return","initialFinalizer","isFunction","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","__spreadArray","__read","e_2_1","add","teardown","_hasParent","_addParent","parent","includes","_removeParent","arrRemove","EMPTY","empty","EMPTY_SUBSCRIPTION","config","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","setTimeout","handler","timeout2","args","_i","delegate","clearTimeout","handle","context","cb","isRoot","errorThrown","Subscriber","__extends","Subscriber2","destination","_this","isStopped","isSubscription","EMPTY_OBSERVER","complete","SafeSubscriber","_next","_error","_complete","_bind","Function","bind","fn","ConsumerObserver","partialObserver","ConsumerObserver2","handleUnhandledError","SafeSubscriber2","observerOrNext","context_1","reportUnhandledError","noop","defaultErrorHandler","observable","x","fns","identity","input","reduce","prev","Observable","subscribe","_subscribe","Observable2","lift","operator","observable2","source","subscriber","isSubscriber","errorContext","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","Symbol_observable","pipe","operations","pipeFromArray","toPromise","isObserver","init","hasLift","liftedSource","onNext","onComplete","onError","onFinalize","OperatorSubscriber","OperatorSubscriber2","shouldUnsubscribe","err2","closed_1","ObjectUnsubscribedError","Subject","Subject2","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","from","_c","observer","defineProperty","get","enumerable","configurable","_checkFinalizedStatuses","_innerSubscribe","asObservable","AnonymousSubject2","dateTimestampProvider","now","Date","ReplaySubject","ReplaySubject2","_bufferSize","_windowTime","_timestampProvider","Infinity","_buffer","_infiniteTimeWindow","Math","max","_trimBuffer","subscription","copy","adjustedBufferSize","last2","Action","Action2","scheduler","work","schedule","state","delay","intervalProvider","setInterval","clearInterval","AsyncAction","AsyncAction2","pending","id","recycleAsyncId","requestAsyncId","_id","flush","_scheduler","execute","_execute","_delay","errored","errorValue","actions","Scheduler","schedulerActionCtor","Scheduler2","AsyncScheduler","AsyncScheduler2","SchedulerAction","_active","_scheduled","action","asyncScheduler","isScheduler","last","isArrayLike","obj","getSymbolIterator","Symbol_iterator","readableStream","__asyncGenerator","reader","__generator","getReader","read","releaseLock","isInteropObservable","fromInteropObservable","fromArrayLike","isPromise","fromPromise","isAsyncIterable","fromAsyncIterable","isIterable","fromIterable","isReadableStreamLike","fromReadableStreamLike","createInvalidObservableTypeError","obs","array","promise","iterable","iterable_1","iterable_1_1","asyncIterable","process","catch","readableStreamLikeToAsyncGenerator","asyncIterable_1","asyncIterable_1_1","__awaiter","__asyncValues","parentSubscription","repeat","scheduleSubscription","operate","createOperatorSubscriber","executeSchedule","innerFrom","subscribeOn","observeOn","iterator2","scheduleAsyncIterable","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","scheduled","popScheduler","errorOrErrorFactory","errorFactory","EmptyError","config2","hasConfig","defaultValue","isNaN","TimeoutError","info","schedulerArg","isValidDate","first","each","first2","with","_with","timeoutErrorFactory","_d","meta","originalSourceSubscription","timerSubscription","lastValue","seen","startTimer","project","predicate","hasValue","count","defaultErrorFactory","hasDefaultValue","filter","take","defaultIfEmpty","throwIfEmpty","options","connector","resetOnError","resetOnComplete","resetOnRefCountZero","wrapperSource","connection","resetConnection","refCount","hasCompleted","hasErrored","cancelReset","reset","resetAndUnsubscribe","conn","dest","handleReset","on","resultSelector","innerSubscriber","isComplete","checkComplete","innerIndex","outerIndex","innerValue","notifier","characters","charactersLength","charAt","floor","random","table","dependsOnTables","allDependingTables","tableDefs","def","tableSymbol","insertRegex","deleteRegex","updateRegex","strip","str","replace","split","_rawStrings","_rawValues","len","toSql","_values","isTable","tables","valuesLength","strings","tablesLength","tableI","val","child","sql2","_strings","childVal","childI","values","childTableI","pos","rawString","isModifyQuery","preparedQuery","text","query","match","isReadQuery","isEmpty","trim","hash","_hash","raw","_cachedText","inspect","values2","rawStrings","rawValues","sql","liter","isSql","separator","prefix","suffix","internalSql","fill","buildRunQueriesCommand","queries","opts","commandId","makeId","logOpts","log","backendState","command","messagesFromWorker$","messagesToWorker$","stop$","waitResponse","firstValueFrom","ev","switchMap","status","of","timeout","queryTimeout","throwError","JSON","stringify","takeUntil","runWorkerCommand","absurdWebBackend","wasmUrl","pageSize","cacheSize","dbName","stopped$","DbWorker","mes","initializedWorker","sub","share","terminate","initialize","initPromise","url","URL","document","baseURI","execQueries","base64","enableUnicode","binaryString","atob","binaryView","Uint8Array","charCodeAt","fromCharCode","Uint16Array","buffer","sourcemapArg","enableUnicodeArg","sourcemap","decodeBase64","start","substring","blob2","Blob","createObjectURL","createURL","WorkerFactory","createBase64WorkerFactory"],"sources":["../../../node_modules/@kikko-land/better-absurd-sql/dist/indexeddb-main-thread.js","../../../node_modules/tslib/tslib.es6.js","../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","../../../node_modules/rxjs/dist/esm5/internal/config.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","../../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../../../node_modules/rxjs/dist/esm5/internal/Observable.js","../../../node_modules/rxjs/dist/esm5/internal/util/lift.js","../../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","../../../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../../../node_modules/rxjs/dist/esm5/internal/Subject.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js","../../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/Action.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/intervalProvider.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/AsyncAction.js","../../../node_modules/rxjs/dist/esm5/internal/Scheduler.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/AsyncScheduler.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/async.js","../../../node_modules/rxjs/dist/esm5/internal/observable/empty.js","../../../node_modules/rxjs/dist/esm5/internal/util/isScheduler.js","../../../node_modules/rxjs/dist/esm5/internal/util/args.js","../../../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","../../../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","../../../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","../../../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","../../../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","../../../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","../../../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","../../../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","../../../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","../../../node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","../../../node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","../../../node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","../../../node_modules/rxjs/dist/esm5/internal/observable/from.js","../../../node_modules/rxjs/dist/esm5/internal/observable/of.js","../../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js","../../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js","../../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js","../../../node_modules/rxjs/dist/esm5/internal/util/isDate.js","../../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js","../../../node_modules/rxjs/dist/esm5/internal/operators/map.js","../../../node_modules/rxjs/dist/esm5/internal/operators/filter.js","../../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js","../../../node_modules/rxjs/dist/esm5/internal/operators/take.js","../../../node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js","../../../node_modules/rxjs/dist/esm5/internal/operators/first.js","../../../node_modules/rxjs/dist/esm5/internal/operators/share.js","../../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js","../../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js","../../kikko/src/utils.ts","../../sql/src/table.ts","../../sql/src/sql.ts","../src/commands.ts","../src/runWorkerCommand.ts","../src/absurdWebBackend.ts","../../../node_modules/@kikko-land/better-absurd-sql/dist/indexeddb-main-thread-worker-d62f296a.js"],"sourcesContent":["// The reason for this strange abstraction is because we can't rely on\n// nested worker support (Safari doesn't support it). We need to proxy\n// creating a child worker through the main thread, and this requires\n// a bit of glue code. We don't want to duplicate this code in each\n// backend that needs it, so this module abstracts it out. It has to\n// have a strange shape because we don't want to eagerly bundle the\n// backend code, so users of this code need to pass an `() =>\n// import('worker.js')` expression to get the worker module to run.\n\nfunction isWorker() {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope\n  );\n}\n\nfunction makeStartWorkerFromMain(getModule) {\n  return (argBuffer, resultBuffer, parentWorker) => {\n    if (isWorker()) {\n      throw new Error(\n        '`startWorkerFromMain` should only be called from the main thread'\n      );\n    }\n\n    if (typeof Worker === 'undefined') {\n      // We're on the main thread? Weird: it doesn't have workers\n      throw new Error(\n        'Web workers not available. sqlite3 requires web workers to work.'\n      );\n    }\n\n    getModule().then(({ default: BackendWorker }) => {\n      let worker = new BackendWorker();\n\n      worker.postMessage({ type: 'init', buffers: [argBuffer, resultBuffer] });\n\n      worker.addEventListener('message', (msg) => {\n        // Forward any messages to the worker that's supposed\n        // to be the parent\n        parentWorker.postMessage(msg.data);\n      });\n    });\n  };\n}\n\nfunction makeInitBackend(spawnEventName, getModule) {\n  const startWorkerFromMain = makeStartWorkerFromMain(getModule);\n\n  return (worker) => {\n    worker.addEventListener('message', (e) => {\n      switch (e.data.type) {\n        case spawnEventName:\n          startWorkerFromMain(e.data.argBuffer, e.data.resultBuffer, worker);\n          break;\n      }\n    });\n  };\n}\n\n// Use the generic main thread module to create our indexeddb worker\n// proxy\nconst initBackend = makeInitBackend('__absurd:spawn-idb-worker', () =>\n  import('./indexeddb-main-thread-worker-d62f296a.js')\n);\n\nexport { initBackend };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined,\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","export var dateTimestampProvider = {\n    now: function () {\n        return (dateTimestampProvider.delegate || Date).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=dateTimestampProvider.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(_bufferSize, _windowTime, _timestampProvider) {\n        if (_bufferSize === void 0) { _bufferSize = Infinity; }\n        if (_windowTime === void 0) { _windowTime = Infinity; }\n        if (_timestampProvider === void 0) { _timestampProvider = dateTimestampProvider; }\n        var _this = _super.call(this) || this;\n        _this._bufferSize = _bufferSize;\n        _this._windowTime = _windowTime;\n        _this._timestampProvider = _timestampProvider;\n        _this._buffer = [];\n        _this._infiniteTimeWindow = true;\n        _this._infiniteTimeWindow = _windowTime === Infinity;\n        _this._bufferSize = Math.max(1, _bufferSize);\n        _this._windowTime = Math.max(1, _windowTime);\n        return _this;\n    }\n    ReplaySubject.prototype.next = function (value) {\n        var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;\n        if (!isStopped) {\n            _buffer.push(value);\n            !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n        }\n        this._trimBuffer();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._trimBuffer();\n        var subscription = this._innerSubscribe(subscriber);\n        var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;\n        var copy = _buffer.slice();\n        for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n            subscriber.next(copy[i]);\n        }\n        this._checkFinalizedStatuses(subscriber);\n        return subscription;\n    };\n    ReplaySubject.prototype._trimBuffer = function () {\n        var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;\n        var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n        _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n        if (!_infiniteTimeWindow) {\n            var now = _timestampProvider.now();\n            var last = 0;\n            for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n                last = i;\n            }\n            last && _buffer.splice(0, last + 1);\n        }\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\n//# sourceMappingURL=ReplaySubject.js.map","import { __extends } from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = (function (_super) {\n    __extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var intervalProvider = {\n    setInterval: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = intervalProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n            return delegate.setInterval.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setInterval.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearInterval: function (handle) {\n        var delegate = intervalProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=intervalProvider.js.map","import { __extends } from \"tslib\";\nimport { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nvar AsyncAction = (function (_super) {\n    __extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, _id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (_scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        intervalProvider.clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, _delay) {\n        var errored = false;\n        var errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            var _a = this, id = _a.id, scheduler = _a.scheduler;\n            var actions = scheduler.actions;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            _super.prototype.unsubscribe.call(this);\n        }\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map","import { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar Scheduler = (function () {\n    function Scheduler(schedulerActionCtor, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.schedulerActionCtor = schedulerActionCtor;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.schedulerActionCtor(this, work).schedule(state, delay);\n    };\n    Scheduler.now = dateTimestampProvider.now;\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map","import { __extends } from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = (function (_super) {\n    __extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        var _this = _super.call(this, SchedulerAction, now) || this;\n        _this.actions = [];\n        _this._active = false;\n        _this._scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var asyncScheduler = new AsyncScheduler(AsyncAction);\nexport var async = asyncScheduler;\n//# sourceMappingURL=async.js.map","import { Observable } from '../Observable';\nexport var EMPTY = new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    return from(args, scheduler);\n}\n//# sourceMappingURL=of.js.map","import { Observable } from '../Observable';\nimport { isFunction } from '../util/isFunction';\nexport function throwError(errorOrErrorFactory, scheduler) {\n    var errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : function () { return errorOrErrorFactory; };\n    var init = function (subscriber) { return subscriber.error(errorFactory()); };\n    return new Observable(scheduler ? function (subscriber) { return scheduler.schedule(init, 0, subscriber); } : init);\n}\n//# sourceMappingURL=throwError.js.map","import { createErrorClass } from './createErrorClass';\nexport var EmptyError = createErrorClass(function (_super) { return function EmptyErrorImpl() {\n    _super(this);\n    this.name = 'EmptyError';\n    this.message = 'no elements in sequence';\n}; });\n//# sourceMappingURL=EmptyError.js.map","import { EmptyError } from './util/EmptyError';\nimport { SafeSubscriber } from './Subscriber';\nexport function firstValueFrom(source, config) {\n    var hasConfig = typeof config === 'object';\n    return new Promise(function (resolve, reject) {\n        var subscriber = new SafeSubscriber({\n            next: function (value) {\n                resolve(value);\n                subscriber.unsubscribe();\n            },\n            error: reject,\n            complete: function () {\n                if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n        source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=firstValueFrom.js.map","export function isValidDate(value) {\n    return value instanceof Date && !isNaN(value);\n}\n//# sourceMappingURL=isDate.js.map","import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport var TimeoutError = createErrorClass(function (_super) {\n    return function TimeoutErrorImpl(info) {\n        if (info === void 0) { info = null; }\n        _super(this);\n        this.message = 'Timeout has occurred';\n        this.name = 'TimeoutError';\n        this.info = info;\n    };\n});\nexport function timeout(config, schedulerArg) {\n    var _a = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config), first = _a.first, each = _a.each, _b = _a.with, _with = _b === void 0 ? timeoutErrorFactory : _b, _c = _a.scheduler, scheduler = _c === void 0 ? schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler : _c, _d = _a.meta, meta = _d === void 0 ? null : _d;\n    if (first == null && each == null) {\n        throw new TypeError('No timeout provided.');\n    }\n    return operate(function (source, subscriber) {\n        var originalSourceSubscription;\n        var timerSubscription;\n        var lastValue = null;\n        var seen = 0;\n        var startTimer = function (delay) {\n            timerSubscription = executeSchedule(subscriber, scheduler, function () {\n                try {\n                    originalSourceSubscription.unsubscribe();\n                    innerFrom(_with({\n                        meta: meta,\n                        lastValue: lastValue,\n                        seen: seen,\n                    })).subscribe(subscriber);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }, delay);\n        };\n        originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            seen++;\n            subscriber.next((lastValue = value));\n            each > 0 && startTimer(each);\n        }, undefined, undefined, function () {\n            if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n                timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            }\n            lastValue = null;\n        }));\n        !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler.now()) : each);\n    });\n}\nfunction timeoutErrorFactory(info) {\n    throw new TimeoutError(info);\n}\n//# sourceMappingURL=timeout.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function defaultIfEmpty(defaultValue) {\n    return operate(function (source, subscriber) {\n        var hasValue = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            hasValue = true;\n            subscriber.next(value);\n        }, function () {\n            if (!hasValue) {\n                subscriber.next(defaultValue);\n            }\n            subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=defaultIfEmpty.js.map","import { EMPTY } from '../observable/empty';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function take(count) {\n    return count <= 0\n        ?\n            function () { return EMPTY; }\n        : operate(function (source, subscriber) {\n            var seen = 0;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                if (++seen <= count) {\n                    subscriber.next(value);\n                    if (count <= seen) {\n                        subscriber.complete();\n                    }\n                }\n            }));\n        });\n}\n//# sourceMappingURL=take.js.map","import { EmptyError } from '../util/EmptyError';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) { errorFactory = defaultErrorFactory; }\n    return operate(function (source, subscriber) {\n        var hasValue = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            hasValue = true;\n            subscriber.next(value);\n        }, function () { return (hasValue ? subscriber.complete() : subscriber.error(errorFactory())); }));\n    });\n}\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map","import { EmptyError } from '../util/EmptyError';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\nexport function first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) {\n        return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); }));\n    };\n}\n//# sourceMappingURL=first.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { from } from '../observable/from';\nimport { take } from '../operators/take';\nimport { Subject } from '../Subject';\nimport { SafeSubscriber } from '../Subscriber';\nimport { operate } from '../util/lift';\nexport function share(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.connector, connector = _a === void 0 ? function () { return new Subject(); } : _a, _b = options.resetOnError, resetOnError = _b === void 0 ? true : _b, _c = options.resetOnComplete, resetOnComplete = _c === void 0 ? true : _c, _d = options.resetOnRefCountZero, resetOnRefCountZero = _d === void 0 ? true : _d;\n    return function (wrapperSource) {\n        var connection = null;\n        var resetConnection = null;\n        var subject = null;\n        var refCount = 0;\n        var hasCompleted = false;\n        var hasErrored = false;\n        var cancelReset = function () {\n            resetConnection === null || resetConnection === void 0 ? void 0 : resetConnection.unsubscribe();\n            resetConnection = null;\n        };\n        var reset = function () {\n            cancelReset();\n            connection = subject = null;\n            hasCompleted = hasErrored = false;\n        };\n        var resetAndUnsubscribe = function () {\n            var conn = connection;\n            reset();\n            conn === null || conn === void 0 ? void 0 : conn.unsubscribe();\n        };\n        return operate(function (source, subscriber) {\n            refCount++;\n            if (!hasErrored && !hasCompleted) {\n                cancelReset();\n            }\n            var dest = (subject = subject !== null && subject !== void 0 ? subject : connector());\n            subscriber.add(function () {\n                refCount--;\n                if (refCount === 0 && !hasErrored && !hasCompleted) {\n                    resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);\n                }\n            });\n            dest.subscribe(subscriber);\n            if (!connection) {\n                connection = new SafeSubscriber({\n                    next: function (value) { return dest.next(value); },\n                    error: function (err) {\n                        hasErrored = true;\n                        cancelReset();\n                        resetConnection = handleReset(reset, resetOnError, err);\n                        dest.error(err);\n                    },\n                    complete: function () {\n                        hasCompleted = true;\n                        cancelReset();\n                        resetConnection = handleReset(reset, resetOnComplete);\n                        dest.complete();\n                    },\n                });\n                from(source).subscribe(connection);\n            }\n        })(wrapperSource);\n    };\n}\nfunction handleReset(reset, on) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    if (on === true) {\n        reset();\n        return null;\n    }\n    if (on === false) {\n        return null;\n    }\n    return on.apply(void 0, __spreadArray([], __read(args))).pipe(take(1))\n        .subscribe(function () { return reset(); });\n}\n//# sourceMappingURL=share.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n    return operate(function (source, subscriber) {\n        var innerSubscriber = null;\n        var index = 0;\n        var isComplete = false;\n        var checkComplete = function () { return isComplete && !innerSubscriber && subscriber.complete(); };\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n            var innerIndex = 0;\n            var outerIndex = index++;\n            innerFrom(project(value, outerIndex)).subscribe((innerSubscriber = createOperatorSubscriber(subscriber, function (innerValue) { return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue); }, function () {\n                innerSubscriber = null;\n                checkComplete();\n            })));\n        }, function () {\n            isComplete = true;\n            checkComplete();\n        }));\n    });\n}\n//# sourceMappingURL=switchMap.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nimport { noop } from '../util/noop';\nexport function takeUntil(notifier) {\n    return operate(function (source, subscriber) {\n        innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber, function () { return subscriber.complete(); }, noop));\n        !subscriber.closed && source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=takeUntil.js.map","import { ISql } from \"@kikko-land/sql\";\n\nimport { IDbState, IQuery } from \"./types\";\n\nexport const assureDbIsRunning = (state: IDbState, toStart: () => string) => {\n  const {\n    sharedState: { runningState$, dbName },\n  } = state;\n\n  if (runningState$.value !== \"running\") {\n    throw new Error(`Failed to start ${toStart()}, db ${dbName} is stopping`);\n  }\n};\n\nexport const unwrapQueries = (queries: ISql[]): IQuery[] => {\n  return queries.map((q) => q.preparedQuery);\n};\n\nexport function makeId() {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < 32; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n\n  return result;\n}\n","export const tableSymbol: unique symbol = Symbol(\"table\");\n\nexport interface ITableDef {\n  name: string;\n  dependsOnTables: ITableDef[];\n  __discriminator: \"ITableDef\";\n  allDependingTables: ITableDef[];\n}\n\nexport interface IContainsTable {\n  [tableSymbol]: ITableDef;\n}\n\nexport const table = (\n  name: string,\n  dependsOnTables?: ITableDef[]\n): ITableDef & IContainsTable => {\n  return {\n    name,\n    dependsOnTables: dependsOnTables || [],\n    get allDependingTables() {\n      const tableDefs: ITableDef[] = [];\n\n      this.dependsOnTables.forEach((def) => {\n        tableDefs.push(...def.allDependingTables);\n      });\n\n      return tableDefs;\n    },\n    get [tableSymbol]() {\n      return this;\n    },\n    __discriminator: \"ITableDef\",\n  };\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isTable(x: any): x is IContainsTable {\n  if (x === null) return false;\n  if (typeof x !== \"object\") return false;\n\n  return Boolean(x[tableSymbol]);\n}\n","import {\n  IContainsTable,\n  isTable,\n  ITableDef,\n  table,\n  tableSymbol,\n} from \"./table\";\n\n// Code is taken and adopted from https://github.com/blakeembrey/sql-template-tag\n\nexport type IPrimitiveValue = string | number | null | Uint8Array;\nexport const isPrimitiveValue = (t: unknown): t is IPrimitiveValue => {\n  return (\n    t === null ||\n    typeof t === \"string\" ||\n    typeof t === \"number\" ||\n    t instanceof Uint8Array\n  );\n};\n\nexport type IRawValue = IPrimitiveValue | ISql | IContainsTable | ISqlAdapter;\n\nconst insertRegex = /insert\\s+(or\\s+\\w+\\s+)?into\\s+/gim;\nconst deleteRegex = /delete\\s+from\\s+/gim;\nconst updateRegex = /update\\s+(or\\s+\\w+\\s+)?/gim;\n\nconst strip = (str: string) => {\n  return str\n    .replace(/\"/g, \"\")\n    .split(\".\")\n    .map((v) => '\"' + v + '\"')\n    .join(\".\");\n};\n\nexport interface ISqlAdapter {\n  toSql(): ISql;\n}\n\nfunction isSql(x: unknown): x is ISqlAdapter {\n  if (x === null) return false;\n  if (typeof x !== \"object\") return false;\n\n  return \"toSql\" in x;\n}\n\nexport interface ISql extends ISqlAdapter {\n  readonly _values: IPrimitiveValue[];\n  readonly _strings: string[];\n  readonly tables: ITableDef[];\n\n  _cachedText?: string;\n  _hash?: string;\n\n  get isModifyQuery(): boolean;\n  get isReadQuery(): boolean;\n  get isEmpty(): boolean;\n  get raw(): string;\n\n  get hash(): string;\n\n  get preparedQuery(): {\n    values: IPrimitiveValue[];\n    text: string;\n  };\n\n  inspect(): {\n    preparedQuery: ISql[\"preparedQuery\"];\n    tables: ISql[\"tables\"];\n  };\n\n  toString(): string;\n}\n\nfunction internalSql(\n  _rawStrings: ReadonlyArray<string>,\n  _rawValues: IRawValue[]\n\n): ISql {\n\n\n  if (_rawStrings.length - 1 !== _rawValues.length) {\n    if (_rawStrings.length === 0) {\n      throw new TypeError(\"Expected at least 1 string\");\n    }\n\n    throw new TypeError(\n      `Expected ${_rawStrings.length} strings to have ${\n        _rawStrings.length - 1\n      } values`\n    );\n  }\n\n  const valuesLength = _rawValues.reduce<number>(\n    (len, value) =>\n      len +\n      (isSql(value) ? value.toSql()._values.length : isTable(value) ? 0 : 1),\n    0\n  );\n  const tablesLength = _rawValues.reduce<number>(\n    (len, value) =>\n      len +\n      (isSql(value) ? value.toSql().tables.length : isTable(value) ? 1 : 0),\n    0\n  );\n\n  const values: IPrimitiveValue[] = new Array(valuesLength);\n  const strings: string[] = new Array(valuesLength + 1);\n  const tables: ITableDef[] = new Array(tablesLength);\n\n  strings[0] = _rawStrings[0];\n\n  // Iterate over rw values, strings, and children. The value is always\n  // positioned between two strings, e.g. `index + 1`.\n  let pos = 0,\n    tableI = 0;\n\n  _rawValues.forEach((val, i) => {\n    const child = _rawValues[i];\n    const rawString = _rawStrings[i + 1];\n\n    // Check for nested `sql` queries.\n    if (isSql(child)) {\n      const sql = child.toSql();\n      // Append child prefix text to current string.\n      strings[pos] += sql._strings[0];\n\n      sql._values.forEach((childVal, childI) => {\n        values[pos++] = sql._values[childI];\n        strings[pos] = sql._strings[childI + 1];\n      });\n\n      sql.tables.forEach((t, childTableI) => {\n        tables[tableI++] = sql.tables[childTableI++];\n      });\n\n      // Append raw string to current string.\n      strings[pos] += rawString;\n    } else if (isTable(child)) {\n      strings[pos] += strip(child[tableSymbol].name) + rawString;\n\n      tables[tableI++] = child[tableSymbol];\n    } else {\n      values[pos++] = child;\n      strings[pos] = rawString;\n    }\n  });\n\n  return {\n    _values: values,\n    _strings: strings,\n    tables: tables,\n\n    get isModifyQuery() {\n      const query = this.preparedQuery.text;\n\n      // There some edge cases could happen here, so better regex could be introduced\n      // I don't want put AST parser to frontend lib\n      return (\n        query.match(insertRegex) !== null ||\n        query.match(deleteRegex) !== null ||\n        query.match(updateRegex) !== null\n      );\n    },\n    get isReadQuery() {\n      return !this.isModifyQuery;\n    },\n    get isEmpty() {\n      return this.preparedQuery.text.trim().length === 0;\n    },\n\n    get hash() {\n      if (!this._hash) {\n        this._hash = this._strings.join() + this._values.join();\n      }\n\n      return this._hash;\n    },\n\n    get raw() {\n      return (\n        this._strings[0] +\n        this._strings\n          .slice(1)\n          .map(\n            (val, i) =>\n              (typeof this._values[i] === \"string\"\n                ? \"'\" + this._values[i] + \"'\"\n                : this._values[i]) + val\n          )\n          .join(\"\")\n      );\n    },\n\n    get preparedQuery() {\n      if (!this._cachedText) {\n        this._cachedText = (\n          this._strings[0] +\n          this._strings\n            .slice(1)\n            .map((val, i) => `?${val}`)\n            .join(\"\")\n        ).trim();\n      }\n\n      return {\n        values: this._values,\n        text: this._cachedText,\n      };\n    },\n\n    inspect() {\n      return {\n        preparedQuery: this.preparedQuery,\n        tables: this.tables,\n      };\n    },\n\n    toSql() {\n      return this;\n    },\n\n    toString() {\n      const { values, text } = this.preparedQuery;\n\n      return `${text} - [${values.join(\", \")}]`;\n    },\n  };\n}\n\nexport function sql(\n  rawStrings: ReadonlyArray<string>,\n  ...rawValues: IRawValue[]\n): ISql {\n  return internalSql(rawStrings, rawValues)\n}\n\nsql.raw = (value: string) => {\n  return sql([value]);\n};\nsql.liter = (str: string) => {\n  return sql.raw(strip(str));\n};\nsql.table = table;\nsql.isTable = isTable;\nsql.isSql = isSql;\nsql.empty = sql.raw(\"\");\nsql.join = (\n  values: IRawValue[],\n  separator = \", \",\n  prefix = \"\",\n  suffix = \"\"\n) => {\n  values = values.filter((v) => (isSql(v) ? !v.toSql().isEmpty : true));\n\n  if (values.length === 0) {\n    throw new TypeError(\n      \"Expected `join([])` to be called with an array of multiple elements, but got an empty array\"\n    );\n  }\n\n  return internalSql(\n    [prefix, ...Array(values.length - 1).fill(separator), suffix],\n    values\n  );\n};\n","import { IQuery, makeId } from \"@kikko-land/kikko\";\n\ntype IBaseCommand = {\n  commandId: string;\n  suppressLog?: boolean;\n};\n\nexport type IExecQueriesCommand = IBaseCommand & {\n  type: \"runQueries\";\n  queries: IQuery[];\n  logOpts: {\n    suppress: boolean;\n    transactionId?: string;\n  };\n};\n\nexport type ICommand = IExecQueriesCommand;\n\nexport const buildRunQueriesCommand = (\n  queries: IQuery[],\n  opts: { log: { suppress: boolean; transactionId?: string } }\n): IExecQueriesCommand => {\n  return {\n    commandId: makeId(),\n    type: \"runQueries\",\n    queries: queries,\n    logOpts: opts.log,\n  };\n};\n","import {\n  EmptyError,\n  filter,\n  firstValueFrom,\n  map,\n  of,\n  switchMap,\n  take,\n  takeUntil,\n  throwError,\n  timeout,\n} from \"rxjs\";\n\nimport { ICommand } from \"./commands\";\nimport { IBackendState } from \"./types\";\n\nexport const runWorkerCommand = async (\n  backendState: IBackendState,\n  command: ICommand\n) => {\n  const { messagesFromWorker$, messagesToWorker$, stop$ } = backendState;\n\n  const waitResponse = firstValueFrom(\n    messagesFromWorker$.pipe(\n      filter(\n        (ev) =>\n          ev.type === \"response\" && ev.data.commandId === command.commandId\n      ),\n      take(1),\n      switchMap((ev) => {\n        if (ev.type === \"response\" && ev.data.status === \"error\") {\n          throw new Error(ev.data.message);\n        } else {\n          return of(ev);\n        }\n      }),\n      map((ev) => {\n        if (ev.type === \"response\" && ev.data.status === \"success\") {\n          return ev.data.result;\n        } else {\n          throw new Error(\"Unknown data format\");\n        }\n      }),\n      timeout({\n        each: backendState.queryTimeout,\n        with: () =>\n          throwError(\n            () =>\n              new Error(\n                `Failed to execute ${JSON.stringify(command)} - timeout`\n              )\n          ),\n      }),\n      takeUntil(stop$)\n    )\n  );\n\n  messagesToWorker$.next({\n    type: \"command\",\n    data: command,\n  });\n\n  try {\n    return await waitResponse;\n  } catch (e) {\n    if (e instanceof EmptyError) {\n      throw new Error(\n        `Failed to run command, usually it means DB is already stopped. Command:\\n${JSON.stringify(\n          command,\n          undefined,\n          2\n        )}`\n      );\n    }\n\n    throw e;\n  }\n};\n","import { initBackend } from \"@kikko-land/better-absurd-sql/dist/indexeddb-main-thread\";\nimport { IDbBackend, IQuery } from \"@kikko-land/kikko\";\nimport {\n  filter,\n  first,\n  firstValueFrom,\n  Observable,\n  ReplaySubject,\n  share,\n  Subject,\n  takeUntil,\n} from \"rxjs\";\n\nimport { buildRunQueriesCommand } from \"./commands\";\nimport { runWorkerCommand } from \"./runWorkerCommand\";\nimport { IBackendState } from \"./types\";\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport DbWorker from \"./worker/DB.worker?worker&inline\";\nimport { IInputWorkerMessage, IOutputWorkerMessage } from \"./worker/types\";\n\nexport const absurdWebBackend = ({\n  wasmUrl,\n  queryTimeout,\n  pageSize,\n  cacheSize,\n}: {\n  wasmUrl: string | (() => Promise<string>);\n  queryTimeout?: number;\n  pageSize?: number;\n  cacheSize?: number;\n}): IDbBackend => ({\n  dbName,\n  stopped$,\n}: {\n  dbName: string;\n  stopped$: Observable<void>;\n}) => {\n  const initializedWorker = new DbWorker();\n  const messagesToWorker$ = new Subject<IInputWorkerMessage>();\n  messagesToWorker$.pipe(takeUntil(stopped$)).subscribe((mes) => {\n    initializedWorker.postMessage(mes);\n  });\n\n  const messagesFromWorker$ = new Observable<IOutputWorkerMessage>((obs) => {\n    const sub = (ev: MessageEvent<IOutputWorkerMessage>) => {\n      // console.log(\n      //   `[DB][${\n      //     ev.data.type === 'response' && ev.data.data.commandId\n      //   }] new message from worker`,\n      //   ev.data,\n      // );\n      obs.next(ev.data);\n    };\n    initializedWorker.addEventListener(\"message\", sub);\n\n    return () => {\n      initializedWorker.removeEventListener(\"message\", sub);\n    };\n  }).pipe(\n    share({\n      connector: () => new ReplaySubject(20),\n      resetOnRefCountZero: false,\n    }),\n    takeUntil(stopped$)\n  );\n\n  stopped$.pipe(first()).subscribe(() => {\n    initializedWorker.terminate();\n  });\n\n  const state: IBackendState = {\n    messagesToWorker$,\n    messagesFromWorker$,\n    stop$: stopped$,\n    queryTimeout: queryTimeout || 30_000,\n  };\n\n  return {\n    async initialize() {\n      initBackend(initializedWorker);\n\n      const initPromise = firstValueFrom(\n        messagesFromWorker$.pipe(\n          filter((ev) => ev.type === \"initialized\"),\n          takeUntil(stopped$)\n        )\n      );\n\n      const url = typeof wasmUrl === \"string\" ? wasmUrl : await wasmUrl();\n\n      messagesToWorker$.next({\n        type: \"initialize\",\n        dbName: dbName,\n        wasmUrl: new URL(url, document.baseURI).toString(),\n        pageSize: pageSize !== undefined ? pageSize : 32 * 1024,\n        cacheSize: cacheSize !== undefined ? cacheSize : -5000,\n      });\n\n      await initPromise;\n    },\n    async execQueries(queries: IQuery[], opts) {\n      return await runWorkerCommand(\n        state,\n        buildRunQueriesCommand(queries, opts)\n      );\n    },\n  };\n};\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IHQ9MzczNTkyODU1OTtjbGFzcyBle2NvbnN0cnVjdG9yKHQse2luaXRpYWxPZmZzZXQ6ZT00LHVzZUF0b21pY3M6aT0hMCxzdHJlYW06cz0hMCxkZWJ1ZzpyLG5hbWU6bn09e30pe3RoaXMuYnVmZmVyPXQsdGhpcy5hdG9taWNWaWV3PW5ldyBJbnQzMkFycmF5KHQpLHRoaXMub2Zmc2V0PWUsdGhpcy51c2VBdG9taWNzPWksdGhpcy5zdHJlYW09cyx0aGlzLmRlYnVnPXIsdGhpcy5uYW1lPW59bG9nKC4uLnQpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKGBbcmVhZGVyOiAke3RoaXMubmFtZX1dYCwuLi50KX13YWl0V3JpdGUodCxlPW51bGwpe2lmKHRoaXMudXNlQXRvbWljcyl7Zm9yKHRoaXMubG9nKGB3YWl0aW5nIGZvciAke3R9YCk7MD09PUF0b21pY3MubG9hZCh0aGlzLmF0b21pY1ZpZXcsMCk7KXtpZihudWxsIT1lJiYidGltZWQtb3V0Ij09PUF0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCwwLGUpKXRocm93IG5ldyBFcnJvcigidGltZW91dCIpO0F0b21pY3Mud2FpdCh0aGlzLmF0b21pY1ZpZXcsMCwwLDUwMCl9dGhpcy5sb2coYHJlc3VtZWQgZm9yICR7dH1gKX1lbHNlIGlmKDEhPT10aGlzLmF0b21pY1ZpZXdbMF0pdGhyb3cgbmV3IEVycm9yKCJgd2FpdFdyaXRlYCBleHBlY3RlZCBhcnJheSB0byBiZSByZWFkYWJsZSIpfWZsaXAoKXtpZih0aGlzLmxvZygiZmxpcCIpLHRoaXMudXNlQXRvbWljcyl7aWYoMSE9PUF0b21pY3MuY29tcGFyZUV4Y2hhbmdlKHRoaXMuYXRvbWljVmlldywwLDEsMCkpdGhyb3cgbmV3IEVycm9yKCJSZWFkIGRhdGEgb3V0IG9mIHN5bmMhIFRoaXMgaXMgZGlzYXN0cm91cyIpO0F0b21pY3Mubm90aWZ5KHRoaXMuYXRvbWljVmlldywwKX1lbHNlIHRoaXMuYXRvbWljVmlld1swXT0wO3RoaXMub2Zmc2V0PTR9ZG9uZSgpe3RoaXMud2FpdFdyaXRlKCJkb25lIik7bGV0IGU9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5nZXRVaW50MzIoMCk9PT10O3JldHVybiBlJiYodGhpcy5sb2coImRvbmUiKSx0aGlzLmZsaXAoKSksZX1wZWVrKHQpe3RoaXMucGVla09mZnNldD10aGlzLm9mZnNldDtsZXQgZT10KCk7cmV0dXJuIHRoaXMub2Zmc2V0PXRoaXMucGVla09mZnNldCx0aGlzLnBlZWtPZmZzZXQ9bnVsbCxlfXN0cmluZyh0KXt0aGlzLndhaXRXcml0ZSgic3RyaW5nIix0KTtsZXQgZT10aGlzLl9pbnQzMigpLGk9ZS8yLHM9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0LGUpLHI9W107Zm9yKGxldCB0PTA7dDxpO3QrKylyLnB1c2gocy5nZXRVaW50MTYoMip0KSk7bGV0IG49U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIpO3JldHVybiB0aGlzLmxvZygic3RyaW5nIixuKSx0aGlzLm9mZnNldCs9ZSxudWxsPT10aGlzLnBlZWtPZmZzZXQmJnRoaXMuZmxpcCgpLG59X2ludDMyKCl7bGV0IHQ9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5nZXRJbnQzMigpO3JldHVybiB0aGlzLmxvZygiX2ludDMyIix0KSx0aGlzLm9mZnNldCs9NCx0fWludDMyKCl7dGhpcy53YWl0V3JpdGUoImludDMyIik7bGV0IHQ9dGhpcy5faW50MzIoKTtyZXR1cm4gdGhpcy5sb2coImludDMyIix0KSxudWxsPT10aGlzLnBlZWtPZmZzZXQmJnRoaXMuZmxpcCgpLHR9Ynl0ZXMoKXt0aGlzLndhaXRXcml0ZSgiYnl0ZXMiKTtsZXQgdD10aGlzLl9pbnQzMigpLGU9bmV3IEFycmF5QnVmZmVyKHQpO3JldHVybiBuZXcgVWludDhBcnJheShlKS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsdGhpcy5vZmZzZXQsdCkpLHRoaXMubG9nKCJieXRlcyIsZSksdGhpcy5vZmZzZXQrPXQsbnVsbD09dGhpcy5wZWVrT2Zmc2V0JiZ0aGlzLmZsaXAoKSxlfX1jbGFzcyBpe2NvbnN0cnVjdG9yKHQse2luaXRpYWxPZmZzZXQ6ZT00LHVzZUF0b21pY3M6aT0hMCxzdHJlYW06cz0hMCxkZWJ1ZzpyLG5hbWU6bn09e30pe3RoaXMuYnVmZmVyPXQsdGhpcy5hdG9taWNWaWV3PW5ldyBJbnQzMkFycmF5KHQpLHRoaXMub2Zmc2V0PWUsdGhpcy51c2VBdG9taWNzPWksdGhpcy5zdHJlYW09cyx0aGlzLmRlYnVnPXIsdGhpcy5uYW1lPW4sdGhpcy51c2VBdG9taWNzP0F0b21pY3Muc3RvcmUodGhpcy5hdG9taWNWaWV3LDAsMCk6dGhpcy5hdG9taWNWaWV3WzBdPTB9bG9nKC4uLnQpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKGBbd3JpdGVyOiAke3RoaXMubmFtZX1dYCwuLi50KX13YWl0UmVhZCh0KXtpZih0aGlzLnVzZUF0b21pY3Mpe2lmKHRoaXMubG9nKGB3YWl0aW5nIGZvciAke3R9YCksMCE9PUF0b21pY3MuY29tcGFyZUV4Y2hhbmdlKHRoaXMuYXRvbWljVmlldywwLDAsMSkpdGhyb3cgbmV3IEVycm9yKCJXcm90ZSBzb21ldGhpbmcgaW50byB1bndyaXRhYmxlIGJ1ZmZlciEgVGhpcyBpcyBkaXNhc3Ryb3VzIik7Zm9yKEF0b21pY3Mubm90aWZ5KHRoaXMuYXRvbWljVmlldywwKTsxPT09QXRvbWljcy5sb2FkKHRoaXMuYXRvbWljVmlldywwKTspQXRvbWljcy53YWl0KHRoaXMuYXRvbWljVmlldywwLDEsNTAwKTt0aGlzLmxvZyhgcmVzdW1lZCBmb3IgJHt0fWApfWVsc2UgdGhpcy5hdG9taWNWaWV3WzBdPTE7dGhpcy5vZmZzZXQ9NH1maW5hbGl6ZSgpe3RoaXMubG9nKCJmaW5hbGl6aW5nIiksbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRVaW50MzIoMCx0KSx0aGlzLndhaXRSZWFkKCJmaW5hbGl6ZSIpfXN0cmluZyh0KXt0aGlzLmxvZygic3RyaW5nIix0KTtsZXQgZT0yKnQubGVuZ3RoO3RoaXMuX2ludDMyKGUpO2xldCBpPW5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCxlKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKylpLnNldFVpbnQxNigyKmUsdC5jaGFyQ29kZUF0KGUpKTt0aGlzLm9mZnNldCs9ZSx0aGlzLndhaXRSZWFkKCJzdHJpbmciKX1faW50MzIodCl7bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLHRoaXMub2Zmc2V0KS5zZXRJbnQzMigwLHQpLHRoaXMub2Zmc2V0Kz00fWludDMyKHQpe3RoaXMubG9nKCJpbnQzMiIsdCksdGhpcy5faW50MzIodCksdGhpcy53YWl0UmVhZCgiaW50MzIiKX1ieXRlcyh0KXt0aGlzLmxvZygiYnl0ZXMiLHQpO2xldCBlPXQuYnl0ZUxlbmd0aDt0aGlzLl9pbnQzMihlKSxuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcix0aGlzLm9mZnNldCkuc2V0KG5ldyBVaW50OEFycmF5KHQpKSx0aGlzLm9mZnNldCs9ZSx0aGlzLndhaXRSZWFkKCJieXRlcyIpfX1sZXQgcz0wLHI9MSxuPTIsbz00O2xldCBhPS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbD1uZXcgTWFwLGM9bmV3IE1hcDtmdW5jdGlvbiBoKHQsZSl7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGUpfWNsYXNzIGZ7Y29uc3RydWN0b3IodCxlPSJyZWFkb25seSIpe3RoaXMuZGI9dCx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sZSksdGhpcy5zdG9yZT10aGlzLnRyYW5zLm9iamVjdFN0b3JlKCJkYXRhIiksdGhpcy5sb2NrVHlwZT0icmVhZG9ubHkiPT09ZT9yOm8sdGhpcy5jYWNoZWRGaXJzdEJsb2NrPW51bGwsdGhpcy5jdXJzb3I9bnVsbCx0aGlzLnByZXZSZWFkcz1udWxsfWFzeW5jIHByZWZldGNoRmlyc3RCbG9jayh0KXtsZXQgZT1hd2FpdCB0aGlzLmdldCgwKTtyZXR1cm4gdGhpcy5jYWNoZWRGaXJzdEJsb2NrPWUsZX1hc3luYyB3YWl0Q29tcGxldGUoKXtyZXR1cm4gbmV3IFByb21pc2UoKCh0LGUpPT57dGhpcy5jb21taXQoKSx0aGlzLmxvY2tUeXBlPT09bz8odGhpcy50cmFucy5vbmNvbXBsZXRlPWU9PnQoKSx0aGlzLnRyYW5zLm9uZXJyb3I9dD0+ZSh0KSk6YT90aGlzLnRyYW5zLm9uY29tcGxldGU9ZT0+dCgpOnQoKX0pKX1jb21taXQoKXt0aGlzLnRyYW5zLmNvbW1pdCYmdGhpcy50cmFucy5jb21taXQoKX1hc3luYyB1cGdyYWRlRXhjbHVzaXZlKCl7dGhpcy5jb21taXQoKSx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sInJlYWR3cml0ZSIpLHRoaXMuc3RvcmU9dGhpcy50cmFucy5vYmplY3RTdG9yZSgiZGF0YSIpLHRoaXMubG9ja1R5cGU9bztsZXQgdD10aGlzLmNhY2hlZEZpcnN0QmxvY2s7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9dCYmbnVsbCE9ZSl7bGV0IGk9bmV3IFVpbnQ4QXJyYXkodCkscz1uZXcgVWludDhBcnJheShlKTtmb3IobGV0IHQ9MjQ7dDw0MDt0KyspaWYoaVt0XSE9PXNbdF0pcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIG51bGw9PXQmJm51bGw9PWV9KGF3YWl0IHRoaXMucHJlZmV0Y2hGaXJzdEJsb2NrKDUwMCksdCl9ZG93bmdyYWRlU2hhcmVkKCl7dGhpcy5jb21taXQoKSx0aGlzLnRyYW5zPXRoaXMuZGIudHJhbnNhY3Rpb24oWyJkYXRhIl0sInJlYWRvbmx5IiksdGhpcy5zdG9yZT10aGlzLnRyYW5zLm9iamVjdFN0b3JlKCJkYXRhIiksdGhpcy5sb2NrVHlwZT1yfWFzeW5jIGdldCh0KXtyZXR1cm4gbmV3IFByb21pc2UoKChlLGkpPT57bGV0IHM9dGhpcy5zdG9yZS5nZXQodCk7cy5vbnN1Y2Nlc3M9dD0+e2Uocy5yZXN1bHQpfSxzLm9uZXJyb3I9dD0+aSh0KX0pKX1nZXRSZWFkRGlyZWN0aW9uKCl7bGV0IHQ9dGhpcy5wcmV2UmVhZHM7aWYodCl7aWYodFswXTx0WzFdJiZ0WzFdPHRbMl0mJnRbMl0tdFswXTwxMClyZXR1cm4ibmV4dCI7aWYodFswXT50WzFdJiZ0WzFdPnRbMl0mJnRbMF0tdFsyXTwxMClyZXR1cm4icHJldiJ9cmV0dXJuIG51bGx9cmVhZCh0KXtsZXQgZT0oKT0+bmV3IFByb21pc2UoKCh0LGUpPT57aWYobnVsbCE9dGhpcy5jdXJzb3JQcm9taXNlKXRocm93IG5ldyBFcnJvcigid2FpdEN1cnNvcigpIGNhbGxlZCBidXQgc29tZXRoaW5nIGVsc2UgaXMgYWxyZWFkeSB3YWl0aW5nIik7dGhpcy5jdXJzb3JQcm9taXNlPXtyZXNvbHZlOnQscmVqZWN0OmV9fSkpO2lmKHRoaXMuY3Vyc29yKXtsZXQgaT10aGlzLmN1cnNvcjtyZXR1cm4ibmV4dCI9PT1pLmRpcmVjdGlvbiYmdD5pLmtleSYmdDxpLmtleSsxMDA/KGkuYWR2YW5jZSh0LWkua2V5KSxlKCkpOiJwcmV2Ij09PWkuZGlyZWN0aW9uJiZ0PGkua2V5JiZ0Pmkua2V5LTEwMD8oaS5hZHZhbmNlKGkua2V5LXQpLGUoKSk6KHRoaXMuY3Vyc29yPW51bGwsdGhpcy5yZWFkKHQpKX17bGV0IGk9dGhpcy5nZXRSZWFkRGlyZWN0aW9uKCk7aWYoaSl7bGV0IHM7dGhpcy5wcmV2UmVhZHM9bnVsbCxzPSJwcmV2Ij09PWk/SURCS2V5UmFuZ2UudXBwZXJCb3VuZCh0KTpJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO2xldCByPXRoaXMuc3RvcmUub3BlbkN1cnNvcihzLGkpO3JldHVybiByLm9uc3VjY2Vzcz10PT57bGV0IGU9dC50YXJnZXQucmVzdWx0O2lmKHRoaXMuY3Vyc29yPWUsbnVsbD09dGhpcy5jdXJzb3JQcm9taXNlKXRocm93IG5ldyBFcnJvcigiR290IGRhdGEgZnJvbSBjdXJzb3IgYnV0IG5vdGhpbmcgaXMgd2FpdGluZyBpdCIpO3RoaXMuY3Vyc29yUHJvbWlzZS5yZXNvbHZlKGU/ZS52YWx1ZTpudWxsKSx0aGlzLmN1cnNvclByb21pc2U9bnVsbH0sci5vbmVycm9yPXQ9PntpZihjb25zb2xlLmxvZygiQ3Vyc29yIGZhaWx1cmU6Iix0KSxudWxsPT10aGlzLmN1cnNvclByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJHb3QgZGF0YSBmcm9tIGN1cnNvciBidXQgbm90aGluZyBpcyB3YWl0aW5nIGl0Iik7dGhpcy5jdXJzb3JQcm9taXNlLnJlamVjdCh0KSx0aGlzLmN1cnNvclByb21pc2U9bnVsbH0sZSgpfXJldHVybiBudWxsPT10aGlzLnByZXZSZWFkcyYmKHRoaXMucHJldlJlYWRzPVswLDAsMF0pLHRoaXMucHJldlJlYWRzLnB1c2godCksdGhpcy5wcmV2UmVhZHMuc2hpZnQoKSx0aGlzLmdldCh0KX19YXN5bmMgc2V0KHQpe3JldHVybiB0aGlzLnByZXZSZWFkcz1udWxsLG5ldyBQcm9taXNlKCgoZSxpKT0+e2xldCBzPXRoaXMuc3RvcmUucHV0KHQudmFsdWUsdC5rZXkpO3Mub25zdWNjZXNzPXQ9PmUocy5yZXN1bHQpLHMub25lcnJvcj10PT5pKHQpfSkpfWFzeW5jIGJ1bGtTZXQodCl7dGhpcy5wcmV2UmVhZHM9bnVsbCxhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgodD0+dGhpcy5zZXQodCkpKSl9fWFzeW5jIGZ1bmN0aW9uIHUodCl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZSxpKT0+e2lmKGwuZ2V0KHQpKXJldHVybiB2b2lkIGUobC5nZXQodCkpO2xldCBzPWdsb2JhbFRoaXMuaW5kZXhlZERCLm9wZW4odCwyKTtzLm9uc3VjY2Vzcz1pPT57bGV0IHM9aS50YXJnZXQucmVzdWx0O3Mub252ZXJzaW9uY2hhbmdlPSgpPT57Y29uc29sZS5sb2coImNsb3NpbmcgYmVjYXVzZSB2ZXJzaW9uIGNoYW5nZWQiKSxzLmNsb3NlKCksbC5kZWxldGUodCl9LHMub25jbG9zZT0oKT0+e2wuZGVsZXRlKHQpfSxsLnNldCh0LHMpLGUocyl9LHMub251cGdyYWRlbmVlZGVkPXQ9PntsZXQgZT10LnRhcmdldC5yZXN1bHQ7ZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCJkYXRhIil8fGUuY3JlYXRlT2JqZWN0U3RvcmUoImRhdGEiKX0scy5vbmJsb2NrZWQ9dD0+Y29uc29sZS5sb2coImJsb2NrZWQiLHQpLHMub25lcnJvcj1zLm9uYWJvcnQ9dD0+aSh0LnRhcmdldC5lcnJvcil9KSl9YXN5bmMgZnVuY3Rpb24gdyh0LGUsaSl7bGV0IHM9Yy5nZXQodCk7aWYocyl7aWYoInJlYWR3cml0ZSI9PT1lJiZzLmxvY2tUeXBlPT09cil0aHJvdyBuZXcgRXJyb3IoIkF0dGVtcHRlZCB3cml0ZSBidXQgb25seSBoYXMgU0hBUkVEIGxvY2siKTtyZXR1cm4gaShzKX1zPW5ldyBmKGF3YWl0IHUodCksZSksYXdhaXQgaShzKSxhd2FpdCBzLndhaXRDb21wbGV0ZSgpfWFzeW5jIGZ1bmN0aW9uIGQodCxlLGkpe2xldCBuPWZ1bmN0aW9uKHQpe3JldHVybiBjLmdldCh0KX0oZSk7aWYoaT09PXIpe2lmKG51bGw9PW4pdGhyb3cgbmV3IEVycm9yKCJVbmxvY2sgZXJyb3IgKFNIQVJFRCk6IG5vIHRyYW5zYWN0aW9uIHJ1bm5pbmciKTtuLmxvY2tUeXBlPT09byYmbi5kb3duZ3JhZGVTaGFyZWQoKX1lbHNlIGk9PT1zJiZuJiYoYXdhaXQgbi53YWl0Q29tcGxldGUoKSxjLmRlbGV0ZShlKSk7dC5pbnQzMigwKSx0LmZpbmFsaXplKCl9YXN5bmMgZnVuY3Rpb24gZyh0LGUpe2xldCBpPXQuc3RyaW5nKCk7c3dpdGNoKGkpe2Nhc2UicHJvZmlsZS1zdGFydCI6dC5kb25lKCksZS5pbnQzMigwKSxlLmZpbmFsaXplKCksZyh0LGUpO2JyZWFrO2Nhc2UicHJvZmlsZS1zdG9wIjp0LmRvbmUoKSxhd2FpdCBuZXcgUHJvbWlzZSgodD0+c2V0VGltZW91dCh0LDFlMykpKSxlLmludDMyKDApLGUuZmluYWxpemUoKSxnKHQsZSk7YnJlYWs7Y2FzZSJ3cml0ZUJsb2NrcyI6e2xldCBpPXQuc3RyaW5nKCkscz1bXTtmb3IoOyF0LmRvbmUoKTspe2xldCBlPXQuaW50MzIoKSxpPXQuYnl0ZXMoKTtzLnB1c2goe3BvczplLGRhdGE6aX0pfWF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdyhlLCJyZWFkd3JpdGUiLChhc3luYyBlPT57YXdhaXQgZS5idWxrU2V0KGkubWFwKCh0PT4oe2tleTp0LnBvcyx2YWx1ZTp0LmRhdGF9KSkpKSx0LmludDMyKDApLHQuZmluYWxpemUoKX0pKX0oZSxpLHMpLGcodCxlKTticmVha31jYXNlInJlYWRCbG9jayI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe3JldHVybiB3KGUsInJlYWRvbmx5IiwoYXN5bmMgZT0+e2xldCBzPWF3YWl0IGUucmVhZChpKTtudWxsPT1zP3QuYnl0ZXMobmV3IEFycmF5QnVmZmVyKDApKTp0LmJ5dGVzKHMpLHQuZmluYWxpemUoKX0pKX0oZSxpLHMpLGcodCxlKTticmVha31jYXNlInJlYWRNZXRhIjp7bGV0IGk9dC5zdHJpbmcoKTt0LmRvbmUoKSxhd2FpdCBhc3luYyBmdW5jdGlvbih0LGUpe3JldHVybiB3KGUsInJlYWRvbmx5IiwoYXN5bmMgaT0+e3RyeXtjb25zb2xlLmxvZygiUmVhZGluZyBtZXRhLi4uIik7bGV0IHM9YXdhaXQgaS5nZXQoLTEpO2lmKGNvbnNvbGUubG9nKGBHb3QgbWV0YSBmb3IgJHtlfTpgLHMpLG51bGw9PXMpdC5pbnQzMigtMSksdC5pbnQzMig0MDk2KSx0LmZpbmFsaXplKCk7ZWxzZXtsZXQgZT1hd2FpdCBpLmdldCgwKSxyPTQwOTY7ZSYmKHI9MjU2Km5ldyBVaW50MTZBcnJheShlKVs4XSksdC5pbnQzMihzLnNpemUpLHQuaW50MzIociksdC5maW5hbGl6ZSgpfX1jYXRjaChlKXtjb25zb2xlLmxvZyhlKSx0LmludDMyKC0xKSx0LmludDMyKC0xKSx0LmZpbmFsaXplKCl9fSkpfShlLGkpLGcodCxlKTticmVha31jYXNlIndyaXRlTWV0YSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe3JldHVybiB3KGUsInJlYWR3cml0ZSIsKGFzeW5jIGU9Pnt0cnl7YXdhaXQgZS5zZXQoe2tleTotMSx2YWx1ZTppfSksdC5pbnQzMigwKSx0LmZpbmFsaXplKCl9Y2F0Y2goZSl7Y29uc29sZS5sb2coZSksdC5pbnQzMigtMSksdC5maW5hbGl6ZSgpfX0pKX0oZSxpLHtzaXplOnN9KSxnKHQsZSk7YnJlYWt9Y2FzZSJjbG9zZUZpbGUiOntsZXQgaT10LnN0cmluZygpO3QuZG9uZSgpLGUuaW50MzIoMCksZS5maW5hbGl6ZSgpLGZ1bmN0aW9uKHQpe2xldCBlPWwuZ2V0KHQpO2UmJihlLmNsb3NlKCksbC5kZWxldGUodCkpfShpKSxzZWxmLmNsb3NlKCk7YnJlYWt9Y2FzZSJsb2NrRmlsZSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLGkpe2xldCBzPWMuZ2V0KGUpO2lmKHMpaWYoaT5zLmxvY2tUeXBlKXtoKHMubG9ja1R5cGU9PT1yLGBVcHJhZGluZyBsb2NrIHR5cGUgZnJvbSAke3MubG9ja1R5cGV9IGlzIGludmFsaWRgKSxoKGk9PT1ufHxpPT09byxgVXBncmFkaW5nIGxvY2sgdHlwZSB0byAke2l9IGlzIGludmFsaWRgKTtsZXQgZT1hd2FpdCBzLnVwZ3JhZGVFeGNsdXNpdmUoKTt0LmludDMyKGU/MDotMSksdC5maW5hbGl6ZSgpfWVsc2UgaChzLmxvY2tUeXBlPT09aSxgRG93bmdyYWRpbmcgbG9jayB0byAke2l9IGlzIGludmFsaWRgKSx0LmludDMyKDApLHQuZmluYWxpemUoKTtlbHNle2goaT09PXIsYE5ldyBsb2NrcyBtdXN0IHN0YXJ0IGFzIFNIQVJFRCBpbnN0ZWFkIG9mICR7aX1gKTtsZXQgcz1uZXcgZihhd2FpdCB1KGUpKTthd2FpdCBzLnByZWZldGNoRmlyc3RCbG9jayg1MDApLGMuc2V0KGUscyksdC5pbnQzMigwKSx0LmZpbmFsaXplKCl9fShlLGkscyksZyh0LGUpO2JyZWFrfWNhc2UidW5sb2NrRmlsZSI6e2xldCBpPXQuc3RyaW5nKCkscz10LmludDMyKCk7dC5kb25lKCksYXdhaXQgZChlLGkscyksZyh0LGUpO2JyZWFrfWRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIG1ldGhvZDogIitpKX19c2VsZi5vbm1lc3NhZ2U9dD0+e3N3aXRjaCh0LmRhdGEudHlwZSl7Y2FzZSJpbml0Ijp7bGV0W3Mscl09dC5kYXRhLmJ1ZmZlcnM7ZyhuZXcgZShzLHtuYW1lOiJhcmdzIixkZWJ1ZzohMX0pLG5ldyBpKHIse25hbWU6InJlc3VsdHMiLGRlYnVnOiExfSkpO2JyZWFrfX19fSgpOwoK', null, false);\n/* eslint-enable */\n\nexport default WorkerFactory;\n"]},"metadata":{},"sourceType":"module"}